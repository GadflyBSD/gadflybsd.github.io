<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>内部培训：使用IDEA创建SpringBoot的API项目</title>
      <link href="/2019/12/20/cheng-xu-she-ji/shi-yong-idea-chuang-jian-springboot-de-api-xiang-mu/"/>
      <url>/2019/12/20/cheng-xu-she-ji/shi-yong-idea-chuang-jian-springboot-de-api-xiang-mu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="center云南汉王科技java8-springboot框架开发培训center"><a class="markdownIt-Anchor" href="#center云南汉王科技java8-springboot框架开发培训center"></a> <center>云南汉王科技<code>Java8 SpringBoot</code>框架开发培训</center></h2><p>  本次培训将通过<code>IntelliJ IDEA</code>编程语言开发的集成环境创建一个<code>SpringBoot</code>项目，在该项目中整合<code>MyBatis Plus</code>、<code>Lombok</code>和<code>Swagger2</code>现实一个标准的有两张数据库表（用户资料表、文章信息表）的简易个人博客的服务器端<code>RESTful API</code>开发。</p><h2 id="一-预备知识"><a class="markdownIt-Anchor" href="#一-预备知识"></a> 一、预备知识</h2><ul><li><h3 id="restful-api"><a class="markdownIt-Anchor" href="#restful-api"></a> <code>RESTful API</code></h3><blockquote><p>是目前最流行的 API 设计规范，用于 Web 数据接口的设计。具体参看<a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" target="_blank" rel="noopener">《阮一峰：RESTful API 最佳实践》</a></p></blockquote></li><li><h3 id="springboot"><a class="markdownIt-Anchor" href="#springboot"></a> <code>SpringBoot</code></h3><ul><li><a href="https://spring.io/projects/spring-boot/" target="_blank" rel="noopener">Spring Boot 官网</a></li><li><a href="https://baike.baidu.com/item/Spring%20Boot/20249767?fr=aladdin" target="_blank" rel="noopener">Spring Boot 百度百科</a></li><li>Spring Boot是一个简化Spring开发的框架。通过简化配置来进一步简化了Spring应用的整个搭建和开发过程。</li><li>在使用Spring Boot时只需要配置相应的Spring Boot就可以用所有的Spring组件，简单的说，spring boot就是整合了很多优秀的框架，不用我们自己手动的去写一堆xml配置然后进行配置。从本质上来说，Spring Boot就是Spring,它做了那些没有它你也会去做的Spring Bean配置。</li></ul></li><li><h3 id="mybatis-plus"><a class="markdownIt-Anchor" href="#mybatis-plus"></a> <code>MyBatis Plus</code></h3><blockquote><p>使用Mybatis发现需要在mapper.xml中写很多重复的简单CRUD（增删改查），使用MybatisPlus可以大大简化这部分代码，在<code>MyBatis</code> 的基础上只做增强不做改变，为简化开发、提高效率而生。</p></blockquote><ul><li><a href="https://mp.baomidou.com/" target="_blank" rel="noopener">MyBatis Plus 官网</a></li><li>特性<ul><li>无侵入<blockquote><p>只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</p></blockquote></li><li>损耗小<blockquote><p>启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</p></blockquote></li><li>强大的 CRUD 操作<blockquote><p>内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</p></blockquote></li><li>支持 Lambda 形式调用<blockquote><p>通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错,Java8中让人又爱又恨的Lambda表达式</p></blockquote></li><li>支持多种数据库<blockquote><p>支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer2005、SQLServer 等多种数据库</p></blockquote></li><li>支持主键自动生成<blockquote><p>支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</p></blockquote></li><li>支持 XML 热加载<blockquote><p>Mapper 对应的 XML 支持热加载，对于简单的 CRUD 操作，甚至可以无 XML 启动</p></blockquote></li><li>支持 ActiveRecord 模式<blockquote><p>支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</p></blockquote></li><li>支持自定义全局通用操作<blockquote><p>支持全局通用方法注入（ Write once, use anywhere ）</p></blockquote></li><li>支持关键词自动转义<blockquote><p>支持数据库关键词（order、key……）自动转义，还可自定义关键词</p></blockquote></li><li>内置代码生成器<blockquote><p>采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</p></blockquote></li><li>内置分页插件<blockquote><p>基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</p></blockquote></li><li>内置性能分析插件<blockquote><p>可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</p></blockquote></li><li>内置全局拦截插件<blockquote><p>提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</p></blockquote></li><li>内置 Sql 注入剥离器<blockquote><p>支持 Sql 注入剥离，有效预防 Sql 注入攻击</p></blockquote></li></ul></li><li>核心功能<ul><li>代码生成器<blockquote><p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller等各个模块的代码，极大的提升了开发效率。</p></blockquote></li><li>CRUD 接口<blockquote><p>即增删改查数据库接口</p></blockquote></li><li>条件构造器<blockquote><p>几乎涵盖所有的数据库查询where条件，并支持原始sql。</p></blockquote></li><li>分页插件<blockquote><p>可通过mybatis-plus 自动分页。</p></blockquote></li><li>Sequence主键<blockquote><p>实体主键支持Sequence，自动生成主键。</p></blockquote></li></ul></li><li>扩展插件<ul><li>通用枚举<blockquote><p>解决了繁琐的配置，让 mybatis 优雅的使用枚举属性！</p></blockquote></li><li>性能分析插件<blockquote><p>性能分析拦截器，用于输出每条 SQL 语句及其执行时间</p></blockquote></li><li>动态数据源<blockquote><p>基于springboot的快速集成多数据源</p></blockquote></li><li>分布式事务<blockquote><p>支持 rabbit 实现可靠消息分布式事务</p></blockquote></li></ul></li></ul></li><li><h3 id="lombok"><a class="markdownIt-Anchor" href="#lombok"></a> <code>Lombok</code></h3><ul><li><a href="https://projectlombok.org/" target="_blank" rel="noopener">Lombok 官网</a></li><li><a href="https://blog.csdn.net/ThinkWon/article/details/101392808" target="_blank" rel="noopener">Lombok简介、使用、工作原理、优缺点</a></li><li>Lombok能以简单的注解形式来简化java代码，提高开发人员的开发效率。例如开发中经常需要写的javabean，都需要花时间去添加相应的getter/setter，也许还要去写构造器、equals等方法，而且需要维护，当属性多时会出现大量的getter/setter方法，这些显得很冗长也没有太多技术含量，一旦修改属性，就容易出现忘记修改对应方法的失误。</li><li>Lombok能通过注解的方式，在编译时自动为属性生成构造器、getter/setter、equals、hashcode、toString方法。出现的神奇就是在源码中没有getter和setter方法，但是在编译生成的字节码文件中有getter和setter方法。这样就省去了手动重建这些代码的麻烦，使代码看起来更简洁些。</li></ul></li><li><h3 id="swagger2"><a class="markdownIt-Anchor" href="#swagger2"></a> <code>Swagger2</code></h3><ul><li><a href="https://swagger.io/" target="_blank" rel="noopener">Swagger2 官网</a></li><li>自动生成在线API接口文档</li><li>由于Spring Boot能够快速开发、便捷部署等特性，相信有很大一部分Spring Boot的用户会用来构建RESTful API。而我们构建RESTful</li><li>API的目的通常都是由于多终端的原因，这些终端会共用很多底层业务逻辑，因此我们会抽象出这样一层来同时服务于多个移动端或者Web前端。</li></ul></li></ul><h2 id="二-创建项目"><a class="markdownIt-Anchor" href="#二-创建项目"></a> 二、创建项目</h2><ol><li><h3 id="使用idea创建一个名为springboottrain的项目"><a class="markdownIt-Anchor" href="#使用idea创建一个名为springboottrain的项目"></a> 使用<code>IDEA</code>创建一个名为<code>SpringBootTrain</code>的项目</h3><blockquote><p><code>Project</code>(项目）：项目工程工作空间，相当于<code>Eclipse</code>中的<code>Workspace</code>（工作空间）</p></blockquote><ul><li>Step 1：<br><img alt data-src="http://static1.gadfly.pub/assets/images/SpringBootAPITrain01-01.jpg" class="lazyload"></li><li>Step 2：<br><img alt data-src="http://static1.gadfly.pub/assets/images/SpringBootAPITrain01-02.jpg" class="lazyload"></li><li>Step 3：<br><img alt data-src="http://static1.gadfly.pub/assets/images/SpringBootAPITrain01-03.jpg" class="lazyload"></li><li>Step 4：<br><img alt data-src="http://static1.gadfly.pub/assets/images/SpringBootAPITrain01-04.jpg" class="lazyload"></li><li>Step 5：<br><img alt data-src="http://static1.gadfly.pub/assets/images/SpringBootAPITrain01-05.jpg" class="lazyload"></li></ul></li><li><h3 id="在刚刚创建的project中创建module模块"><a class="markdownIt-Anchor" href="#在刚刚创建的project中创建module模块"></a> 在刚刚创建的<code>Project</code>中创建<code>Module</code>(模块)</h3><blockquote><p><code>Module</code>（模块）：<code>Eclipse</code> 中 <code>Project</code> 相当于 <code>IDEA</code> 中的 <code>Module</code></p></blockquote><ul><li><p>Step 1：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.14.54.png" class="lazyload"></p></li><li><p>Step 2：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.27.15.png" class="lazyload"></p></li><li><p>Step 3：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.29.41.png" class="lazyload"></p></li><li><p>Step 4：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.35.01.png" class="lazyload"></p></li><li><p>Step 5：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.41.27.png" class="lazyload"></p></li><li><p>Step 6：打开新创建的<code>Restful01</code>模块中的<code>pom.xml</code>文件手动配置组件和依赖包<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8A%E5%8D%8811.43.31.png" class="lazyload"></p></li></ul></li><li><h3 id="配置组件和依赖包"><a class="markdownIt-Anchor" href="#配置组件和依赖包"></a> 配置组件和依赖包</h3></li></ol><ul><li><h4 id="在dependenciesdependencies中添加需要的组件和依赖包"><a class="markdownIt-Anchor" href="#在dependenciesdependencies中添加需要的组件和依赖包"></a> 在<code>&lt;dependencies&gt;&lt;\dependencies&gt;</code>中添加需要的组件和依赖包</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.postgresql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>postgresql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>42.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatis-plus --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.baomidou/mybatis-plus-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 模版引擎 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SpringBoot整合Swagger2 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-beanutils/commons-beanutils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.yaml/snakeyaml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.yaml<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>snakeyaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.58<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="在pluginsplugins中添加如下内容指定打包方式"><a class="markdownIt-Anchor" href="#在pluginsplugins中添加如下内容指定打包方式"></a> 在<code>&lt;plugins&gt;&lt;\plugins&gt;</code>中添加如下内容，指定打包方式</h4> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- java编译插件,maven默认1.5版本过低,指定为1.8 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--编译打包时,忽略测试类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ol start="4"><li><h3 id="新建模块applicationyml配置文件并配置springboot"><a class="markdownIt-Anchor" href="#新建模块applicationyml配置文件并配置springboot"></a> 新建模块<code>application.yml</code>配置文件并配置<code>SpringBoot</code></h3><ul><li><h4 id="新建模块applicationyml配置文件"><a class="markdownIt-Anchor" href="#新建模块applicationyml配置文件"></a> 新建模块<code>application.yml</code>配置文件</h4><ul><li>Step 1：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.29.51.png" class="lazyload"></li><li>Step 2：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.31.27.png" class="lazyload"></li></ul></li><li><h4 id="配置springboot"><a class="markdownIt-Anchor" href="#配置springboot"></a> 配置<code>SpringBoot</code></h4> <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8088</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/api</span>  <span class="comment">#项目名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">swagger:</span></span><br><span class="line">  <span class="attr">print-init:</span> <span class="literal">true</span> <span class="comment">#非必需,默认false</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#必需</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">local</span> <span class="comment">#@spring.active@  #默认使用本地配置文件</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.postgresql.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:postgresql://120.79.90.37:5432/learning</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">learning</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">**************</span></span><br><span class="line">    <span class="attr">db-name:</span> <span class="string">learning</span></span><br><span class="line">    <span class="attr">db-schema:</span> <span class="string">swagger2</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="attr">mapper-locations:</span> <span class="string">classpath:/com/hanwang/restful01/mapper/xml/*Mapper.xml</span></span><br><span class="line">    <span class="comment">#实体扫描，多个package用逗号或者分号分隔</span></span><br><span class="line">    <span class="attr">typeAliasesPackage:</span> <span class="string">com.hanwang.restful01.entity</span></span><br><span class="line">    <span class="attr">typeEnumsPackage:</span> <span class="string">com.baomidou.springboot.db.entity.enums</span></span><br><span class="line">    <span class="attr">global-config:</span></span><br><span class="line">      <span class="comment">#刷新mapper 调试神器</span></span><br><span class="line">      <span class="attr">db-config:</span></span><br><span class="line">        <span class="comment">#主键类型  0:"数据库ID自增", 1:"用户输入ID",2:"全局唯一ID (数字类型唯一ID)", 3:"全局唯一ID UUID";</span></span><br><span class="line">        <span class="attr">id-type:</span> <span class="string">uuid</span></span><br><span class="line">        <span class="comment">#字段策略 0:"忽略判断",1:"非 NULL 判断"),2:"非空判断"</span></span><br><span class="line">        <span class="attr">field-strategy:</span> <span class="string">not_empty</span></span><br><span class="line">        <span class="comment">#驼峰下划线转换</span></span><br><span class="line">        <span class="attr">column-underline:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment">#数据库大写下划线转换</span></span><br><span class="line">        <span class="comment">#capital-mode: true</span></span><br><span class="line">        <span class="comment">#逻辑删除配置</span></span><br><span class="line">        <span class="attr">logic-delete-value:</span> <span class="string">Y</span></span><br><span class="line">        <span class="attr">logic-not-delete-value:</span> <span class="string">N</span></span><br><span class="line">        <span class="attr">db-type:</span> <span class="string">pgsql</span></span><br><span class="line">      <span class="attr">refresh:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">sql-injector:</span> <span class="string">com.baomidou.mybatisplus.extension.injector.LogicSqlInjector</span></span><br><span class="line">      <span class="comment">#自定义填充策略接口实现</span></span><br><span class="line">      <span class="comment">#meta-object-Handler: com.baomidou.springboot.xxx</span></span><br><span class="line">      <span class="comment">#自定义SQL注入器</span></span><br><span class="line">      <span class="comment">#sql-injector: com.baomidou.springboot.xxx</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">      <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">cache-enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">generator:</span></span><br><span class="line">      <span class="attr">module-name:</span> <span class="string">restful01</span></span><br><span class="line">      <span class="attr">author:</span> <span class="string">gadfly</span></span><br><span class="line">      <span class="attr">file-override:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#logging</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">maven-logs</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span>  <span class="string">warn</span></span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="配置idea的数据库可视化发开组件"><a class="markdownIt-Anchor" href="#配置idea的数据库可视化发开组件"></a> 配置<code>IDEA</code>的数据库可视化发开组件</h3><ul><li><h4 id="新建数据库连接"><a class="markdownIt-Anchor" href="#新建数据库连接"></a> 新建数据库连接</h4><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.09.11.png" class="lazyload"></p></li><li><h4 id="配置数据库连接方式"><a class="markdownIt-Anchor" href="#配置数据库连接方式"></a> 配置数据库连接方式</h4><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.19.06.png" class="lazyload"></p></li><li><h4 id="选择数据库和框架"><a class="markdownIt-Anchor" href="#选择数据库和框架"></a> 选择数据库和框架</h4><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.25.40.png" class="lazyload"></p></li></ul></li><li><h3 id="配置project-structure项目结构"><a class="markdownIt-Anchor" href="#配置project-structure项目结构"></a> 配置<code>Project Structure</code>项目结构</h3><blockquote><p>对<code>module</code>的开发目录进行文件夹分类，以让<code>idea</code>明白怎么去对待他们，明确哪些是存放源代码的文件夹，哪些是存放静态文件的文件夹，哪些是存放测试代码的文件夹，哪些是被排除编译的文件夹。</p><ul><li><code>Sources</code>：源代码存放的文件，蓝色。</li><li><code>Tests</code>：设置测试代码存放的文件件，绿色。</li><li><code>Resources</code>：一般对应着<code>Sources</code>文件，一般放配置文件，如：<code>log4j.properties，application.yml</code>。</li><li><code>Test Resources</code>：这个对应着<code>Tests</code>文件夹，存放着<code>Tests</code>代码的配置文件。</li><li><code>Excluded</code>：设置配出编译检查的文件，例如我们在<code>project</code>模块设置的<code>out</code>文件夹。</li></ul></blockquote><ul><li>Step 1：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.48.41.png" class="lazyload"></li><li>Step 2：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%8812.51.03.png" class="lazyload"></li><li>Step 3：引入项目需要的其他第三方的<code>SDK</code>（如果有）<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%881.10.59.png" class="lazyload"><br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%881.12.40.png" class="lazyload"></li></ul></li><li><h3 id="新建package包"><a class="markdownIt-Anchor" href="#新建package包"></a> 新建<code>Package</code>包</h3><blockquote><p>为了更好地组织类，<code>Java</code> 提供了包机制，用于区别类名的命名空间。</p></blockquote><ul><li>configure（配置）</li><li>entity(实体)<blockquote><p>entity的意思就是实体的意思，所以也是最常用到的，entity包中的类是必须和数据库相对应的</p></blockquote></li><li>model(模型)<blockquote><p>model大家不陌生，都知道是模型的意思，当用model当包名的时候，一般里面存的是实体类的模型，一般是用来给前端用的。</p></blockquote></li><li>service（服务）</li><li>mapper（数据库映射）</li><li>controller（控制器）</li></ul></li></ol><ul><li><p>新建<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%881.23.07.png" class="lazyload"></p></li><li><p>完成</p><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%881.28.26.png" class="lazyload"></p></li></ul><h2 id="三-开发编程"><a class="markdownIt-Anchor" href="#三-开发编程"></a> 三、开发编程</h2><h3 id="在configure包中新建mybatisplus的配置类mybatisplusconfigureclass"><a class="markdownIt-Anchor" href="#在configure包中新建mybatisplus的配置类mybatisplusconfigureclass"></a> 在<code>configure</code>包中新建<code>MybatisPlus</code>的配置类<code>MybatisPlusConfigure.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> : MybatisPlus配置</span></span><br><span class="line"><span class="comment"> * ---------------------------------</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">PaginationInterceptor paginationInterceptor = <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line"><span class="comment">// 设置请求的页面大于最大页后操作， true调回到首页，false 继续请求  默认false</span></span><br><span class="line"><span class="comment">// paginationInterceptor.setOverflow(false);</span></span><br><span class="line"><span class="comment">// 设置最大单页限制数量，默认 500 条，-1 不受限制</span></span><br><span class="line"><span class="comment">// paginationInterceptor.setLimit(500);</span></span><br><span class="line"><span class="keyword">return</span> paginationInterceptor;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在configure包中新建swagger2的配置类swagger2configureclass"><a class="markdownIt-Anchor" href="#在configure包中新建swagger2的配置类swagger2configureclass"></a> 在<code>configure</code>包中新建<code>Swagger2</code>的配置类<code>Swagger2Configure.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2Configure</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过 createRestApi函数来构建一个DocketBean</span></span><br><span class="line"><span class="comment"> * 函数名,可以随意命名,喜欢什么命名就什么命名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Docket( DocumentationType.SWAGGER_2 )</span><br><span class="line">.apiInfo( apiInfo() )<span class="comment">//调用apiInfo方法,创建一个ApiInfo实例,里面是展示在文档页面信息内容</span></span><br><span class="line">.select()</span><br><span class="line"><span class="comment">//控制暴露出去的路径下的实例</span></span><br><span class="line"><span class="comment">//如果某个接口不想暴露,可以使用以下注解</span></span><br><span class="line"><span class="comment">//@ApiIgnore 这样,该接口就不会暴露在 swagger2 的页面下</span></span><br><span class="line">.apis( RequestHandlerSelectors.basePackage( <span class="string">"com.hanwang.restful01.controller"</span> ) )</span><br><span class="line">.paths( PathSelectors.any() )</span><br><span class="line">.build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构建 api文档的详细信息函数</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line"><span class="comment">//页面标题</span></span><br><span class="line">.title( <span class="string">"云南汉王科技 Spring Boot Swagger2 构建RESTful API"</span> )</span><br><span class="line"><span class="comment">//条款地址</span></span><br><span class="line">.termsOfServiceUrl( <span class="string">"http://gadflybsd.github.io/"</span> )</span><br><span class="line">.contact( <span class="string">"GadflyBSD"</span> )</span><br><span class="line">.version( <span class="string">"1.0"</span> )</span><br><span class="line"><span class="comment">//描述</span></span><br><span class="line">.description( <span class="string">"云南汉王科技Java8 SpringBoot框架开发培训"</span> )</span><br><span class="line">.build();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在entity包中新建数据库表user的实体类userclass"><a class="markdownIt-Anchor" href="#在entity包中新建数据库表user的实体类userclass"></a> 在<code>entity</code>包中新建数据库表<code>user</code>的实体类<code>User.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.activerecord.Model;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Handler.JSONTypePG;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Handler.ByteToByteaTypePG;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Handler.UUIDTypePG;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 用户信息表 实体类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gadfly</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019-12-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(callSuper = <span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@Accessors</span>(chain = <span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@ApiModel</span>(value = <span class="string">"User对象"</span>, description = <span class="string">"用户信息表"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID=<span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"记录主键（系统自动生成ID）"</span>)</span><br><span class="line"><span class="meta">@TableId</span>(value = <span class="string">"id"</span>, type = IdType.AUTO)</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"真实姓名"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"realname"</span>)</span><br><span class="line"><span class="keyword">private</span> String realname;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"联系电话"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"mobile"</span>)</span><br><span class="line"><span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"电子邮件"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"email"</span>)</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"用户公钥"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"public_key"</span>)</span><br><span class="line"><span class="keyword">private</span> String publicKey;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"用户私钥"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"private_key"</span>)</span><br><span class="line"><span class="keyword">private</span> String privateKey;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"创建时间"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"insert_time"</span>)</span><br><span class="line"><span class="keyword">private</span> LocalDateTime insertTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"变更时间"</span>)</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"modify_time"</span>)</span><br><span class="line"><span class="keyword">private</span> LocalDateTime modifyTime;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ID =<span class="string">"id"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String REALNAME =<span class="string">"realname"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String MOBILE =<span class="string">"mobile"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EMAIL =<span class="string">"email"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PUBLIC_KEY =<span class="string">"public_key"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PRIVATE_KEY =<span class="string">"private_key"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String INSERT_TIME =<span class="string">"insert_time"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String MODIFY_TIME =<span class="string">"modify_time"</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Serializable <span class="title">pkVal</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在mapper包中新建数据库表user的数据库映射接口usermapperclass"><a class="markdownIt-Anchor" href="#在mapper包中新建数据库表user的数据库映射接口usermapperclass"></a> 在<code>mapper</code>包中新建数据库表<code>user</code>的数据库映射接口<code>UserMapper.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.hanwang.restful01.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 用户信息表 Mapper 接口</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gadfly</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019-12-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在mapperxml包中新建数据库表user的实体类usermapperxml"><a class="markdownIt-Anchor" href="#在mapperxml包中新建数据库表user的实体类usermapperxml"></a> 在<code>mapper.xml</code>包中新建数据库表<code>user</code>的实体类<code>UserMapper.xml</code></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.hanwang.restful01.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 开启二级缓存 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">"org.mybatis.caches.ehcache.LoggingEhcache"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 通用查询映射结果 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.hanwang.restful01.entity.User"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"realname"</span> <span class="attr">property</span>=<span class="string">"realname"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"mobile"</span> <span class="attr">property</span>=<span class="string">"mobile"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"email"</span> <span class="attr">property</span>=<span class="string">"email"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"public_key"</span> <span class="attr">property</span>=<span class="string">"publicKey"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"private_key"</span> <span class="attr">property</span>=<span class="string">"privateKey"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"insert_time"</span> <span class="attr">property</span>=<span class="string">"insertTime"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"modify_time"</span> <span class="attr">property</span>=<span class="string">"modifyTime"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 通用查询结果列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Base_Column_List"</span>&gt;</span></span><br><span class="line">                id, realname, mobile, email, public_key, private_key, insert_time, modify_time</span><br><span class="line">        <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在service包中新建服务接口userserviceclass"><a class="markdownIt-Anchor" href="#在service包中新建服务接口userserviceclass"></a> 在<code>service</code>包中新建服务接口<code>UserService.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.Wrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 用户信息表 服务类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gadfly</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019-12-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  分页数据查询</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">IPage&lt;User&gt; <span class="title">selectPage</span><span class="params">(IPage&lt;User&gt; page, User param)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过查询构造器获取数据列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">selectList</span><span class="params">(User param)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过ID获取数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">User <span class="title">getById</span><span class="params">(String id)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过ID删除数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Boolean <span class="title">removeById</span><span class="params">(String id)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过ID更新数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">User <span class="title">saveById</span><span class="params">(User param)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加新的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">User <span class="title">add</span><span class="params">(User param)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在serviceimpl包中新建服务接口的实现类userserviceimplclass"><a class="markdownIt-Anchor" href="#在serviceimpl包中新建服务接口的实现类userserviceimplclass"></a> 在<code>service.impl</code>包中新建服务接口的实现类<code>UserServiceImpl.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 用户信息表 服务实现类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gadfly</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019-12-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>, <span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> IPage&lt;User&gt; <span class="title">selectPage</span><span class="params">(IPage&lt;User&gt; page, User user)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> userMapper.selectPage(page, getEntityWrapper(user));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">selectList</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> userMapper.selectList(getEntityWrapper(user));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getById</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> userMapper.selectById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">saveById</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">userMapper.updateById(user);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">add</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">userMapper.insert(user);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">removeById</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> (userMapper.deleteById(id) &gt; <span class="number">0</span>) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  公共查询条件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> QueryWrapper&lt;User&gt; <span class="title">getEntityWrapper</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">QueryWrapper wrapper = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line"><span class="comment">//条件拼接</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getRealname().toString()))&#123;</span><br><span class="line">wrapper.like(User.REALNAME, user.getRealname().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getMobile().toString()))&#123;</span><br><span class="line">wrapper.like(User.MOBILE, user.getMobile().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getEmail().toString()))&#123;</span><br><span class="line">wrapper.like(User.EMAIL, user.getEmail().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getPublicKey().toString()))&#123;</span><br><span class="line">wrapper.like(User.PUBLIC_KEY, user.getPublicKey().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getPrivateKey().toString()))&#123;</span><br><span class="line">wrapper.like(User.PRIVATE_KEY, user.getPrivateKey().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getInsertTime().toString()))&#123;</span><br><span class="line">wrapper.like(User.INSERT_TIME, user.getInsertTime().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(user.getModifyTime().toString()))&#123;</span><br><span class="line">wrapper.like(User.MODIFY_TIME, user.getModifyTime().toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> wrapper;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在controller包中新建控制器类usercontrollerclass"><a class="markdownIt-Anchor" href="#在controller包中新建控制器类usercontrollerclass"></a> 在<code>controller</code>包中新建控制器类<code>UserController.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.*;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.hanwang.restful01.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Utils.ResponseHandler;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Utils.StringUtils;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalTime;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   <span class="doctag">@description</span> : 用户信息表 控制器 AUTO</span></span><br><span class="line"><span class="comment"> *   <span class="doctag">@author</span> gadfly</span></span><br><span class="line"><span class="comment"> *   <span class="doctag">@since</span> 2019-12-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"用户信息表 接口"</span>, description = <span class="string">"关于 用户信息表 的API接口"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger=LoggerFactory.getLogger(UserController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 用户信息表 获取分页列表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"用户信息表 获取分页列表"</span>, notes = <span class="string">""</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/getUserPage"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="meta">@ApiImplicitParams</span>(&#123;</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(dataType = <span class="string">"int"</span>, name = <span class="string">"pageNo"</span>, value = <span class="string">"起始页"</span>, example = <span class="string">"1"</span>, required = <span class="keyword">true</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(dataType = <span class="string">"int"</span>, name = <span class="string">"pageSize"</span>, value = <span class="string">"每页记录数"</span>, example = <span class="string">"20"</span>, required = <span class="keyword">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">getUserPage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestParam <span class="keyword">int</span> pageNo,</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestParam <span class="keyword">int</span> pageSize,</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestBody @ApiParam(name=<span class="string">"用户信息表 对象"</span>,value=<span class="string">"传入json格式"</span>)</span> User params)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Page&lt;User&gt; page = <span class="keyword">new</span> Page(pageNo, pageSize);</span><br><span class="line">            IPage&lt;User&gt; pageList = userService.selectPage(page, params);</span><br><span class="line">            <span class="keyword">return</span> ResponseHandler.resultList(pageList.getRecords(), page, <span class="string">"成功获取 用户信息表 获取分页列表"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 用户信息表 获取列表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"用户信息表 获取列表"</span>, notes = <span class="string">""</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/getUserSelect"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">getUserSelect</span><span class="params">(@RequestBody @ApiParam(name=<span class="string">"用户信息表 对象"</span>,value=<span class="string">"传入json格式"</span>)</span> User params)</span>&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    List&lt;User&gt; selectList = userService.selectList(params);</span><br><span class="line">    <span class="keyword">return</span> ResponseHandler.resultBody(selectList, <span class="string">"成功获取 用户信息表 获取分页列表"</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">    logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">    <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 通过id获取用户信息表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"通过id获取用户信息表"</span>, notes = <span class="string">""</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/getUserById"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="meta">@ApiImplicitParam</span>(dataType=<span class="string">"int"</span>, name = <span class="string">"id"</span>, value = <span class="string">"用户ID"</span>, example = <span class="string">"1"</span>, required = <span class="keyword">true</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">getUserById</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestParam Integer id</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            User param= userService.getById(id);</span><br><span class="line">            <span class="keyword">return</span> ResponseHandler.resultBody(param, <span class="string">"成功通过id获取用户信息表"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 通过id删除用户信息表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"通过id删除用户信息表"</span>, notes = <span class="string">""</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/deleteUserById"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="meta">@ApiImplicitParam</span>(dataType=<span class="string">"int"</span>, name = <span class="string">"id"</span>, value = <span class="string">"用户ID"</span>, example = <span class="string">"1"</span>, required = <span class="keyword">true</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">deleteUserById</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestParam Integer id</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseHandler.resultBody(id, <span class="string">"成功通过id删除用户信息表"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> : 通过id更新UserList</span></span><br><span class="line"><span class="comment"> * ---------------------------------</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : Create in 2019-12-16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"通过id更新用户信息表"</span>, notes = <span class="string">"Beta 测试"</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/updateUserById"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="meta">@ApiImplicitParams</span>(&#123;</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"记录主键（系统自动生成ID）"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"realname"</span>, value = <span class="string">"真实姓名"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"mobile"</span>, value = <span class="string">"联系电话"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"email"</span>, value = <span class="string">"电子邮件"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"public_key"</span>, value = <span class="string">"用户公钥"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"private_key"</span>, value = <span class="string">"用户私钥"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"insert_time"</span>, value = <span class="string">"创建时间"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">        <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"modify_time"</span>, value = <span class="string">"变更时间"</span>, defaultValue = <span class="string">""</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">updateUserListById</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        String id,</span></span></span><br><span class="line"><span class="function"><span class="params">        String realname,</span></span></span><br><span class="line"><span class="function"><span class="params">        String mobile,</span></span></span><br><span class="line"><span class="function"><span class="params">        String email,</span></span></span><br><span class="line"><span class="function"><span class="params">        String public_key,</span></span></span><br><span class="line"><span class="function"><span class="params">        String private_key,</span></span></span><br><span class="line"><span class="function"><span class="params">        String insert_time,</span></span></span><br><span class="line"><span class="function"><span class="params">        String modify_time</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">User params = <span class="keyword">new</span> User();</span><br><span class="line">            params.setId(StringUtils.typeCase(Integer<span class="class">.<span class="keyword">class</span>, <span class="title">id</span>))</span>;</span><br><span class="line">            params.setRealname(realname);</span><br><span class="line">            params.setMobile(mobile);</span><br><span class="line">            params.setEmail(email);</span><br><span class="line">            params.setPublicKey(public_key);</span><br><span class="line">            params.setPrivateKey(private_key);</span><br><span class="line">            params.setInsertTime(StringUtils.typeCase(LocalDateTime<span class="class">.<span class="keyword">class</span>, <span class="title">insert_time</span>))</span>;</span><br><span class="line">            params.setModifyTime(StringUtils.typeCase(LocalDateTime<span class="class">.<span class="keyword">class</span>, <span class="title">modify_time</span>))</span>;</span><br><span class="line"><span class="keyword">return</span> ResponseHandler.resultBody(userService.saveById(params), <span class="string">"成功通过id更新用户信息表"</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line"><span class="keyword">return</span> ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 通过id更新用户信息表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"通过id更新用户信息表数据"</span>, notes = <span class="string">""</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/updateUserByIdUseJson"</span>, method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">updateUserById</span><span class="params">(@RequestBody @ApiParam(name=<span class="string">"用户信息表 对象"</span>,value=<span class="string">"传入json格式"</span>,required=<span class="keyword">true</span>)</span> User params)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseHandler.resultBody(userService.saveById(params), <span class="string">"成功通过id更新用户信息表"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 添加用户信息表</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"添加用户信息表数据"</span>, notes = <span class="string">"Beta 测试"</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/addUser"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="meta">@ApiImplicitParams</span>(&#123;</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"realname"</span>, value = <span class="string">"真实姓名"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"mobile"</span>, value = <span class="string">"联系电话"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"email"</span>, value = <span class="string">"电子邮件"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"public_key"</span>, value = <span class="string">"用户公钥"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"private_key"</span>, value = <span class="string">"用户私钥"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"insert_time"</span>, value = <span class="string">"创建时间"</span>, defaultValue = <span class="string">""</span>),</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"modify_time"</span>, value = <span class="string">"变更时间"</span>, defaultValue = <span class="string">""</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">addUser</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    String realname,</span></span></span><br><span class="line"><span class="function"><span class="params">    String mobile,</span></span></span><br><span class="line"><span class="function"><span class="params">    String email,</span></span></span><br><span class="line"><span class="function"><span class="params">    String public_key,</span></span></span><br><span class="line"><span class="function"><span class="params">    String private_key,</span></span></span><br><span class="line"><span class="function"><span class="params">    String insert_time,</span></span></span><br><span class="line"><span class="function"><span class="params">    String modify_time</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            User params = <span class="keyword">new</span> User();</span><br><span class="line">    params.setRealname(realname);</span><br><span class="line">    params.setMobile(mobile);</span><br><span class="line">    params.setEmail(email);</span><br><span class="line">    params.setPublicKey(public_key);</span><br><span class="line">    params.setPrivateKey(private_key);</span><br><span class="line">    params.setInsertTime(StringUtils.typeCase(LocalDateTime<span class="class">.<span class="keyword">class</span>, <span class="title">insert_time</span>))</span>;</span><br><span class="line">    params.setModifyTime(StringUtils.typeCase(LocalDateTime<span class="class">.<span class="keyword">class</span>, <span class="title">modify_time</span>))</span>;</span><br><span class="line">            <span class="keyword">return</span> ResponseHandler.resultBody(userService.add(params), <span class="string">"成功添加用户信息表"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>  ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> : 传入JSON格式数据添加用户信息表数据</span></span><br><span class="line"><span class="comment">     * ---------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> : gadfly</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> : Create in 2019-12-16</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"添加用户信息表数据（传入JSON格式数据）"</span>, notes = <span class="string">""</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/addUserUseJson"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseHandler&lt;User&gt; <span class="title">addUserList</span><span class="params">(@RequestBody @ApiParam(name=<span class="string">"用户信息表 对象"</span>,value=<span class="string">"传入json格式"</span>,required=<span class="keyword">true</span>)</span> User params)</span>&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">return</span>  ResponseHandler.resultBody(userService.add(params), <span class="string">"成功添加用户信息表"</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">logger.warn(<span class="string">"异常信息:&#123;&#125;"</span> + e.getMessage());</span><br><span class="line"><span class="keyword">return</span> ResponseHandler.resultError(<span class="string">"异常信息:&#123;"</span>+e.getClass().getName()+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四-测试运行"><a class="markdownIt-Anchor" href="#四-测试运行"></a> 四、测试运行</h2><h3 id="在模块入口文件打开swagger2"><a class="markdownIt-Anchor" href="#在模块入口文件打开swagger2"></a> 在模块入口文件打开<code>swagger2</code></h3><blockquote><p><strong><code>@EnableSwagger2</code></strong></p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Restful01Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run( Restful01Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span> )</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="运行"><a class="markdownIt-Anchor" href="#运行"></a> 运行</h3><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%884.21.19.png" class="lazyload"></p><h3 id="浏览器测试"><a class="markdownIt-Anchor" href="#浏览器测试"></a> 浏览器测试</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://localhost:8088/api/swagger-ui.html</span><br></pre></td></tr></table></figure><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%884.27.19.png" class="lazyload"></p><h2 id="五-换种姿势开发"><a class="markdownIt-Anchor" href="#五-换种姿势开发"></a> 五、换种姿势开发</h2><blockquote><p><em>正确的开发方式：使用<code>Mybaits Plus</code>代码生成器进行开发</em></p></blockquote><ul><li><h3 id="删除刚刚创建的entity-service-mapper-controller包及里面的所有内容"><a class="markdownIt-Anchor" href="#删除刚刚创建的entity-service-mapper-controller包及里面的所有内容"></a> 删除刚刚创建的<code>entity</code>、<code>service</code>、<code>mapper</code>、<code>controller</code>包，及里面的所有内容</h3></li><li><h3 id="修改模块入口文件restful01applicationclass"><a class="markdownIt-Anchor" href="#修改模块入口文件restful01applicationclass"></a> 修改模块入口文件<code>Restful01Application.class</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Utils.MybatisPlus;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Restful01Application</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    SpringApplication.run( Restful01Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span> )</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    MybatisPlus.generator(Restful01Application<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="运行模块-停止运行"><a class="markdownIt-Anchor" href="#运行模块-停止运行"></a> 运行模块 --&gt; 停止运行</h3></li><li><h3 id="自动生成代码"><a class="markdownIt-Anchor" href="#自动生成代码"></a> 自动生成代码</h3><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%885.27.31.png" class="lazyload"></p></li><li><h3 id="注释掉代码生成器"><a class="markdownIt-Anchor" href="#注释掉代码生成器"></a> 注释掉代码生成器</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> pub.gadfly.sdk.Utils.MybatisPlus;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Restful01Application</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    SpringApplication.run( Restful01Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span> )</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="comment">//MybatisPlus.generator(Restful01Application.class);</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="六-打包分发"><a class="markdownIt-Anchor" href="#六-打包分发"></a> 六、打包分发</h2><ul><li><h3 id="重新引入第三方jar包"><a class="markdownIt-Anchor" href="#重新引入第三方jar包"></a> 重新引入第三方jar包</h3><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%885.34.16.png" class="lazyload"></p></li><li><h3 id="修改pomxml-指定marven的第三方包引入路径"><a class="markdownIt-Anchor" href="#修改pomxml-指定marven的第三方包引入路径"></a> 修改<code>pom.xml</code> 指定<code>Marven</code>的第三方包引入路径</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pub.gadfly<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;basedir&#125;/src/main/libs/sdk-1.0.5-SNAPSHOT.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h3 id="部署"><a class="markdownIt-Anchor" href="#部署"></a> 部署</h3><ul><li><p>Step 1：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%885.41.04.png" class="lazyload"></p></li><li><p>Step 2：<br><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%885.46.25.png" class="lazyload"></p></li></ul></li><li><h3 id="打包"><a class="markdownIt-Anchor" href="#打包"></a> 打包</h3><p><img alt data-src="http://static1.gadfly.pub/assets/images/%E6%88%AA%E5%B1%8F2019-12-20%E4%B8%8B%E5%8D%885.58.07.png" class="lazyload"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>处理悲伤和处理悲伤的曲线</title>
      <link href="/2019/12/19/sui-bi-za-tan/chu-li-bei-shang-he-chu-li-bei-shang-de-qu-xian/"/>
      <url>/2019/12/19/sui-bi-za-tan/chu-li-bei-shang-he-chu-li-bei-shang-de-qu-xian/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>唱引万变，曲用无方，和乐怡怿，悲伤摧藏。</p></blockquote><p><img alt data-src="http://static1.gadfly.pub/assets/images/PIC_20140315_114744_F36.jpg" class="lazyload"></p><p><img alt data-src="http://static1.gadfly.pub/assets/images/PIC_20140315_114751_FEE.jpg" class="lazyload"></p>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 心理学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Kafka安全认证：SSL加密和认证</title>
      <link href="/2019/12/19/cao-zuo-xi-tong/kafka-an-quan-ren-zheng-ssl-jia-mi-he-ren-zheng/"/>
      <url>/2019/12/19/cao-zuo-xi-tong/kafka-an-quan-ren-zheng-ssl-jia-mi-he-ren-zheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>Apache kafka 允许clinet通过SSL连接，SSL默认是不可用的，需手动开启</p></blockquote><h1 id="为每个kafka-broker生成ssl密钥和证书"><a class="markdownIt-Anchor" href="#为每个kafka-broker生成ssl密钥和证书"></a> 为每个Kafka broker生成SSL密钥和证书。</h1><blockquote><p>部署HTTPS，第一步是为集群的每台机器生成密钥和证书，可以使用java的keytool来生产。我们将生成密钥到一个临时的密钥库，之后我们可以导出并用CA签名它。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore &#123;keystore&#125; -alias localhost -validity &#123;validity&#125; -genkey</span><br></pre></td></tr></table></figure><blockquote><p>你需要用上面命令来指定两个参数：</p><ul><li>keystore: 密钥仓库存储证书文件。密钥仓库文件包含证书的私钥（保证私钥的安全）。</li><li>validity: 证书的有效时间，天</li></ul></blockquote><h2 id="配置主机名验证"><a class="markdownIt-Anchor" href="#配置主机名验证"></a> 配置主机名验证</h2><ul><li>从<code>Kafka 2.0.0</code>版开始，默认情况下客户端连接以及broker之间的连接启用了服务器的主机名验证，为防止中间人攻击。 可以通过将<code>ssl.endpoint.identification.algorithm</code>设置为空字符串来关闭服务器主机名验证。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssl.endpoint.identification.algorithm=</span><br></pre></td></tr></table></figure></li><li>对于动态配置的<code>broker</code>侦听，可以使用<code>kafka-configs.sh</code>禁用主机名验证。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bin/kafka-configs.sh --bootstrap-server localhost:9093 --entity-type brokers --entity-name 0 --alter --add-config "listener.name.internal.ssl.endpoint.identification.algorithm="</span><br></pre></td></tr></table></figure></li><li>对于老版本的<code>Kafka</code>，默认情况下未定义<code>ssl.endpoint.identification.algorithm</code>，因此不会执行主机名验证。 通过设置为<code>HTTPS</code>以启用主机名验证。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssl.endpoint.identification.algorithm=HTTPS</span><br></pre></td></tr></table></figure></li><li>如果服务器端没有进行外部验证，则必须启用主机名验证，以防止中间人攻击。</li></ul><h2 id="在证书中配置主机名"><a class="markdownIt-Anchor" href="#在证书中配置主机名"></a> 在证书中配置主机名</h2><blockquote><p>如果启用了主机名验证，客户端将根据以下两个字段之一验证服务器的完全限定域名（FQDN）</p><ol><li>Common Name (CN)</li><li>Subject Alternative Name (SAN)</li></ol></blockquote><blockquote><p>这两个字段均有效，但是RFC-2818建议使用SAN。SAN更加的灵活，允许声明多个DNS条目。另一个优点是，出于授权目的，可以将CN设置为更有意义的值。 要添加SAN，需将以下参数-ext SAN=DNS:{FQDN}追加到keytool命令：</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore server.keystore.jks -alias localhost -validity &#123;validity&#125; -genkey -keyalg RSA -ext SAN=DNS:&#123;FQDN&#125;</span><br></pre></td></tr></table></figure><blockquote><p>然后可以运行以下命令来验证生成的证书的内容：</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -list -v -keystore server.keystore.jks</span><br></pre></td></tr></table></figure><h1 id="创建自己的ca"><a class="markdownIt-Anchor" href="#创建自己的ca"></a> 创建自己的CA</h1><blockquote><p>通过第一步，集群中的每台机器都生成一对公私钥，和一个证书来识别机器。但是，证书是未签名的，这意味着攻击者可以创建一个这样的证书来伪装成任何机器。</p></blockquote><blockquote><p>因此，通过对集群中的每台机器进行签名来防止伪造的证书。证书颁发机构（CA）负责签名证书。CA的工作机制像一个颁发护照的政府。政府印章（标志）每本护照，这样护照很难伪造。其他政府核实护照的印章，以确保护照是真实的。同样，CA签名的证书和加密保证签名证书很难伪造。因此，只要CA是一个真正和值得信赖的权威，client就能有较高的保障连接的是真正的机器。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl req -new -x509 -keyout ca-key -out ca-cert -days 365</span><br></pre></td></tr></table></figure><blockquote><p>生成的CA是一个简单的公私钥对和证书，用于签名其他的证书。</p></blockquote><blockquote><p>下一步是将生成的CA添加到<strong>clients’ truststore（客户的信任库）</strong>，以便client可以信任这个CA:</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert</span><br></pre></td></tr></table></figure><blockquote><p>注意，还需设置ssl.client.auth(”requested&quot; 或 &quot;required”)，来要求broker对客户端连接进行验证，当然，你必须为broker提供信任库以及所有客户端签名了密钥的CA证书，通过下面的命令：</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert</span><br></pre></td></tr></table></figure><blockquote><p>相反，在步骤1中，密钥库存储了每个机器自己的身份。客户端的信任库存储所有客户端信任的证书，将证书导入到一个信任仓库也意味着信任由该证书签名的所有证书，正如上面的比喻，信任政府（CA）也意味着信任它颁发的所有护照（证书），此特性称为信任链，在大型的kafka集群上部署SSL时特别有用的。可以用单个CA签名集群中的所有证书，并且所有的机器共享相同的信任仓库，这样所有的机器也可以验证其他的机器了。</p></blockquote><h1 id="签名证书"><a class="markdownIt-Anchor" href="#签名证书"></a> 签名证书</h1><blockquote><p>用步骤2生成的CA来签名所有步骤1生成的证书，首先，你需要从密钥仓库导出证书</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore server.keystore.jks -alias localhost -certreq -file cert-file</span><br></pre></td></tr></table></figure><blockquote><p>然后用CA签名：</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl x509 -req -CA ca-cert -CAkey ca-key -in cert-file -out cert-signed -days &#123;validity&#125; -CAcreateserial -passin pass:&#123;ca-password&#125;</span><br></pre></td></tr></table></figure><blockquote><p>最后,你需要导入CA的证书和已签名的证书到密钥仓库:</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -keystore server.keystore.jks -alias CARoot -import -file ca-cert</span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -import -file cert-signed</span><br></pre></td></tr></table></figure><blockquote><p>参数的定义如下：</p><ul><li>keystore: 密钥仓库的位置</li><li>ca-cert: CA的证书</li><li>ca-key: CA的私钥</li><li>ca-password: CA的密码</li><li>cert-file: 出口，服务器的未签名证书</li><li>cert-signed: 已签名的服务器证书</li></ul></blockquote><blockquote><p>这是上面所有步骤的一个bash脚本例子。注意，这里假设密码“test1234”。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Step 1</span></span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -validity 365 -genkey</span><br><span class="line"><span class="meta">#</span><span class="bash">Step 2</span></span><br><span class="line">openssl req -new -x509 -keyout ca-key -out ca-cert -days 365</span><br><span class="line">keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert</span><br><span class="line">keytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert</span><br><span class="line"><span class="meta">#</span><span class="bash">Step 3</span></span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -certreq -file cert-file</span><br><span class="line">openssl x509 -req -CA ca-cert -CAkey ca-key -in cert-file -out cert-signed -days 365 -CAcreateserial -passin pass:test1234</span><br><span class="line">keytool -keystore server.keystore.jks -alias CARoot -import -file ca-cert</span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -import -file cert-signed</span><br></pre></td></tr></table></figure><h1 id="配置kafka-broker"><a class="markdownIt-Anchor" href="#配置kafka-broker"></a> 配置Kafka Broker</h1><ul><li><h2 id="kafka-broker支持监听多个端口上的连接通过serverproperteis-配置最少监听1个端口用逗号分隔"><a class="markdownIt-Anchor" href="#kafka-broker支持监听多个端口上的连接通过serverproperteis-配置最少监听1个端口用逗号分隔"></a> Kafka Broker支持监听多个端口上的连接，通过server.properteis 配置，最少监听1个端口，用逗号分隔。</h2></li><li><h2 id="如果broker之间通讯未启用ssl参照下面启动它plaintext和ssl端口是必须要配置"><a class="markdownIt-Anchor" href="#如果broker之间通讯未启用ssl参照下面启动它plaintext和ssl端口是必须要配置"></a> 如果broker之间通讯未启用SSL（参照下面，启动它），PLAINTEXT和SSL端口是必须要配置。</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">listeners=PLAINTEXT://host.name:port,SSL://host.name:port</span><br></pre></td></tr></table></figure></li><li><h2 id="下面是broker端需要的ssl配置"><a class="markdownIt-Anchor" href="#下面是broker端需要的ssl配置"></a> 下面是broker端需要的SSL配置</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssl.keystore.location=/var/private/ssl/server.keystore.jks</span><br><span class="line">ssl.keystore.password=test1234</span><br><span class="line">ssl.key.password=test1234</span><br><span class="line">ssl.truststore.location=/var/private/ssl/server.truststore.jks</span><br><span class="line">ssl.truststore.password=test1234</span><br></pre></td></tr></table></figure><blockquote><p>注意：ssl.truststore.password在是可选的，但强烈建议使用。如果未设置密码，则仍然可以访问信任库，但就不是完整性的检查了。</p></blockquote></li><li><h2 id="其他还有一些的可选的配置"><a class="markdownIt-Anchor" href="#其他还有一些的可选的配置"></a> 其他还有一些的可选的配置：</h2><ul><li>ssl.client.auth = none (“required”=&gt;客户端身份验证是必需的，“requested”=&gt;客户端身份验证请求，客户端没有证书仍然可以连接。使用“requested”是纸老虎，因为它提供了一种虚假的安全感，错误的配置客户端仍将连接成功。)</li><li>ssl.cipher.suites（可选）。密码套件是利用TLS或SSL网络协议的网络连接的安全设置。是认证，加密，MAC和密钥交换算法的组合。 （默认值是一个空表）</li><li>ssl.enabled.protocols = TLSv1.2 TLSv1.1 TLSv1 (接收来自客户端列出的SSL协议，注意，不推荐在生产中使用SSL，推荐使用TLS)。</li><li>ssl.keystore.type=JKS</li><li>ssl.truststore.type=JKS</li><li>ssl.secure.random.implementation=SHA1PRNG</li></ul></li><li><h2 id="如果你想启用ssl用于broker内部通讯将以下内容添加到broker配置文件默认是plaintext"><a class="markdownIt-Anchor" href="#如果你想启用ssl用于broker内部通讯将以下内容添加到broker配置文件默认是plaintext"></a> 如果你想启用SSL用于broker内部通讯，将以下内容添加到broker配置文件（默认是PLAINTEXT）</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">security.inter.broker.protocol=SSL</span><br></pre></td></tr></table></figure></li><li><h2 id="由于一些国家的进口规定oracle的实现限制了默认的加密算法的强度-如果需要更强的算法例如aes-256位密钥该jce-unlimited-strength-jurisdiction-policy-files必须获得并安装jdk和jre"><a class="markdownIt-Anchor" href="#由于一些国家的进口规定oracle的实现限制了默认的加密算法的强度-如果需要更强的算法例如aes-256位密钥该jce-unlimited-strength-jurisdiction-policy-files必须获得并安装jdk和jre"></a> 由于一些国家的进口规定，oracle的实现限制了默认的加密算法的强度。如果需要更强的算法（例如AES 256位密钥），该JCE Unlimited Strength Jurisdiction Policy Files必须获得并安装JDK和JRE。</h2></li><li><h2 id="rejdk有一个默认伪随机数生成者prng用于加密操作-因此不需要用sslsecurerandomimplementation实现"><a class="markdownIt-Anchor" href="#rejdk有一个默认伪随机数生成者prng用于加密操作-因此不需要用sslsecurerandomimplementation实现"></a> RE/JDK有一个默认伪随机数生成者（PRNG）,用于加密操作。因此，不需要用<code>ssl.secure.random.implementation</code>实现。</h2></li><li><h2 id="然而有些实现存在性能问题尤其是在linux系统选择的默认值nativeprng使用全局锁-在ssl连接的性能出现问题的情况下请考虑明确设置要使用的实现-如sha1prng实现是非阻塞的并且在高负载50mb秒的生成消息以及每个代理的复制流量下显示出非常好的性能特征"><a class="markdownIt-Anchor" href="#然而有些实现存在性能问题尤其是在linux系统选择的默认值nativeprng使用全局锁-在ssl连接的性能出现问题的情况下请考虑明确设置要使用的实现-如sha1prng实现是非阻塞的并且在高负载50mb秒的生成消息以及每个代理的复制流量下显示出非常好的性能特征"></a> 然而，有些实现存在性能问题（尤其是在Linux系统选择的默认值<code>NativePRNG</code>，使用全局锁）。 在SSL连接的性能出现问题的情况下，请考虑明确设置要使用的实现。 如<code>SHA1PRNG</code>实现是非阻塞的，并且在高负载（50MB/秒的生成消息，以及每个代理的复制流量）下显示出非常好的性能特征。</h2></li><li><h2 id="一旦你启动broker你应该就能在serverlog看到"><a class="markdownIt-Anchor" href="#一旦你启动broker你应该就能在serverlog看到"></a> 一旦你启动broker，你应该就能在server.log看到</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">with addresses: PLAINTEXT -&gt; EndPoint(192.168.64.1,9092,PLAINTEXT),SSL -&gt; EndPoint(192.168.64.1,9093,SSL)</span><br></pre></td></tr></table></figure></li><li><h2 id="用以下命令快速验证服务器的keystore和truststore设置是否正确"><a class="markdownIt-Anchor" href="#用以下命令快速验证服务器的keystore和truststore设置是否正确"></a> 用以下命令，快速验证服务器的keystore和truststore设置是否正确：</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl s_client -debug -connect localhost:9093 -tls1</span><br></pre></td></tr></table></figure><blockquote><p>在命令的输出中，你应该能看到服务器的证书:</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">&#123;variable sized random bytes&#125;</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">subject=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=Sriharsha Chintalapani</span><br><span class="line">issuer=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=kafka/emailAddress=test@test.com</span><br></pre></td></tr></table></figure><blockquote><p>如果证书没有出现或者有任何其他错误信息，那么你的keystore设置不正确。</p></blockquote></li></ul><h1 id="配置kafka客户端"><a class="markdownIt-Anchor" href="#配置kafka客户端"></a> 配置Kafka客户端</h1><h2 id="ssl仅支持新的producer和consumer不支持老的apiproducer和consumer的ssl的配置是相同的"><a class="markdownIt-Anchor" href="#ssl仅支持新的producer和consumer不支持老的apiproducer和consumer的ssl的配置是相同的"></a> SSL仅支持新的Producer和Consumer，不支持老的API，Producer和Consumer的SSL的配置是相同的。</h2><h2 id="如果broker中不需要client客户端验证"><a class="markdownIt-Anchor" href="#如果broker中不需要client客户端验证"></a> 如果broker中不需要client（客户端）验证</h2><blockquote><p>下面是最小的配置示例：</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">security.protocol=SSL</span><br><span class="line">ssl.truststore.location=/var/private/ssl/client.truststore.jks</span><br><span class="line">ssl.truststore.password=test1234</span><br></pre></td></tr></table></figure><blockquote><p>注意：ssl.truststore.password在技术上是可选的，但强烈推荐。 如果未设置密码，对信任库的访问仍然可用，就不属于完整性检查。 如果需要客户端认证，则必须像步骤1一样创建密钥库，并且还必须配置以下内容：</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssl.keystore.location=/var/private/ssl/client.keystore.jks</span><br><span class="line">ssl.keystore.password=test1234</span><br><span class="line">ssl.key.password=test1234</span><br></pre></td></tr></table></figure><h2 id="也可以根据我的需求在broker上设置其他的配置"><a class="markdownIt-Anchor" href="#也可以根据我的需求在broker上设置其他的配置"></a> 也可以根据我的需求在broker上设置其他的配置：</h2><ul><li>ssl.provider (可选的). 用于SSL连接的安全提供程序名称，默认值是JVM的默认的安全提供程序。</li><li>ssl.cipher.suites (可选).密码套件是身份验证、 加密、 MAC 和密钥交换算法用于协商使用 TLS 或 SSL 网络协议的网络连接的安全设置的已命名的组合。</li><li>ssl.enabled.protocols=TLSv1.2，TLSv1.1，TLSv1。broker配置协议（至少一个）。</li><li>ssl.truststore.type=JKS</li><li>ssl.keystore.type=JKS</li></ul><blockquote><p>举个console-produce和console-consumer的例子:</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kafka-console-producer.sh --broker-list localhost:9093 --topic test --producer.config client-ssl.properties</span><br><span class="line">kafka-console-consumer.sh --bootstrap-server localhost:9093 --topic test --consumer.config client-ssl.properties</span><br></pre></td></tr></table></figure><h1 id="kafka实战ssl"><a class="markdownIt-Anchor" href="#kafka实战ssl"></a> kafka实战SSL</h1><h2 id="生成ca和信任库"><a class="markdownIt-Anchor" href="#生成ca和信任库"></a> 生成ca和信任库</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Step 1</span></span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -validity 365 -genkey</span><br><span class="line"><span class="meta">#</span><span class="bash">Step 2</span></span><br><span class="line">openssl req -new -x509 -keyout ca-key -out ca-cert -days 365</span><br><span class="line">keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert</span><br><span class="line">keytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert</span><br><span class="line"><span class="meta">#</span><span class="bash">Step 3</span></span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -certreq -file cert-file</span><br><span class="line">openssl x509 -req -CA ca-cert -CAkey ca-key -in cert-file -out cert-signed -days 365 -CAcreateserial -passin pass:test1234</span><br><span class="line">keytool -keystore server.keystore.jks -alias CARoot -import -file ca-cert</span><br><span class="line">keytool -keystore server.keystore.jks -alias localhost -import -file cert-signed</span><br></pre></td></tr></table></figure><h2 id="etckafkakafka_server_jaasconf"><a class="markdownIt-Anchor" href="#etckafkakafka_server_jaasconf"></a> /etc/kafka/kafka_server_jaas.conf</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">KafkaServer &#123; </span><br><span class="line">    org.apache.kafka.common.security.plain.PlainLoginModule required</span><br><span class="line">    username="admin"</span><br><span class="line">    password="admin-secret"</span><br><span class="line">    user_admin="admin-secret"</span><br><span class="line">    user_alice="alice-secret";</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="configserverproperties"><a class="markdownIt-Anchor" href="#configserverproperties"></a> config/server.properties</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">listeners=SSL://localhost:9093</span><br><span class="line">ssl.keystore.location=/var/private/ssl/server.keystore.jks</span><br><span class="line">ssl.keystore.password=test1234</span><br><span class="line">ssl.key.password=test1234</span><br><span class="line">ssl.truststore.location=/var/private/ssl/server.truststore.jks</span><br><span class="line">ssl.truststore.password=test1234</span><br><span class="line">security.inter.broker.protocol=SSL</span><br></pre></td></tr></table></figure><h2 id="启动kafka"><a class="markdownIt-Anchor" href="#启动kafka"></a> 启动kafka</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export KAFKA_OPTS='-Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf'</span><br><span class="line">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure><h2 id="client-sslproperties"><a class="markdownIt-Anchor" href="#client-sslproperties"></a> client-ssl.properties</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">security.protocol=SSL</span><br><span class="line">ssl.truststore.location=/var/private/ssl/client.truststore.jks</span><br><span class="line">ssl.truststore.password=test1234</span><br></pre></td></tr></table></figure><h2 id="消费者和生产者"><a class="markdownIt-Anchor" href="#消费者和生产者"></a> 消费者和生产者</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9093 --topic test --producer.config client-ssl.properties </span><br><span class="line"></span><br><span class="line">bin/kafka-console-consumer.sh --bootstrap-server localhost:9093 --topic test --consumer.config client-ssl.properties</span><br></pre></td></tr></table></figure><h2 id="kafka-设置开机启动"><a class="markdownIt-Anchor" href="#kafka-设置开机启动"></a> kafka 设置开机启动</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi /etc/rc.d/init.d/kafka-ssl</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 2345 10 90 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Kafka</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> File : Kafka-ssl</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description: Starts and stops the Kafka server <span class="keyword">for</span> SSL</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line">source /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line">SERVER_HOME=/usr/local/server</span><br><span class="line">KAFKA_HOME=$&#123;SERVER_HOME&#125;/kafka_2.12-2.3.1/bin</span><br><span class="line">LOG_PATH=$&#123;SERVER_HOME&#125;/log</span><br><span class="line">KAFKA_USER=root</span><br><span class="line">export JRE_HOME=/usr/java/jdk1.8.0_172/jre</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_172</span><br><span class="line">export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line">[ -e /etc/sysconfig/kafka ] &amp;&amp; . /etc/sysconfig/kafka</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> See how we were called.</span></span><br><span class="line">case "$1" in</span><br><span class="line"></span><br><span class="line">  start)</span><br><span class="line">    echo -n "Starting Kafka for SSL:"</span><br><span class="line">    export KAFKA_OPTS='-Djava.security.auth.login.config=$KAFKA_HOME/config/kafka_server_jaas.conf'</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER -c "nohup $KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties &gt; $LOG_PATH/server.out 2&gt; $LOG_PATH/server.err &amp;"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  stop)</span><br><span class="line">    echo -n "Stopping Kafka for SSL: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line">  hardstop)</span><br><span class="line">    echo -n "Stopping (hard) Kafka for SSL: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill -9"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  status)</span><br><span class="line">    c_pid=`ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print $2&#125;'`</span><br><span class="line">    if [ "$c_pid" = "" ] ; then</span><br><span class="line">      echo "Stopped"</span><br><span class="line">      exit 3</span><br><span class="line">    else</span><br><span class="line">      echo "Running $c_pid"</span><br><span class="line">      exit 0</span><br><span class="line">    fi</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  restart)</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  *)</span><br><span class="line">    echo "Usage: kafka-ssl &#123;start|stop|hardstop|status|restart&#125;"</span><br><span class="line">    exit 1</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">esac</span><br><span class="line">~$ chmod +x /etc/rc.d/init.d/kafka-ssl</span><br><span class="line">~$ chkconfig --add kafka-ssl</span><br><span class="line">~$ chkconfig kafka-ssl on</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
            <tag> 安全认证 </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafka安全认证：实战SASL/PLAIN认证</title>
      <link href="/2019/12/19/cao-zuo-xi-tong/kafka-an-quan-ren-zheng-shi-zhan-sasl-plain-ren-zheng/"/>
      <url>/2019/12/19/cao-zuo-xi-tong/kafka-an-quan-ren-zheng-shi-zhan-sasl-plain-ren-zheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="安全概述"><a class="markdownIt-Anchor" href="#安全概述"></a> 安全概述</h1><blockquote><p>Kafka目前支持以下的安全措施，可以组合使用也可以分开使用。</p></blockquote><ol><li><h2 id="broker使用ssl或saslkerberos验证客户端生产者或消费者-其他broker或工具的连接-支持以下的sasl机制"><a class="markdownIt-Anchor" href="#broker使用ssl或saslkerberos验证客户端生产者或消费者-其他broker或工具的连接-支持以下的sasl机制"></a> broker使用SSL或SASL(Kerberos)，验证客户端（生产者或消费者）、其他broker或工具的连接。支持以下的SASL机制：</h2><ul><li><h3 id="saslgssapi-kerberos-从0900版本开始"><a class="markdownIt-Anchor" href="#saslgssapi-kerberos-从0900版本开始"></a> SASL/GSSAPI (Kerberos) - 从0.9.0.0版本开始</h3></li><li><h3 id="saslplain-从01000版本开始"><a class="markdownIt-Anchor" href="#saslplain-从01000版本开始"></a> SASL/PLAIN - 从0.10.0.0版本开始</h3></li><li><h3 id="saslscram-sha-256-和-saslscram-sha-512-从01020版本开始"><a class="markdownIt-Anchor" href="#saslscram-sha-256-和-saslscram-sha-512-从01020版本开始"></a> SASL/SCRAM-SHA-256 和 SASL/SCRAM-SHA-512 - 从0.10.2.0版本开始</h3></li><li><h3 id="sasloauthbearer-从20版本开始"><a class="markdownIt-Anchor" href="#sasloauthbearer-从20版本开始"></a> SASL/OAUTHBEARER - 从2.0版本开始</h3></li></ul></li><li><h2 id="从broker连接到zookeeper的身份验证"><a class="markdownIt-Anchor" href="#从broker连接到zookeeper的身份验证"></a> 从broker连接到Zookeeper的身份验证。</h2></li><li><h2 id="broker和client之间的数据传输broker之间或使用ssl的broker和工具之间的数据加密注意当ssl时性能会降低其幅度取决于cpu类型和jvm"><a class="markdownIt-Anchor" href="#broker和client之间的数据传输broker之间或使用ssl的broker和工具之间的数据加密注意当ssl时性能会降低其幅度取决于cpu类型和jvm"></a> broker和client之间的数据传输，broker之间，或使用SSL的broker和工具之间的数据加密（注意，当SSL时，性能会降低，其幅度取决于CPU类型和JVM）。</h2></li><li><h2 id="client的readwrite操作验证"><a class="markdownIt-Anchor" href="#client的readwrite操作验证"></a> client的read/write操作验证。</h2></li><li><h2 id="验证是插拔的支持外部认证服务集成"><a class="markdownIt-Anchor" href="#验证是插拔的支持外部认证服务集成"></a> 验证是插拔的，支持外部认证服务集成。</h2></li></ol><blockquote><p>值得注意的是，安全是可选的。支持非安全集群，以及经过身份验证，未认证，加密和未加密客户端的组合。下面的指南将介绍如何配置和使用client和broker的安全特性。</p></blockquote><h1 id="kafka使用saslplain认证"><a class="markdownIt-Anchor" href="#kafka使用saslplain认证"></a> kafka使用SASL/PLAIN认证</h1><blockquote><p>SASL/PLAIN是一种简单的用户名/密码的认证机制，通常与TLS加密一起使用，以实现安全的认证。Kafka支持SASL/PLAIN的默认实现，可作为生产者的扩展使用。</p></blockquote><ol><li><h2 id="配置kafka-brokers"><a class="markdownIt-Anchor" href="#配置kafka-brokers"></a> 配置Kafka Brokers</h2><ul><li><h3 id="新建kafka_server_jaasconf"><a class="markdownIt-Anchor" href="#新建kafka_server_jaasconf"></a> 新建<code>kafka_server_jaas.conf</code>。</h3><blockquote><p>在每个<code>Kafka broker</code>的<code>config</code>目录下添加一个类似于下面的修改后的JAAS文件</p></blockquote> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi config/kafka_server_jaas.conf</span><br><span class="line">KafkaServer &#123; org.apache.kafka.common.security.plain.PlainLoginModule required</span><br><span class="line">  username="admin"</span><br><span class="line">  password="admin-secret"</span><br><span class="line">  user_admin="admin-secret"</span><br><span class="line">  user_alice="alice-secret";</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><blockquote><p>此配置定义了2个用户（admin 和 alice）。 在KafkaServer中，username和password是broker用于初始化连接到其他的broker，在这个例子中，admin是broker之间通信的用户。user_userName定义了连接到broker的所有用户的密码，broker使用这些来验证所有客户端的连接，包括来自其他的broker的连接。</p></blockquote></li><li><h3 id="在serverproperties中配置sasl端口和sasl机制"><a class="markdownIt-Anchor" href="#在serverproperties中配置sasl端口和sasl机制"></a> 在<code>server.properties</code>中配置SASL端口和SASL机制</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi server.properties</span><br><span class="line">listeners=SASL_SSL://host.name:port</span><br><span class="line">security.inter.broker.protocol=SASL_SSL</span><br><span class="line">sasl.mechanism.inter.broker.protocol=PLAIN</span><br><span class="line">sasl.enabled.mechanisms=PLAIN</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="配置kafka客户端"><a class="markdownIt-Anchor" href="#配置kafka客户端"></a> 配置kafka客户端</h2><ul><li><h3 id="为producerproperties或consumerproperties中的每个客户端配置jaas"><a class="markdownIt-Anchor" href="#为producerproperties或consumerproperties中的每个客户端配置jaas"></a> 为producer.properties或consumer.properties中的每个客户端配置JAAS。</h3><blockquote><p>登录模块展示了客户端如何连接Broker的（和生产者和消费者一样）</p></blockquote> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi config/kafka_client_jaas.conf</span><br><span class="line">KafkaClient &#123;</span><br><span class="line">    org.apache.kafka.common.security.plain.PlainLoginModule required</span><br><span class="line">    username="alice"</span><br><span class="line">    password="alice-secret";</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><ul><li>客户端选择用户名和密码为客户端配置连接的用户。 在此示例中，客户端以用户alice连接到broker。也可以通过在sasl.jaas.config中指定不同的用户名和密码，JVM中的不同客户端可以根据不同的用户来进行连接。</li><li>客户端的JAAS配置可以指定为类似于这里描述的broker作为JVM参数。客户端使用的命名为KafkaClient。 此选项仅允许来自JVM的所有客户端连接中的一个用户。</li></ul></blockquote></li><li><h3 id="在producerproperties或consumerproperties中配置以下属性"><a class="markdownIt-Anchor" href="#在producerproperties或consumerproperties中配置以下属性"></a> 在producer.properties或consumer.properties中配置以下属性</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">security.protocol=SASL_SSL</span><br><span class="line">sasl.mechanism=PLAIN</span><br><span class="line">ssl.truststore.location=/var/private/ssl/client.truststore.jks</span><br><span class="line">ssl.truststore.password=test1234</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="在生产者中使用saslplain"><a class="markdownIt-Anchor" href="#在生产者中使用saslplain"></a> 在生产者中使用SASL/PLAIN</h2><ul><li><code>SASL/PLAIN</code>应仅用<code>SSL</code>作为传输层，以确保在没有加密的情况下不会在线上明文传输。</li><li><code>Kafka</code>中<code>SASL / PLAIN</code>的默认实现在JAAS配置文件中指定用户名和密码，如下所示。 从<code>Kafka 2.0</code>版开始，您可以通过使用配置<code>sasl.server.callback.handler.class</code>和<code>sasl.client.callback.handler.class</code>配置自己的回调处理程序来从外部源获取用户名和密码，从而避免在磁盘上存储明文密码。</li><li>在生产系统中，外部认证服务器可以实现密码认证。从<code>Kafka 2.0</code>版开始，可以通过配置<code>sasl.server.callback.handler.class</code>使用外部身份验证服务器进行密码验证的自己的回调处理程序。</li></ul></li><li><h2 id="实战kafka-saslplain认证"><a class="markdownIt-Anchor" href="#实战kafka-saslplain认证"></a> 实战<code>Kafka SASL/PLAIN</code>认证</h2><ul><li><h3 id="启动kafka"><a class="markdownIt-Anchor" href="#启动kafka"></a> 启动<code>kafka</code></h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export KAFKA_OPTS='-Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf'</span><br><span class="line">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure></li><li><h3 id="kafka消费者和生产者"><a class="markdownIt-Anchor" href="#kafka消费者和生产者"></a> <code>kafka</code>消费者和生产者</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export KAFKA_OPTS="-Djava.security.auth.login.config=/etc/kafka/kafka_client_jaas.conf"</span><br><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9093 --topic test --producer.config config/producer.properties </span><br><span class="line"></span><br><span class="line">export KAFKA_OPTS="-Djava.security.auth.login.config=/etc/kafka/kafka_client_jaas.conf"</span><br><span class="line">bin/kafka-console-consumer.sh --bootstrap-server localhost:9093 --topic test --consumer.config config/consumer.properties</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="kafka-设置开机启动"><a class="markdownIt-Anchor" href="#kafka-设置开机启动"></a> kafka 设置开机启动</h2></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi /etc/rc.d/init.d/kafka-plain</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 2345 10 90 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Kafka</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> File : Kafka-plain</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description: Starts and stops the Kafka server <span class="keyword">for</span> SASL/PLAIN</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line">source /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line">SERVER_HOME=/usr/local/server</span><br><span class="line">KAFKA_HOME=$&#123;SERVER_HOME&#125;/kafka_2.12-2.3.1/bin</span><br><span class="line">LOG_PATH=$&#123;SERVER_HOME&#125;/log</span><br><span class="line">KAFKA_USER=root</span><br><span class="line">export JRE_HOME=/usr/java/jdk1.8.0_172/jre</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_172</span><br><span class="line">export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line">[ -e /etc/sysconfig/kafka ] &amp;&amp; . /etc/sysconfig/kafka</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> See how we were called.</span></span><br><span class="line">case "$1" in</span><br><span class="line"></span><br><span class="line">  start)</span><br><span class="line">    echo -n "Starting Kafka for SASL/PLAIN:"</span><br><span class="line">    export KAFKA_OPTS='-Djava.security.auth.login.config=$KAFKA_HOME/config/kafka_server_jaas.conf'</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER -c "nohup $KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties &gt; $LOG_PATH/server.out 2&gt; $LOG_PATH/server.err &amp;"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  stop)</span><br><span class="line">    echo -n "Stopping Kafka for SASL/PLAIN: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line">  hardstop)</span><br><span class="line">    echo -n "Stopping (hard) Kafka for SASL/PLAIN: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill -9"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  status)</span><br><span class="line">    c_pid=`ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print $2&#125;'`</span><br><span class="line">    if [ "$c_pid" = "" ] ; then</span><br><span class="line">      echo "Stopped"</span><br><span class="line">      exit 3</span><br><span class="line">    else</span><br><span class="line">      echo "Running $c_pid"</span><br><span class="line">      exit 0</span><br><span class="line">    fi</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  restart)</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  *)</span><br><span class="line">    echo "Usage: kafka-plain &#123;start|stop|hardstop|status|restart&#125;"</span><br><span class="line">    exit 1</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">esac</span><br><span class="line">~$ chmod +x /etc/rc.d/init.d/kafka-plain</span><br><span class="line">~$ chkconfig --add kafka-plain</span><br><span class="line">~$ chkconfig kafka-plain on</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
            <tag> 安全认证 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人生就是一个苏醒的过程</title>
      <link href="/2019/12/19/sui-bi-za-tan/ren-sheng-jiu-shi-yi-ge-su-xing-de-guo-cheng/"/>
      <url>/2019/12/19/sui-bi-za-tan/ren-sheng-jiu-shi-yi-ge-su-xing-de-guo-cheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>人活着就是这样一个苏醒的过程。</p><p>这个世界层层叠叠地向我们展开，</p><p>这一刻迷离的面目，</p><p>下一刻就会清晰；</p><p>这一刻不能宽恕的人，</p><p>下一刻就会得到原谅；</p><p>不能饶恕的人不一定是别人，</p><p>那个不可饶恕的人也许就是自己！</p><p>这一刻不能接受的事实，</p><p>下一刻就会变得容易理解。</p><p>就这样，</p><p>我们不断消除着，</p><p>自我的狭隘、偏激和片面，</p><p>一点一点苏醒着，</p><p>活到老，并一直醒悟到老。</p><p><img alt data-src="http://static1.gadfly.pub/assets/images/20191219131707.png" class="lazyload"></p><p>心里有阳光，雨天也是一种浪漫；</p><p>心里下着雨，晴天也是一种遭罪。</p><p>人生快乐不快乐看心情，</p><p>心情好不好看心态。</p><p>人生不如意事常八九，</p><p>快乐的人不是没有痛苦，</p><p>只是他们都修炼了一颗强大的心，</p><p>因而不被痛苦所左右。</p><p>拥有强大的内心，</p><p>就不是生活左右你，</p><p>而是你驾驭生活。</p><p>心态是心灵的窗口，</p><p>心态决定我们看到怎样的世界。</p><p>如果想要把世界看清，</p><p>请别装上有色的玻璃，</p><p>让你的心灵保持纯净；</p><p>如果想要把世界看得全面一点，</p><p>请让窗子大一点点，</p><p>让你的心变得宽广；</p><p>如果想要欢乐，</p><p>请关上灰暗的窗户，</p><p>让你的心正对光明；</p><p>如果想要幸福，</p><p>请远离尘世的烦杂，</p><p>让你的心变得简单。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 心理学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Java并发编程之Callable、Future和FutureTask及四种线程池的使用</title>
      <link href="/2019/12/19/cheng-xu-she-ji/java-bing-fa-bian-cheng-zhi-callable-future-he-futuretask-ji-si-chong-xian-cheng-chi-de-shi-yong/"/>
      <url>/2019/12/19/cheng-xu-she-ji/java-bing-fa-bian-cheng-zhi-callable-future-he-futuretask-ji-si-chong-xian-cheng-chi-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="一-callable与runnable"><a class="markdownIt-Anchor" href="#一-callable与runnable"></a> 一、Callable与Runnable</h2><p>先说一下java.lang.Runnable吧，它是一个接口，在它里面只声明了一个run()方法：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于run()方法返回值为void类型，所以在执行完任务之后无法返回任何结果。<br />Callable位于java.util.concurrent包下，它也是一个接口，在它里面也只声明了一个方法，只不过这个方法叫做call()：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Computes a result, or throws an exception if unable to do so.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> computed result</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception if unable to compute a result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到，这是一个泛型接口，call()函数返回的类型就是传递进来的V类型。<br />那么怎么使用Callable呢？一般情况下是配合ExecutorService来使用的，在ExecutorService接口中声明了若干个submit方法的重载版本：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Callable&lt;T&gt; task)</span></span>;</span><br><span class="line">&lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Runnable task, T result)</span></span>;</span><br><span class="line">Future&lt;?&gt; submit(Runnable task);</span><br></pre></td></tr></table></figure><p>第一个submit方法里面的参数类型就是Callable。<br />暂时只需要知道Callable一般是和ExecutorService配合来使用的，具体的使用方法讲在后面讲述。<br />一般情况下我们使用第一个submit方法和第三个submit方法，第二个submit方法很少使用。</p><h2 id="二-future"><a class="markdownIt-Anchor" href="#二-future"></a> 二、Future</h2><p>Future就是对于具体的Runnable或者Callable任务的执行结果进行取消、查询是否完成、获取结果。必要时可以通过get方法获取执行结果，该方法会阻塞直到任务返回结果。<br />Future类位于java.util.concurrent包下，它是一个接口：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">cancel</span><span class="params">(<span class="keyword">boolean</span> mayInterruptIfRunning)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isCancelled</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isDone</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>;</span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在Future接口中声明了5个方法，下面依次解释每个方法的作用：</p><ul><li>cancel方法用来取消任务，如果取消任务成功则返回true，如果取消任务失败则返回false。参数mayInterruptIfRunning表示是否允许取消正在执行却没有执行完毕的任务，如果设置true，则表示可以取消正在执行过程中的任务。如果任务已经完成，则无论mayInterruptIfRunning为true还是false，此方法肯定返回false，即如果取消已经完成的任务会返回false；如果任务正在执行，若mayInterruptIfRunning设置为true，则返回true，若mayInterruptIfRunning设置为false，则返回false；如果任务还没有执行，则无论mayInterruptIfRunning为true还是false，肯定返回true。</li><li>isCancelled方法表示任务是否被取消成功，如果在任务正常完成前被取消成功，则返回 true。</li><li>isDone方法表示任务是否已经完成，若任务完成，则返回true；</li><li>get()方法用来获取执行结果，这个方法会产生阻塞，会一直等到任务执行完毕才返回；</li><li>get(long timeout, TimeUnit unit)用来获取执行结果，如果在指定时间内，还没获取到结果，就直接返回null。</li></ul><p>也就是说Future提供了三种功能：</p><ol><li>判断任务是否完成；</li><li>能够中断任务；</li><li>能够获取任务执行结果。</li></ol><p>因为Future只是一个接口，所以是无法直接用来创建对象使用的，因此就有了下面的FutureTask。</p><h2 id="三-futuretask"><a class="markdownIt-Anchor" href="#三-futuretask"></a> 三、FutureTask</h2><p>我们先来看一下FutureTask的实现：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureTask</span>&lt;<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt;</span></span><br></pre></td></tr></table></figure><p>FutureTask类实现了RunnableFuture接口，我们看一下RunnableFuture接口的实现：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Runnable</span>, <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看出RunnableFuture继承了Runnable接口和Future接口，而FutureTask实现了RunnableFuture接口。所以它既可以作为Runnable被线程执行，又可以作为Future得到Callable的返回值。<br />FutureTask提供了2个构造器：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FutureTask</span><span class="params">(Callable&lt;V&gt; callable)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FutureTask</span><span class="params">(Runnable runnable, V result)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="四-使用示例"><a class="markdownIt-Anchor" href="#四-使用示例"></a> 四、使用示例</h2><ol><li><h3 id="使用callablefuture获取执行结果"><a class="markdownIt-Anchor" href="#使用callablefuture获取执行结果"></a> 使用Callable+Future获取执行结果</h3> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      ExecutorService executor = Executors.newCachedThreadPool();</span><br><span class="line">      Task task = <span class="keyword">new</span> Task();</span><br><span class="line">      Future&lt;Integer&gt; result = executor.submit(task);</span><br><span class="line">      executor.shutdown();</span><br><span class="line">       </span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">          e1.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">       </span><br><span class="line">      System.out.println(<span class="string">"主线程在执行任务"</span>);</span><br><span class="line">       </span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          System.out.println(<span class="string">"task运行结果"</span>+result.get());</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">       </span><br><span class="line">      System.out.println(<span class="string">"所有任务执行完毕"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"子线程在进行计算"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">            sum += i;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="使用callablefuturetask获取执行结果"><a class="markdownIt-Anchor" href="#使用callablefuturetask获取执行结果"></a> 使用Callable+FutureTask获取执行结果</h3> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//第一种方式</span></span><br><span class="line">    ExecutorService executor = Executors.newCachedThreadPool();</span><br><span class="line">    Task task = <span class="keyword">new</span> Task();</span><br><span class="line">    FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;Integer&gt;(task);</span><br><span class="line">    executor.submit(futureTask);</span><br><span class="line">    executor.shutdown();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//第二种方式，注意这种方式和第一种方式效果是类似的，只不过一个使用的是ExecutorService，一个使用的是Thread</span></span><br><span class="line">    <span class="comment">/*Task task = new Task();</span></span><br><span class="line"><span class="comment">    FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;Integer&gt;(task);</span></span><br><span class="line"><span class="comment">    Thread thread = new Thread(futureTask);</span></span><br><span class="line"><span class="comment">    thread.start();*/</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">        e1.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    System.out.println(<span class="string">"主线程在执行任务"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"task运行结果"</span>+futureTask.get());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    System.out.println(<span class="string">"所有任务执行完毕"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"子线程在进行计算"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">            sum += i;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><pre><code>如果为了可取消性而使用 Future 但又不提供可用的结果，则可以声明 Future&lt;?&gt; 形式类型、并返回 null 作为底层任务的结果。</code></pre><h2 id="五-java四种线程池的使用"><a class="markdownIt-Anchor" href="#五-java四种线程池的使用"></a> 五、Java四种线程池的使用</h2><ol><li><h3 id="new-thread的弊端"><a class="markdownIt-Anchor" href="#new-thread的弊端"></a> new Thread的弊端</h3> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>弊端：<ol><li>每次new Thread新建对象性能差。</li><li>线程缺乏统一管理，可能无限制新建线程，相互之间竞争，及可能占用过多系统资源导致死机或oom。</li><li>缺乏更多功能，如定时执行、定期执行、线程中断。<br />相比new Thread，Java提供的四种线程池的好处在于：</li><li>重用存在的线程，减少对象创建、消亡的开销，性能佳。</li><li>可有效控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞。</li><li>提供定时执行、定期执行、单线程、并发数控制等功能。</li></ol></li><li><h3 id="executors提供四种线程池"><a class="markdownIt-Anchor" href="#executors提供四种线程池"></a> Executors提供四种线程池</h3><ul><li><code>newCachedThreadPool</code>创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。线程池的规模不存在限制。</li><li><code>newFixedThreadPool</code> 创建一个固定长度线程池，可控制线程最大并发数，超出的线程会在队列中等待。</li><li><code>newScheduledThreadPool</code> 创建一个固定长度线程池，支持定时及周期性任务执行。</li><li><code>newSingleThreadExecutor</code> 创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。</li></ul><blockquote><p>下面代码说明：</p></blockquote><ul><li><h4 id="newcachedthreadpool"><a class="markdownIt-Anchor" href="#newcachedthreadpool"></a> newCachedThreadPool</h4><blockquote><p>创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。</p></blockquote>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ExecutorService fixedThreadPool = Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> index = i;</span><br><span class="line">    fixedThreadPool.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(index);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>线程池为无限大，当执行第二个任务时第一个任务已经完成，会复用执行第一个任务的线程，而不用每次新建线程。</p></li><li><h4 id="newfixedthreadpool"><a class="markdownIt-Anchor" href="#newfixedthreadpool"></a> newFixedThreadPool</h4><p>创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ExecutorService fixedThreadPool = Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> index = i;</span><br><span class="line">    fixedThreadPool.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(index);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为线程池大小为3，每个任务输出index后sleep 2秒，所以每两秒打印3个数字。<br />定长线程池的大小最好根据系统资源进行设置</p></li><li><h4 id="newscheduledthreadpool"><a class="markdownIt-Anchor" href="#newscheduledthreadpool"></a> newScheduledThreadPool</h4><p>创建一个定长线程池，支持定时及周期性任务执行。</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(<span class="number">5</span>);</span><br><span class="line">scheduledThreadPool.schedule(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"delay 3 seconds"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure><p>表示延迟3秒执行。<br />定期执行示例代码如下：</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">scheduledThreadPool.scheduleAtFixedRate(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"delay 1 seconds, and excute every 3 seconds"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">1</span>, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure><p>表示延迟1秒后每3秒执行一次。<br />ScheduledExecutorService比Timer更安全，功能更强大。</p></li><li><h4 id="newsinglethreadexecutor"><a class="markdownIt-Anchor" href="#newsinglethreadexecutor"></a> newSingleThreadExecutor</h4><p>创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">          ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">              <span class="keyword">final</span> <span class="keyword">int</span> index = i;</span><br><span class="line">              singleThreadExecutor.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            </span><br><span class="line">                  <span class="meta">@Override</span></span><br><span class="line">                  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                      <span class="keyword">try</span> &#123;</span><br><span class="line">                          System.out.println(index);</span><br><span class="line">                          Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                          <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                          e.printStackTrace();</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          结果依次输出，相当于顺序执行各个任务。</span><br><span class="line">          </span><br><span class="line">## 六、谈谈new Thread的弊端及Java四种线程池的使用</span><br><span class="line">  &gt; 当我们通过Executor提交一组并发执行的任务，并且希望在每一个任务完成后能立即得到结果，有两种方式可以采取：</span><br><span class="line">  </span><br><span class="line">  * ### 方式一</span><br><span class="line">    &gt; 通过一个list来保存一组future，然后在循环中轮训这组future,直到每个future都已完成。如果我们不希望出现因为排在前面的任务阻塞导致后面先完成的任务的结果没有及时获取的情况，那么在调用get方式时，需要将超时时间设置为<span class="number">0</span></span><br><span class="line">    ```java</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompletionServiceTest</span> </span>&#123; </span><br><span class="line">   </span><br><span class="line">        <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123; </span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> i; </span><br><span class="line">               </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="title">Task</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123; </span><br><span class="line">                <span class="keyword">this</span>.i = i; </span><br><span class="line">            &#125; </span><br><span class="line">       </span><br><span class="line">            <span class="meta">@Override</span> </span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123; </span><br><span class="line">                Thread.sleep(<span class="number">10000</span>); </span><br><span class="line">                <span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">"执行完任务："</span> + i; </span><br><span class="line">            &#125;    </span><br><span class="line">        &#125; </span><br><span class="line">           </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123; </span><br><span class="line">            testUseFuture(); </span><br><span class="line">        &#125; </span><br><span class="line">           </span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testUseFuture</span><span class="params">()</span></span>&#123; </span><br><span class="line">            <span class="keyword">int</span> numThread = <span class="number">5</span>; </span><br><span class="line">            ExecutorService executor = Executors.newFixedThreadPool(numThread); </span><br><span class="line">            List&lt;Future&lt;String&gt;&gt; futureList = <span class="keyword">new</span> ArrayList&lt;Future&lt;String&gt;&gt;(); </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;numThread;i++ )&#123; </span><br><span class="line">                Future&lt;String&gt; future = executor.submit(<span class="keyword">new</span> CompletionServiceTest.Task(i)); </span><br><span class="line">                futureList.add(future); </span><br><span class="line">            &#125; </span><br><span class="line">                       </span><br><span class="line">            <span class="keyword">while</span>(numThread &gt; <span class="number">0</span>)&#123; </span><br><span class="line">                <span class="keyword">for</span>(Future&lt;String&gt; future : futureList)&#123; </span><br><span class="line">                    String result = <span class="keyword">null</span>; </span><br><span class="line">                    <span class="keyword">try</span> &#123; </span><br><span class="line">                        result = future.get(<span class="number">0</span>, TimeUnit.SECONDS); </span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123; </span><br><span class="line">                        e.printStackTrace(); </span><br><span class="line">                    &#125; <span class="keyword">catch</span> (ExecutionException e) &#123; </span><br><span class="line">                        e.printStackTrace(); </span><br><span class="line">                    &#125; <span class="keyword">catch</span> (TimeoutException e) &#123; </span><br><span class="line">                        <span class="comment">//超时异常直接忽略 &lt;br&gt;　　　　　　　　　　　　//future.cancel(true);//超时设置任务取消</span></span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">null</span> != result)&#123; </span><br><span class="line">                        futureList.remove(future); </span><br><span class="line">                        numThread--; </span><br><span class="line">                        System.out.println(result); </span><br><span class="line">                        <span class="comment">//此处必须break，否则会抛出并发修改异常。（也可以通过将futureList声明为CopyOnWriteArrayList类型解决） </span></span><br><span class="line">                        <span class="keyword">break</span>; </span><br><span class="line">                    &#125; </span><br><span class="line">                &#125; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><ul><li><h3 id="方式二"><a class="markdownIt-Anchor" href="#方式二"></a> 方式二</h3><blockquote><p>第一种方式显得比较繁琐，通过使用ExecutorCompletionService，则可以达到代码最简化的效果。</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompletionServiceTest</span> </span>&#123; </span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123; </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">int</span> i; </span><br><span class="line">         </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">Task</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123; </span><br><span class="line">          <span class="keyword">this</span>.i = i; </span><br><span class="line">      &#125; </span><br><span class="line"> </span><br><span class="line">      <span class="meta">@Override</span> </span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123; </span><br><span class="line">          Thread.sleep(<span class="number">10000</span>); </span><br><span class="line">          <span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">"执行完任务："</span> + i; </span><br><span class="line">      &#125;    </span><br><span class="line">  &#125; </span><br><span class="line">           </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>&#123; </span><br><span class="line">      testExecutorCompletionService(); </span><br><span class="line">  &#125; </span><br><span class="line">     </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testExecutorCompletionService</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>&#123; </span><br><span class="line">      <span class="keyword">int</span> numThread = <span class="number">3</span>; </span><br><span class="line">      ExecutorService executor = Executors.newFixedThreadPool(numThread); </span><br><span class="line">      CompletionService&lt;String&gt; completionService = <span class="keyword">new</span> ExecutorCompletionService&lt;String&gt;(executor); </span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;numThread;i++ )&#123; </span><br><span class="line">          completionService.submit(<span class="keyword">new</span> CompletionServiceTest.Task(i)); </span><br><span class="line">      &#125; </span><br><span class="line">    &#125; </span><br><span class="line">       </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;numThread;i++ )&#123;      </span><br><span class="line">        System.out.println(completionService.take().get());  <span class="comment">//获取执行结果</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ExecutorCompletionService分析: CompletionService是Executor和BlockingQueue的结合体。</p></blockquote>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ExecutorCompletionService</span><span class="params">(Executor executor)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (executor == <span class="keyword">null</span>) </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(); </span><br><span class="line">    <span class="keyword">this</span>.executor = executor; </span><br><span class="line">    <span class="keyword">this</span>.aes = (executor <span class="keyword">instanceof</span> AbstractExecutorService) ? </span><br><span class="line">        (AbstractExecutorService) executor : <span class="keyword">null</span>; </span><br><span class="line">    <span class="keyword">this</span>.completionQueue = <span class="keyword">new</span> LinkedBlockingQueue&lt;Future&lt;V&gt;&gt;(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>任务的提交和执行都是委托给Executor来完成。在构造函数中创建一个BlockingQueue来保存计算完成的结果，当提交某个任务时，该任务首先将被包装为一个QueueingFuture，</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Future&lt;V&gt; <span class="title">submit</span><span class="params">(Callable&lt;V&gt; task)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (task == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(); </span><br><span class="line">    RunnableFuture&lt;V&gt; f = newTaskFor(task); </span><br><span class="line">    executor.execute(<span class="keyword">new</span> QueueingFuture(f)); </span><br><span class="line">    <span class="keyword">return</span> f; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>QueueingFuture，这是FutureTask的一个子类，通过改写该子类的done方法，可以实现当任务完成时，将结果放入到BlockingQueue中。</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueingFuture</span> <span class="keyword">extends</span> <span class="title">FutureTask</span>&lt;<span class="title">Void</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    QueueingFuture(RunnableFuture&lt;V&gt; task) &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">super</span>(task, <span class="keyword">null</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">this</span>.task = task;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">()</span> </span>&#123; completionQueue.add(task); &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Future&lt;V&gt; task;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而通过使用BlockingQueue的take(阻塞获取)或poll(非阻塞获取)方法，则可以得到结果。在BlockingQueue不存在元素时，这两个操作会阻塞，一旦有结果加入，则立即返回。</p></li></ul><blockquote><p>附加知识点：</p></blockquote><ul><li>take()：取走BlockingQueue里排在首位的对象,若BlockingQueue为空,阻断进入等待状态直到Blocking有新的对象被加入为止;</li><li>poll(time):取走BlockingQueue里排在首位的对象,若不能立即取出,则可以等time参数规定的时间,取不到时返回nul</li></ul>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Future&lt;V&gt; <span class="title">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> completionQueue.take(); </span><br><span class="line">&#125; </span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">public</span> Future&lt;V&gt; <span class="title">poll</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> completionQueue.poll(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Callable </tag>
            
            <tag> Future </tag>
            
            <tag> FutureTask </tag>
            
            <tag> 并发 </tag>
            
            <tag> 多线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java并发编程之DelayQueue阻塞队列详解</title>
      <link href="/2019/12/19/cheng-xu-she-ji/java-bing-fa-bian-cheng-zhi-delayqueue-zu-sai-dui-lie-xiang-jie/"/>
      <url>/2019/12/19/cheng-xu-she-ji/java-bing-fa-bian-cheng-zhi-delayqueue-zu-sai-dui-lie-xiang-jie/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1><blockquote><p>DelayQueue是一个支持延时获取元素的无界阻塞队列。队列使用PriorityQueue来实现。队列中的元素必须实现Delayed接口，在创建元素时可以指定多久才能从队列中获取当前元素。只有在延迟期满时才能从队列中提取元素。</p></blockquote><ul><li><h3 id="delayqueue非常有用可以运用在以下两个应用场景"><a class="markdownIt-Anchor" href="#delayqueue非常有用可以运用在以下两个应用场景"></a> DelayQueue非常有用，可以运用在以下两个应用场景：</h3><ul><li><h4 id="缓存系统的设计使用delayqueue保存缓存元素的有效期使用一个线程循环查询delayqueue一旦能从delayqueue中获取元素时就表示有缓存到期了"><a class="markdownIt-Anchor" href="#缓存系统的设计使用delayqueue保存缓存元素的有效期使用一个线程循环查询delayqueue一旦能从delayqueue中获取元素时就表示有缓存到期了"></a> 缓存系统的设计：使用DelayQueue保存缓存元素的有效期，使用一个线程循环查询DelayQueue，一旦能从DelayQueue中获取元素时，就表示有缓存到期了。</h4></li><li><h4 id="定时任务调度使用delayqueue保存当天要执行的任务和执行时间一旦从delayqueue中获取到任务就开始执行比如timer就是使用delayqueue实现的"><a class="markdownIt-Anchor" href="#定时任务调度使用delayqueue保存当天要执行的任务和执行时间一旦从delayqueue中获取到任务就开始执行比如timer就是使用delayqueue实现的"></a> 定时任务调度：使用DelayQueue保存当天要执行的任务和执行时间，一旦从DelayQueue中获取到任务就开始执行，比如Timer就是使用DelayQueue实现的。</h4></li></ul></li><li><h3 id="delayqueue只有两个很简单的构造方法"><a class="markdownIt-Anchor" href="#delayqueue只有两个很简单的构造方法"></a> DelayQueue只有两个很简单的构造方法：</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">DelayQueue</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">DelayQueue</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.addAll(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="delayqueue是什么"><a class="markdownIt-Anchor" href="#delayqueue是什么"></a> DelayQueue是什么</h3><blockquote><h4 id="delayqueue是一个无界的blockingqueue用于放置实现了delayed接口的对象其中的对象只能在其到期时才能从队列中取走-这种队列是有序的即队头对象的延迟到期时间最长-注意不能将null元素放置到这种队列中"><a class="markdownIt-Anchor" href="#delayqueue是一个无界的blockingqueue用于放置实现了delayed接口的对象其中的对象只能在其到期时才能从队列中取走-这种队列是有序的即队头对象的延迟到期时间最长-注意不能将null元素放置到这种队列中"></a> DelayQueue是一个无界的BlockingQueue，用于放置实现了Delayed接口的对象，其中的对象只能在其到期时才能从队列中取走。这种队列是有序的，即队头对象的延迟到期时间最长。注意：不能将null元素放置到这种队列中。</h4></blockquote></li><li><h3 id="delayqueue能做什么"><a class="markdownIt-Anchor" href="#delayqueue能做什么"></a> DelayQueue能做什么</h3><ol><li>淘宝订单业务:下单之后如果三十分钟之内没有付款就自动取消订单。</li><li>饿了吗订餐通知:下单成功后60s之后给用户发送短信通知。</li></ol></li></ul><h1 id="实际开发中的应用"><a class="markdownIt-Anchor" href="#实际开发中的应用"></a> 实际开发中的应用</h1><blockquote><h4 id="简单的延时队列要有三部分第一实现了delayed接口的消息体-第二消费消息的消费者-第三存放消息的延时队列"><a class="markdownIt-Anchor" href="#简单的延时队列要有三部分第一实现了delayed接口的消息体-第二消费消息的消费者-第三存放消息的延时队列"></a> 简单的延时队列要有三部分：第一实现了Delayed接口的消息体、第二消费消息的消费者、第三存放消息的延时队列</h4></blockquote><ol><li><h4 id="消息体-实现接口-delayed-重写方法-compareto-和-getdelay"><a class="markdownIt-Anchor" href="#消息体-实现接口-delayed-重写方法-compareto-和-getdelay"></a> 消息体。实现接口 Delayed ，重写方法 compareTo 和 getDelay</h4> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">Delayed</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; body=<span class="keyword">new</span> HashMap&lt;&gt;();  <span class="comment">//消息内容</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> excuteTime;<span class="comment">//执行时间</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getBody</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> body;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBody</span><span class="params">(Map&lt;String, String&gt; body)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.body = body;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getExcuteTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> excuteTime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setExcuteTime</span><span class="params">(<span class="keyword">long</span> excuteTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.excuteTime = excuteTime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Message</span><span class="params">(<span class="keyword">long</span> delayTime,String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.excuteTime = TimeUnit.NANOSECONDS.convert(delayTime, TimeUnit.MILLISECONDS) + System.nanoTime();</span><br><span class="line">        <span class="keyword">this</span>.type=type;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Delayed delayed)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> d = (getDelay(TimeUnit.NANOSECONDS) - delayed.getDelay(TimeUnit.NANOSECONDS));</span><br><span class="line">        <span class="keyword">return</span> (d == <span class="number">0</span>) ? <span class="number">0</span> : ((d &lt; <span class="number">0</span>) ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getDelay</span><span class="params">(TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  unit.convert(<span class="keyword">this</span>.excuteTime - System.nanoTime(), TimeUnit.NANOSECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="声明消费者-实现接口runnable"><a class="markdownIt-Anchor" href="#声明消费者-实现接口runnable"></a> 声明消费者。实现接口Runnable</h4> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 延时队列</span></span><br><span class="line">    <span class="keyword">private</span> DelayQueue&lt;Message&gt; queue;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span>  isRun=<span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(DelayQueue&lt;Message&gt; queue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queue = queue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        isRun=<span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Message take = queue.take();</span><br><span class="line">                System.out.println(<span class="string">"消息类型："</span> + take.getType());</span><br><span class="line">                Map&lt;String,String&gt; map=take.getBody();</span><br><span class="line">                System.out.println(<span class="string">"消息内容："</span>);</span><br><span class="line">                <span class="keyword">for</span> (String key:map.keySet())&#123;</span><br><span class="line">                    System.out.println(<span class="string">"key="</span>+map.get(key));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="延迟队列管理者用于在任何地方获取-delayqueue"><a class="markdownIt-Anchor" href="#延迟队列管理者用于在任何地方获取-delayqueue"></a> 延迟队列管理者，用于在任何地方获取 DelayQueue</h4> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelayQueueManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DelayQueue&lt;Message&gt; delayQueue=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 创建延时队列</span></span><br><span class="line">       delayQueue = <span class="keyword">new</span> DelayQueue&lt;Message&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DelayQueue&lt;Message&gt; <span class="title">getDelayQueue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> delayQueue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="使用延迟队列发送消息"><a class="markdownIt-Anchor" href="#使用延迟队列发送消息"></a> 使用延迟队列发送消息</h4> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// 添加延时消息,m1 延时5s</span></span><br><span class="line">Message m1 = <span class="keyword">new</span> Message( <span class="number">5000</span>,<span class="string">"订单"</span>);</span><br><span class="line">m1.getBody().put(<span class="string">"content"</span>,<span class="string">"12345"</span>);</span><br><span class="line"><span class="comment">// 添加延时消息,m1 延时5s</span></span><br><span class="line">DelayQueueManager.getDelayQueue().offer(m1);</span><br><span class="line"><span class="keyword">if</span>(!Consumer.isRun)&#123;</span><br><span class="line"><span class="comment">// 启动消费线程</span></span><br><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Consumer(DelayQueueManager.getDelayQueue())).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="delayqueue源码详解"><a class="markdownIt-Anchor" href="#delayqueue源码详解"></a> DelayQueue源码详解</h1><ul><li><h4 id="delayqueue类定义为"><a class="markdownIt-Anchor" href="#delayqueue类定义为"></a> DelayQueue类定义为：</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelayQueue</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Delayed</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractQueue</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">BlockingQueue</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="该类同样继承了abstractqueue抽象类并实现了blockingqueue接口这里不再叙述"><a class="markdownIt-Anchor" href="#该类同样继承了abstractqueue抽象类并实现了blockingqueue接口这里不再叙述"></a> 该类同样继承了AbstractQueue抽象类并实现了BlockingQueue接口，这里不再叙述。</h4></li></ul><p>队列中的元素必须实现Delayed接口，那我们先来看一下Delayed接口，Delayed接口的定义很简单：<br /><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Delayed</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Delayed</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">getDelay</span><span class="params">(TimeUnit unit)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><h4 id="只有一个getdelaytimeunit方法该方法返回与此对象相关的的剩余时间-同时我们看到delayed接口继承自comperable接口所以实现delayed接口的类还必须要定义一个compareto方法该方法提供与此接口的getdelay方法一致的排序"><a class="markdownIt-Anchor" href="#只有一个getdelaytimeunit方法该方法返回与此对象相关的的剩余时间-同时我们看到delayed接口继承自comperable接口所以实现delayed接口的类还必须要定义一个compareto方法该方法提供与此接口的getdelay方法一致的排序"></a> 只有一个getDelay(TimeUnit)方法，该方法返回与此对象相关的的剩余时间。同时我们看到Delayed接口继承自Comperable接口，所以实现Delayed接口的类还必须要定义一个compareTo方法，该方法提供与此接口的getDelay方法一致的排序。</h4><blockquote><p>DelayQueue中比较重要的字段如下：</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">transient</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> PriorityQueue&lt;E&gt; q = <span class="keyword">new</span> PriorityQueue&lt;E&gt;();</span><br><span class="line"><span class="keyword">private</span> Thread leader = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Condition available = lock.newCondition();</span><br></pre></td></tr></table></figure><ul><li>lock：全局独占锁，用于实现线程安全</li><li>q：优先队列，用于存储元素，并按优先级排序</li><li>leader：用于优化内部阻塞通知的线程</li><li>available：用于实现阻塞的Condition对象</li></ul></li><li><h4 id="其实看到这里我们应该已经能够了解delayqueue的大致实现思路了"><a class="markdownIt-Anchor" href="#其实看到这里我们应该已经能够了解delayqueue的大致实现思路了"></a> 其实看到这里，我们应该已经能够了解DelayQueue的大致实现思路了：</h4><blockquote><p>以支持优先级的PriorityQueue无界队列作为一个容器，因为元素都必须实现Delayed接口，可以根据元素的过期时间来对元素进行排列，因此，先过期的元素会在队首，每次从队列里取出来都是最先要过期的元素。</p></blockquote></li><li><h2 id="入队"><a class="markdownIt-Anchor" href="#入队"></a> 入队</h2><p>我们来看一下add(E e)方法：</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> offer(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该方法通过调用offer(E e)来添加元素：</p>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取全局独占锁</span></span><br><span class="line">    <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">this</span>.lock;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 向优先队列中插入元素</span></span><br><span class="line">        q.offer(e);</span><br><span class="line">        <span class="comment">// 如果队首元素是刚插入的元素，则设置leader为null，并唤醒阻塞在available上的线程</span></span><br><span class="line">        <span class="keyword">if</span> (q.peek() == e) &#123;</span><br><span class="line">            leader = <span class="keyword">null</span>;</span><br><span class="line">            available.signal();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// 释放全局独占锁</span></span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PriorityQueue的入队操作与PriorityBlockingQueue基本一致，这里不再叙述。</p><p>下面我们主要介绍一下leader变量：</p><blockquote><h4 id="leader是等待获取队列头元素的线程应用主从式设计减少不必要的等待-如果leader不等于空表示已经有线程在等待获取队列的头元素-所以通过await方法让出当前线程等待信号-如果leader等于空则把当前线程设置为leader当一个线程为leader它会使用awaitnanos方法让当前线程等待接收信号或等待delay时间"><a class="markdownIt-Anchor" href="#leader是等待获取队列头元素的线程应用主从式设计减少不必要的等待-如果leader不等于空表示已经有线程在等待获取队列的头元素-所以通过await方法让出当前线程等待信号-如果leader等于空则把当前线程设置为leader当一个线程为leader它会使用awaitnanos方法让当前线程等待接收信号或等待delay时间"></a> leader是等待获取队列头元素的线程，应用主从式设计减少不必要的等待。如果leader不等于空，表示已经有线程在等待获取队列的头元素。所以，通过await()方法让出当前线程等待信号。如果leader等于空，则把当前线程设置为leader，当一个线程为leader，它会使用awaitNanos()方法让当前线程等待接收信号或等待delay时间。</h4></blockquote></li><li><h2 id="出队"><a class="markdownIt-Anchor" href="#出队"></a> 出队</h2><p>出队我们来看一下会阻塞的take()方法：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">  <span class="comment">// 获取全局独占锁</span></span><br><span class="line">  <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">this</span>.lock;</span><br><span class="line">  lock.lockInterruptibly();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">      <span class="comment">// 获取队首元素</span></span><br><span class="line">      E first = q.peek();</span><br><span class="line">      <span class="comment">// 队首为空，则阻塞当前线程</span></span><br><span class="line">      <span class="keyword">if</span> (first == <span class="keyword">null</span>)&#123;</span><br><span class="line">        available.await();</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 获取队首元素的超时时间</span></span><br><span class="line">        <span class="keyword">long</span> delay = first.getDelay(NANOSECONDS);</span><br><span class="line">        <span class="comment">// 已超时，直接出队</span></span><br><span class="line">        <span class="keyword">if</span> (delay &lt;= <span class="number">0</span>) <span class="keyword">return</span> q.poll();</span><br><span class="line">        <span class="comment">// 释放first的引用，避免内存泄漏</span></span><br><span class="line">        first = <span class="keyword">null</span>; <span class="comment">// don't retain ref while waiting</span></span><br><span class="line">        <span class="comment">// leader != null表明有其他线程在操作，阻塞当前线程</span></span><br><span class="line">        <span class="keyword">if</span> (leader != <span class="keyword">null</span>)&#123;</span><br><span class="line">            available.await();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// leader指向当前线程</span></span><br><span class="line">          Thread thisThread = Thread.currentThread();</span><br><span class="line">          leader = thisThread;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 超时阻塞</span></span><br><span class="line">            available.awaitNanos(delay);</span><br><span class="line">          &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 释放leader</span></span><br><span class="line">            <span class="keyword">if</span> (leader == thisThread) leader = <span class="keyword">null</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// leader为null并且队列不为空，说明没有其他线程在等待，那就通知条件队列</span></span><br><span class="line">    <span class="keyword">if</span> (leader == <span class="keyword">null</span> &amp;&amp; q.peek() != <span class="keyword">null</span>)</span><br><span class="line">      available.signal();</span><br><span class="line">    <span class="comment">// 释放全局独占锁</span></span><br><span class="line">    lock.unlock();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><h4 id="这里为什么如果不设置first-null则会引起内存泄漏呢线程a到达列首元素没有到期设置leader-线程a这是线程b来了因为leader-null则会阻塞线程c一样-假如线程阻塞完毕了获取列首元素成功出列-这个时候列首元素应该会被回收掉但是问题是它还被线程b-线程c持有着所以不会回收这里只有两个线程如果有线程d-线程e呢这样会无限期的不能回收就会造成内存泄漏"><a class="markdownIt-Anchor" href="#这里为什么如果不设置first-null则会引起内存泄漏呢线程a到达列首元素没有到期设置leader-线程a这是线程b来了因为leader-null则会阻塞线程c一样-假如线程阻塞完毕了获取列首元素成功出列-这个时候列首元素应该会被回收掉但是问题是它还被线程b-线程c持有着所以不会回收这里只有两个线程如果有线程d-线程e呢这样会无限期的不能回收就会造成内存泄漏"></a> 这里为什么如果不设置first = null，则会引起内存泄漏呢？线程A到达，列首元素没有到期，设置leader = 线程A，这是线程B来了因为leader != null，则会阻塞，线程C一样。假如线程阻塞完毕了，获取列首元素成功，出列。这个时候列首元素应该会被回收掉，但是问题是它还被线程B、线程C持有着，所以不会回收，这里只有两个线程，如果有线程D、线程E…呢？这样会无限期的不能回收，就会造成内存泄漏。</h4></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 并发 </tag>
            
            <tag> 多线程 </tag>
            
            <tag> DelayQueue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java8新特性之——lambda表达式的使用</title>
      <link href="/2019/12/19/cheng-xu-she-ji/java8-xin-te-xing-zhi-lambda-biao-da-shi-de-shi-yong/"/>
      <url>/2019/12/19/cheng-xu-she-ji/java8-xin-te-xing-zhi-lambda-biao-da-shi-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="lambda表达式简介"><a class="markdownIt-Anchor" href="#lambda表达式简介"></a> lambda表达式简介</h2><p>个人理解，lambda表达式就是一种新的语法，没有什么新奇的，简化了开发者的编码，其实底层还是一些常规的代码。Lambda 是一个匿名函数，我们可以把 Lambda 表达式理解为是一段可以传递的代码（将代码像数据一样进行传递）。可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使Java的语言表达能力得到了提升。</p><h2 id="lambda表达式的语法"><a class="markdownIt-Anchor" href="#lambda表达式的语法"></a> Lambda表达式的语法</h2><p>Lambda 表达式的基础语法：Java8中引入了一个新的操作符 “-&gt;” 该操作符称为箭头操作符或 Lambda 操作符<br>箭头操作符将 Lambda 表达式拆分成两部分：<br>左侧：Lambda 表达式的参数列表<br>右侧：Lambda 表达式中所需执行的功能， 即 Lambda 体</p><ul><li>###语法格式一：无参数，无返回值<br><code>() -&gt; System.out.println(&quot;Hello Lambda!&quot;);</code><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//平时的写法</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"线程启动了"</span>);        </span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  runnable.run();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 语法格式一：无参数，无返回值</span></span><br><span class="line"><span class="comment"> *        () -&gt; System.out.println("Hello Lambda!");</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//“-&gt;”左边只有一个小括号，表示无参数，右边是Lambda体(就相当于实现了匿名内部类里面的方法了，(即就是一个可用的接口实现类了。))</span></span><br><span class="line">  Runnable runnable = ()-&gt;System.out.println(<span class="string">"线程启动了"</span>);    </span><br><span class="line">  runnable.run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="语法格式二有一个参数并且无返回值"><a class="markdownIt-Anchor" href="#语法格式二有一个参数并且无返回值"></a> 语法格式二：有一个参数，并且无返回值</h3><code>(x) -&gt; System.out.println(x)</code><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**语法格式二：有一个参数，并且无返回值</span></span><br><span class="line"><span class="comment">*      (x) -&gt; System.out.println(x)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这个e就代表所实现的接口的方法的参数，</span></span><br><span class="line">  Consumer&lt;String&gt; consumer = e-&gt;System.out.println(<span class="string">"ghijhkhi"</span>+e);</span><br><span class="line">  consumer.accept(<span class="string">"woojopj"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="语法格式三若只有一个参数小括号可以省略不写第二种方式的一种简化吧"><a class="markdownIt-Anchor" href="#语法格式三若只有一个参数小括号可以省略不写第二种方式的一种简化吧"></a> 语法格式三：若只有一个参数，小括号可以省略不写(第二种方式的一种简化吧)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  x -&gt; System.out.println(x)</span><br><span class="line">  ``` </span><br><span class="line">* ### 语法格式四：有两个以上的参数，有返回值，并且 Lambda 体中有多条语句</span><br><span class="line">  ```java</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Lambda 体中有多条语句，记得要用大括号括起来</span></span><br><span class="line">    Comparator&lt;Integer&gt; com = (x, y) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">"函数式接口"</span>);</span><br><span class="line">        <span class="keyword">return</span> Integer.compare(x, y);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> compare = com.compare(<span class="number">100</span>, <span class="number">244</span>);</span><br><span class="line">    System.out.println(compare);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="语法格式五若-lambda-体中只有一条语句-return-和-大括号都可以省略不写-即"><a class="markdownIt-Anchor" href="#语法格式五若-lambda-体中只有一条语句-return-和-大括号都可以省略不写-即"></a> 语法格式五：若 Lambda 体中只有一条语句， return 和 大括号都可以省略不写 即：</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Comparator com = (x, y) -&gt; Integer.compare(x, y);</span><br></pre></td></tr></table></figure></li><li><h3 id="语法格式六lambda-表达式的参数列表的数据类型可以省略不写因为jvm编译器通过上下文推断出数据类型即类型推断integer-x-integer-y-integercomparex-y"><a class="markdownIt-Anchor" href="#语法格式六lambda-表达式的参数列表的数据类型可以省略不写因为jvm编译器通过上下文推断出数据类型即类型推断integer-x-integer-y-integercomparex-y"></a> 语法格式六：Lambda 表达式的参数列表的数据类型可以省略不写，因为JVM编译器通过上下文推断出，数据类型，即“类型推断”(Integer x, Integer y) -&gt; Integer.compare(x, y);</h3></li></ul><h2 id="函数式接口"><a class="markdownIt-Anchor" href="#函数式接口"></a> 函数式接口</h2><ul><li><p>到这儿，相信大家也看出来规律了，这个Lambda表达式，好像离不开接口咦…你还真说对了，这个Lambda表达式，是需要函数式接口的支持的，那么什么是函数式接口呢？</p></li><li><p>函数式接口 ，即只包含一个抽象方法的接口，称为函数式接口。</p></li><li><p>你可以通过 Lambda 表达式来创建该接口的对象。（若 Lambda 表达式抛出一个受检异常，那么该异常需要在目标接口的抽象方法上进行声明）。</p></li><li><p>我们可以在任意函数式接口上使用 @FunctionalInterface 注解，这样做可以检查它是否是一个函数式接口，同时 javadoc 也会包含一条声明，说明这个接口是一个函数式接口。像上面的Consumer接口就是一个函数式接口。</p><table><thead><tr><th>函数式接口</th><th>描述</th></tr></thead><tbody><tr><td>Function</td><td>传递一个参数返回一个结果。这个结果的类型可以与参数的类型不相同。</td></tr><tr><td>BiFunction</td><td>传递两个参数返回一个结果。这个结果的类型可以与任一参数的类型不相同。</td></tr><tr><td>UnaryOperator</td><td>代表一个操作符的操作，它的返回结果类型与操作符的类型一样。实际上它可以被看作是Function 它的返回结果跟参数一样，它是Function 的子接口。</td></tr><tr><td>BiOperator</td><td>代表两个操作符的操作，它的返回结果类型必须与操作符相同。</td></tr><tr><td>Predicate</td><td>传递一个参数，基于参数的值返回boolean值。</td></tr><tr><td>Supplier</td><td>代表一个供应者的结果。</td></tr><tr><td>Consumer</td><td>传递一个参数但没有返回值。</td></tr></tbody></table></li></ul><ol><li><h3 id="consumert消费性接口-传进一个参数-然后对该参数进行操作-没有返回值-操作了也就纯操作"><a class="markdownIt-Anchor" href="#consumert消费性接口-传进一个参数-然后对该参数进行操作-没有返回值-操作了也就纯操作"></a> Consumer<t>：消费性接口       传进一个参数 然后对该参数进行操作 没有返回值 操作了也就纯操作</t></h3></li></ol>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    happy(<span class="number">10000</span>, (m) -&gt; System.out.println(<span class="string">"消费了"</span> + m + <span class="string">"元"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">happy</span><span class="params">(<span class="keyword">double</span> money, Consumer&lt;Double&gt; consumer)</span> </span>&#123;</span><br><span class="line">    consumer.accept(money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><h3 id="suppliert供给型接口-用于给你产生一些对象-你可以指定你要产生的对象类型"><a class="markdownIt-Anchor" href="#suppliert供给型接口-用于给你产生一些对象-你可以指定你要产生的对象类型"></a> Supplier<t>：供给型接口        用于给你产生一些对象 你可以指定你要产生的对象类型</t></h3></li></ol>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; numList = getNumList(<span class="number">10</span>, () -&gt; (<span class="keyword">int</span>) (Math.random() * <span class="number">100</span>));</span><br><span class="line">    <span class="keyword">for</span> (Integer integer : numList) &#123;</span><br><span class="line">        System.out.println(integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求：产生指定个数的整数，并放入集合中</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getNumList</span><span class="params">(<span class="keyword">int</span> num, Supplier&lt;Integer&gt; supplier)</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        Integer n = supplier.get();</span><br><span class="line">        list.add(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><h3 id="functiontr函数型接口传进去一个传参数返回一个参数可以通过定义泛型对其类型进行操作"><a class="markdownIt-Anchor" href="#functiontr函数型接口传进去一个传参数返回一个参数可以通过定义泛型对其类型进行操作"></a> Function&lt;T,R&gt;函数型接口：传进去一个传参数，返回一个参数，可以通过定义泛型对其类型进行操作</h3></li></ol>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//去除首尾空格</span></span><br><span class="line">    String s = strHandler(<span class="string">"\t\t\t\t 九点三公分课程"</span>, (str) -&gt; str.trim());</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    <span class="comment">//截取字符串</span></span><br><span class="line">    String s1 = strHandler(<span class="string">"九点三公分课程"</span>, (str) -&gt; str.substring(<span class="number">1</span>, <span class="number">5</span>));</span><br><span class="line">    System.out.println(s1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//需求：用于处理字符串</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">strHandler</span><span class="params">(String str, Function&lt;String, String&gt; function)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> function.apply(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><h3 id="predicatet-断言型接口-用于一些做一些判断型操作"><a class="markdownIt-Anchor" href="#predicatet-断言型接口-用于一些做一些判断型操作"></a> Predicate<t>: 断言型接口 用于一些做一些判断型操作</t></h3></li></ol>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;String&gt; list = Arrays.asList(<span class="string">"action"</span>,<span class="string">"string"</span>,<span class="string">"char"</span>,<span class="string">"shore"</span>);</span><br><span class="line">    List&lt;String&gt; strings = filterStr(list, (s) -&gt; s.length() &gt; <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span> (String s:strings) &#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//需求：将满足条件的字符串放入集合中</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">filterStr</span><span class="params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span></span>&#123;</span><br><span class="line">    List&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String str:list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pre.test(str))&#123;</span><br><span class="line">            list1.add(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img alt data-src="https://img-blog.csdn.net/20180815111535990?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lUX2xhb2JhaQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload"><br><img alt data-src="https://img-blog.csdn.net/20180815111506500?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lUX2xhb2JhaQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload"></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot通过任务执行器(TaskExecutor)来进行多线程和并发编程</title>
      <link href="/2019/12/13/cheng-xu-she-ji/springboot-tong-guo-ren-wu-zhi-xing-qi-taskexecutor-lai-jin-xing-duo-xian-cheng-he-bing-fa-bian-cheng/"/>
      <url>/2019/12/13/cheng-xu-she-ji/springboot-tong-guo-ren-wu-zhi-xing-qi-taskexecutor-lai-jin-xing-duo-xian-cheng-he-bing-fa-bian-cheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>  我们在实际项目中有些复杂运算、耗时操作，就可以利用多线程来充分利用CPU，提高系统吞吐量。SpringBoot对多线程支持非常好，对我们的开发非常便捷。</p></blockquote><p>  在Springboot中对其进行了简化处理，只需要配置一个类型为java.util.concurrent.TaskExecutor或其子类的bean，并在配置类或直接在程序入口类上声明注解@EnableAsync。调用也简单，在由Spring管理的对象的方法上标注注解@Async，显式调用即可生效。一般使用Spring提供的ThreadPoolTaskExecutor类。</p><h1 id="需要的注解"><a class="markdownIt-Anchor" href="#需要的注解"></a> 需要的注解</h1><blockquote><p>springboot 配置多线程需要两个注解</p></blockquote><ol><li><h2 id="enableasync"><a class="markdownIt-Anchor" href="#enableasync"></a> @EnableAsync</h2></li></ol><blockquote><p>在配置类中通过加@EnableAsync开启对异步任务的支持</p></blockquote><ol start="2"><li><h2 id="async"><a class="markdownIt-Anchor" href="#async"></a> @Async</h2></li></ol><blockquote><p>在需要执行的方法上加@Async表明该方法是个异步方法，如果加在类级别上，则表明类所有的方法都是异步方法</p></blockquote><h1 id="配置代码"><a class="markdownIt-Anchor" href="#配置代码"></a> 配置代码</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncConfig</span> <span class="keyword">implements</span> <span class="title">AsyncConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Executor <span class="title">getAsyncExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ThreadPoolTaskExecutor taskExecutor = <span class="keyword">new</span> ThreadPoolTaskExecutor();</span><br><span class="line">        <span class="comment">// 设置核心线程数</span></span><br><span class="line">        taskExecutor.setCorePoolSize(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// 设置最大线程数</span></span><br><span class="line">        taskExecutor.setMaxPoolSize(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// 设置队列容量</span></span><br><span class="line">        taskExecutor.setQueueCapacity(<span class="number">20</span>);</span><br><span class="line">        <span class="comment">// 设置线程活跃时间（秒）</span></span><br><span class="line">        taskExecutor.setKeepAliveSeconds(<span class="number">60</span>);</span><br><span class="line">        <span class="comment">// 设置默认线程名称</span></span><br><span class="line">        taskExecutor.setThreadNamePrefix(<span class="string">"hello-"</span>);</span><br><span class="line">        <span class="comment">// 设置拒绝策略</span></span><br><span class="line">        taskExecutor.setRejectedExecutionHandler(<span class="keyword">new</span> ThreadPoolExecutor.CallerRunsPolicy());</span><br><span class="line">        <span class="comment">// 等待所有任务结束后再关闭线程池</span></span><br><span class="line">        taskExecutor.setWaitForTasksToCompleteOnShutdown(<span class="keyword">true</span>);</span><br><span class="line">        taskExecutor.initialize();</span><br><span class="line">        <span class="keyword">return</span> taskExecutor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="service"><a class="markdownIt-Anchor" href="#service"></a> Service</h1><blockquote><p>这里的方法自动被注入使用上文配置的ThreadPoolTaskExecutor</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeAsync1</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">20</span>);</span><br><span class="line">LoggerFactory.getLogger(AsyncService.class).info("异步任务::1");</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Async</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeAsync2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">LoggerFactory.getLogger(AsyncService.class).info("异步任务::2");</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="进阶带返回值的异步任务"><a class="markdownIt-Anchor" href="#进阶带返回值的异步任务"></a> 进阶：带返回值的异步任务</h1><blockquote><p>有时候我们不止希望异步执行任务，还希望任务执行完成后会有一个返回值，在java中提供了Future泛型接口，用来接收任务执行结果，springboot也提供了此类支持，使用实现了ListenableFuture接口的类如AsyncResult来作为返回值的载体。比如上例中，我们希望返回一个类型为String类型的值，可以将返回值改造为:</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeAsync1</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">20</span>);</span><br><span class="line">LoggerFactory.getLogger(AsyncService.class).info("异步任务::1");</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Async</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeAsync2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">LoggerFactory.getLogger(AsyncService.class).info("异步任务::2");</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListenableFuture&lt;String&gt; <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        String res = name + <span class="string">":Hello World!"</span>;</span><br><span class="line">        LoggerFactory.getLogger(AsyncService<span class="class">.<span class="keyword">class</span>).<span class="title">info</span>(<span class="title">res</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AsyncResult&lt;&gt;(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="调用"><a class="markdownIt-Anchor" href="#调用"></a> 调用</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaskExecutorApplication</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run( TaskExecutorApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span> )</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... strings)</span></span>&#123;</span><br><span class="line">AsyncService asyncService = context.getBean(AsyncService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">asyncService.executeAsync1();</span><br><span class="line">asyncService.executeAsync2();</span><br><span class="line">&#125;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">// 阻塞调用</span></span><br><span class="line">asyncService.sayHello(<span class="string">"yan"</span>).get();</span><br><span class="line"><span class="comment">// 限时调用</span></span><br><span class="line">asyncService.sayHello(<span class="string">"yan"</span>).get(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException | TimeoutException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux环境下检测远程端口是否打开</title>
      <link href="/2019/12/13/gong-ju-zi-liao/linux-jian-ce-yuan-cheng-duan-kou-shi-fou-da-kai/"/>
      <url>/2019/12/13/gong-ju-zi-liao/linux-jian-ce-yuan-cheng-duan-kou-shi-fou-da-kai/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>常用telnet ip port 方式（如telnet 172.17.193.18 5902）测试远程主机端口是否打开，或者用于测试当前环境与远程主机的端口之间的防火墙开通与否。</p></blockquote><ol><li><h1 id="telnet"><a class="markdownIt-Anchor" href="#telnet"></a> <code>telnet</code></h1></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@host ~]# telnet baidu.com 80</span><br><span class="line">Trying 123.125.114.144...</span><br><span class="line">Connected to baidu.com (123.125.114.144). #==&gt;出现Connected表示连通了，说明百度的80端口开放的</span><br><span class="line">Escape character is '^]'. #==&gt;ctrl+]退出此地。</span><br><span class="line">^]</span><br><span class="line"><span class="meta">telnet&gt;</span><span class="bash"> quit</span></span><br><span class="line">Connection closed.</span><br></pre></td></tr></table></figure><ol start="2"><li><h1 id="nmap-ip-p-port"><a class="markdownIt-Anchor" href="#nmap-ip-p-port"></a> <code>nmap ip -p port</code></h1></li></ol><blockquote><p>方法：nmap ip -p port，如nmap 172.17.193.18 -p 5902</p></blockquote><p>根据显示closed/open确定端口是否打开。</p><p>若显示：5902/tcp open vnc-2</p><p>则表示远程端口已打开。</p><p>若显示：5902/tcp closed unknown</p><p>则表示远程端口未打开。</p><ol start="3"><li><h1 id="nc-v-ip-port"><a class="markdownIt-Anchor" href="#nc-v-ip-port"></a> <code>nc -v ip port</code></h1></li></ol><blockquote><p>方法：nc -v ip port，如nc -v 172.17.193.18 5902</p></blockquote><p>根据显示的Connected信息确定端口是否打开。</p><p>若显示：Ncat:Connected to 172.17.193.18:5902.</p><p>则表示远程端口已打开。</p><p>若显示：Ncat:Connection refused.</p><p>则表示远程端口未打开。</p>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>小组讨论个人信仰的十个问题</title>
      <link href="/2019/12/12/sui-bi-za-tan/xiao-zu-tao-lun-ge-ren-xin-yang-de-shi-ge-wen-ti/"/>
      <url>/2019/12/12/sui-bi-za-tan/xiao-zu-tao-lun-ge-ren-xin-yang-de-shi-ge-wen-ti/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><ol><li><h1 id="am-i-content-with-who-i-am-becoming-philippians-16"><a class="markdownIt-Anchor" href="#am-i-content-with-who-i-am-becoming-philippians-16"></a> Am I content with who I am becoming? Philippians 1:6</h1></li></ol><blockquote><p>问题一、我对自己将变成怎样的人感到满意吗（满不满意你新的生命）？</p><p>“我深信那在你们心里动了善工的，必成全这工，直到耶稣基督的日子。‭‭腓立比书‬ ‭1:6‬ ‭</p><p>小组讨论时间：2017/03/11</p></blockquote><ol start="2"><li><h1 id="do-those-close-to-me-recognise-the-authenticity-of-my-spirituality-1-tim-416"><a class="markdownIt-Anchor" href="#do-those-close-to-me-recognise-the-authenticity-of-my-spirituality-1-tim-416"></a> Do those close to me recognise the authenticity of my spirituality? 1 Tim 4:16</h1></li></ol><blockquote><p>问题二，跟我们亲近的人能看出我们属灵的真实景况吗？</p><p>你要谨慎自己和自己的教训，要在这些事上恒心；因为这样行，又能救自己，又能救听你的人。提摩太前书4：16</p><p>我们会假装，然后活在自己谎言的假象中</p><p>小组讨论时间：2017/04/09</p></blockquote><ol start="3"><li><h1 id="do-i-consistently-experience-quiet-intimacy-with-jesus-am-i-still-in-awe-of-godpsalm-4610"><a class="markdownIt-Anchor" href="#do-i-consistently-experience-quiet-intimacy-with-jesus-am-i-still-in-awe-of-godpsalm-4610"></a> Do I consistently experience quiet intimacy with Jesus? Am I still in awe of God?Psalm 46:10</h1></li></ol><blockquote><p>问题三，我是否跟耶稣有持续的亲密的关系？我是否仍然对神心存敬畏？</p><p>“你们要休息，要知道我是神！ 我必在外邦中被尊崇，在遍地上也被尊崇。” 诗篇46：10</p><ul><li>思考问题.什么影响我跟耶稣的亲密关系：</li></ul><ol><li>没有持续的灵修敬拜和祷告</li><li>心中没有爱，不充满</li><li>眼目的骄傲与虚荣，</li><li>不宽松，为人处世太律法</li><li>身边的人对我的负面影响，眼目盯着别人，没有盯着自己</li><li>世间的价值观，愤怒，情绪，被世间的东西左右自己的情绪和时间<br />小组讨论时间：2017/04/23</li></ol></blockquote><ol start="4"><li><h1 id="have-i-experienced-the-healing-power-of-jesus-so-that-all-my-wounds-have-become-scars-isaiah-535-1-peter-118-19"><a class="markdownIt-Anchor" href="#have-i-experienced-the-healing-power-of-jesus-so-that-all-my-wounds-have-become-scars-isaiah-535-1-peter-118-19"></a> Have I experienced the healing power of Jesus so that all my wounds have become scars?  Isaiah 53:5   1 peter 1:18-19</h1></li></ol><blockquote><p>问题四，我是否经历耶稣医治的大能医治我的伤口已经变成伤疤？</p><p>以赛亚书53:5 彼得前书1：18-19</p></blockquote><ol start="5"><li><h1 id="do-i-love-to-see-others-excel-in-their-giftings-1-corinthians-127-1-peter-410"><a class="markdownIt-Anchor" href="#do-i-love-to-see-others-excel-in-their-giftings-1-corinthians-127-1-peter-410"></a> Do I love to see others excel in their giftings? 1 Corinthians 12:7 , 1 Peter 4:10</h1></li></ol><blockquote><p>问题五，我是否乐意看到其他人充分发挥他们各自的恩赐？</p><p>Am I compelled to be seen impressing others?<Bill Gates Story></p><p>哥林多前书12:7，彼得前书4:10</p><p>我是否能强烈的想让别人看到自己的表现？</p></blockquote><ol><li><h1 id="do-i-tend-to-personlise-criticism-romans-123-treading-on-eggshellssome-enjoy-causing-it"><a class="markdownIt-Anchor" href="#do-i-tend-to-personlise-criticism-romans-123-treading-on-eggshellssome-enjoy-causing-it"></a> Do I tend to personlise criticism? Romans 12:3  Treading on eggshells?Some enjoy causing it！</h1></li></ol><blockquote><p>问题六，我是否太过敏感于别人的批评？</p><p>Thinking of yourself with sober judgement.</p><p>罗马书12:3。（合乎中道的看待自己）</p></blockquote><ol start="7"><li><h1 id="do-i-understand-when-i-am-most-vulnerable-nehemiah-413-14"><a class="markdownIt-Anchor" href="#do-i-understand-when-i-am-most-vulnerable-nehemiah-413-14"></a> Do I understand when I am most vulnerable?       Nehemiah 4:13-14</h1></li></ol><p>Message=I stationed armed guards at the most vulnerable parts of the wall<br />Hungry?Angry?lonely?tired?(feeling sorry for myself)—looking for comfort）<br />我是否知道我最容易受攻击的点是什么？ 尼希米记4：13-14<br />在我最容易受攻击的地方，（比如饥饿时，发怒时，疲倦时，自怜时—容易在此时寻求安慰），我要全副武装装备自己。（在我们最容易受攻击的点，我们不能按通常的景况下对环境做出成熟的反应）<br /><a href="http://8.Do" target="_blank" rel="noopener">8.Do</a> I consistently allow a few good friends to speak honestly into my life?Ecclesiastes 4:10<br />我是否持续的允许几个好朋友可以坦诚的对我讲我生命的景况？ 传道书4：10<br />Friend-help you up if you fall down  在你跌倒的时候把你扶起来的朋友 -keep warm if you grow cold   在你寒冷的时候让你取暖的朋友          -defend you if you are attached  在你受攻击的时候为你辩护的朋友<br /><a href="http://9.Do" target="_blank" rel="noopener">9.Do</a> I carry regrets?Have I learned how to forgive myself?Have I learned to forgive others?<br />我是否带着懊悔？我是否学会怎样原谅自己和他人？<br />Psalm 103:12<mark>as far as the east is from the west… 诗篇103：12</mark>东离西有多远，他叫我们的过犯离我们也有多远！<br />Plus：lord’s prayer=forgive us our sins as we forgive … 主耶稣的祷告=免我们的债如同我们免了人的债<br />2 Corinthians 7:10 leave no regrets 哥林多后书7：10 因为依着神的意思忧愁，就生出没有后悔的懊悔来<br />祷告的顺序</p><ul><li>1.感恩</li><li>2.认罪</li><li>3.原谅</li><li>4.为他人祷告</li><li>5.为自己祷告<br />10.Have I developed healthy habits that will refill my fuel tanks?  我是否建立了健康的习惯，持续的使我的油箱充满？<br />Physically?Mentally?Emotionally?Spiritually?  油箱充满（身体上的，心智上的，情感上的，属灵上的？）<br />“Spiritual disciplines”：属灵上的律？<br />“Normal disciplines”-Sleep,eat,rest,Sabbath,habits 一般的律—需要睡觉，吃饭，休息，安息，习惯等</li></ul>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 基督教 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基督教 </tag>
            
            <tag> 耶稣 </tag>
            
            <tag> 信仰 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>耶稣是谁</title>
      <link href="/2019/12/12/sui-bi-za-tan/ye-su-shi-shui/"/>
      <url>/2019/12/12/sui-bi-za-tan/ye-su-shi-shui/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="一早期门徒认为是弥赛亚"><a class="markdownIt-Anchor" href="#一早期门徒认为是弥赛亚"></a> 一，早期门徒认为是弥赛亚</h1><h1 id="二施洗约翰耶利米以利亚"><a class="markdownIt-Anchor" href="#二施洗约翰耶利米以利亚"></a> 二，施洗约翰，耶利米，以利亚</h1><h1 id="三是基督永生神的儿子"><a class="markdownIt-Anchor" href="#三是基督永生神的儿子"></a> 三，是基督，永生神的儿子</h1><ul><li><h2 id="国度之门"><a class="markdownIt-Anchor" href="#国度之门"></a> 国度之门</h2><ul><li><h3 id="世间到神的国度"><a class="markdownIt-Anchor" href="#世间到神的国度"></a> 世间到神的国度</h3></li></ul></li><li><h2 id="教会之门"><a class="markdownIt-Anchor" href="#教会之门"></a> 教会之门</h2><ul><li><h3 id="从国度到教会"><a class="markdownIt-Anchor" href="#从国度到教会"></a> 从国度到教会</h3></li></ul></li><li><h2 id="纪律之门"><a class="markdownIt-Anchor" href="#纪律之门"></a> 纪律之门</h2><ul><li><h3 id="仆人到服侍"><a class="markdownIt-Anchor" href="#仆人到服侍"></a> 仆人到服侍</h3></li></ul></li><li><h2 id="责任之门"><a class="markdownIt-Anchor" href="#责任之门"></a> 责任之门</h2><ul><li><h3 id="70人~12门徒"><a class="markdownIt-Anchor" href="#70人~12门徒"></a> 70人~12门徒，</h3></li><li><h3 id="服侍到领袖"><a class="markdownIt-Anchor" href="#服侍到领袖"></a> 服侍到领袖</h3></li></ul></li><li><h2 id="忠诚和权柄之门"><a class="markdownIt-Anchor" href="#忠诚和权柄之门"></a> 忠诚和权柄之门</h2><ul><li><h3 id="12门徒~三个人彼得雅各约翰"><a class="markdownIt-Anchor" href="#12门徒~三个人彼得雅各约翰"></a> 12门徒~三个人（彼得，雅各，约翰）</h3></li><li><h3 id="领袖到治理的领袖"><a class="markdownIt-Anchor" href="#领袖到治理的领袖"></a> 领袖到治理的领袖</h3></li></ul></li><li><h2 id="远见之门"><a class="markdownIt-Anchor" href="#远见之门"></a> 远见之门</h2><ul><li><h3 id="3个核心成员~1个人"><a class="markdownIt-Anchor" href="#3个核心成员~1个人"></a> 3个核心成员~1个人，</h3></li><li><h3 id="从核心领袖到独一的耶稣"><a class="markdownIt-Anchor" href="#从核心领袖到独一的耶稣"></a> 从核心领袖到独一的耶稣</h3></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 基督教 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基督教 </tag>
            
            <tag> 耶稣 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQL的Foreign Data Wrappers（FDW）外部数据源封装器</title>
      <link href="/2019/12/12/shu-ju-jie-gou/postgresql-de-foreign-data-wrappers-fdw-wai-bu-shu-ju-yuan-feng-zhuang-qi/"/>
      <url>/2019/12/12/shu-ju-jie-gou/postgresql-de-foreign-data-wrappers-fdw-wai-bu-shu-ju-yuan-feng-zhuang-qi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><ul><li><h2 id="sql关系型数据库的跨库操作"><a class="markdownIt-Anchor" href="#sql关系型数据库的跨库操作"></a> <code>SQL</code>关系型数据库的跨库操作</h2><ul><li><h3 id="postgresql关系型数据库"><a class="markdownIt-Anchor" href="#postgresql关系型数据库"></a> <code>PostgreSQL</code>关系型数据库</h3><ol><li><h4 id="安装扩展"><a class="markdownIt-Anchor" href="#安装扩展"></a> 安装扩展</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> postgres_fdw;</span><br></pre></td></tr></table></figure></li><li><h4 id="创建server"><a class="markdownIt-Anchor" href="#创建server"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">server</span> server_remote_farr <span class="keyword">foreign data</span> <span class="keyword">wrapper</span> postgres_fdw </span><br><span class="line">  <span class="keyword">options</span>(host <span class="string">'172.16.3.59'</span>,port <span class="string">'1921'</span>,dbname <span class="string">'postgres'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping"><a class="markdownIt-Anchor" href="#创建user-mapping"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="keyword">mapping</span> <span class="keyword">for</span> android_market <span class="keyword">server</span> server_remote_farr </span><br><span class="line">  <span class="keyword">options</span>(<span class="keyword">user</span> <span class="string">'skydata_test'</span>,<span class="keyword">password</span> <span class="string">'skydata_test'</span>);</span><br></pre></td></tr></table></figure></li><li>创建<code>PostgreSQL</code>外部数据表</li></ol>  <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> tbl_kenyon(</span><br><span class="line">  id <span class="type">int</span>,</span><br><span class="line">  create_user <span class="type">int</span>,</span><br><span class="line">  model_name <span class="type">varchar</span>,</span><br><span class="line">  flag <span class="type">int</span></span><br><span class="line">)<span class="keyword">server</span> server_remote_farr </span><br><span class="line">  <span class="keyword">options</span> (<span class="built_in">schema_name</span> <span class="string">'metadata'</span>,<span class="built_in">table_name</span> <span class="string">'guide_model'</span>);</span><br></pre></td></tr></table></figure></li><li><h3 id="mysql关系型数据库"><a class="markdownIt-Anchor" href="#mysql关系型数据库"></a> <code>MySQL</code>关系型数据库</h3><ol><li><h4 id="安装扩展-2"><a class="markdownIt-Anchor" href="#安装扩展-2"></a> 安装扩展</h4><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/EnterpriseDB/mysql_fdw</span><br></pre></td></tr></table></figure></li><li>编译安装<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/EnterpriseDB/mysql_fdw</span><br><span class="line">cd mysql_fdw</span><br><span class="line">export PATH=/usr/local/Cellar/postgresql/11.2//bin:$PATH</span><br><span class="line">export PATH=/usr/local/mysql/bin/:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/mysql/lib</span><br><span class="line">make USE_PGXS=1</span><br><span class="line">make USE_PGXS=1 install</span><br><span class="line">sudo ln -s /usr/local/mysql/lib/libmysqlclient.dylib /usr/lib/libmysqlclient.dylib</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> mysql_fdw;</span><br></pre></td></tr></table></figure></li></ul></li><li><h4 id="创建server-2"><a class="markdownIt-Anchor" href="#创建server-2"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> mysql_svr  </span><br><span class="line">  <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> mysql_fdw  </span><br><span class="line">  <span class="keyword">OPTIONS</span> (host <span class="string">'127.0.0.1'</span>, port <span class="string">'3306'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-2"><a class="markdownIt-Anchor" href="#创建user-mapping-2"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> postgres <span class="keyword">SERVER</span> mysql_svr  </span><br><span class="line">  <span class="keyword">OPTIONS</span> (username <span class="string">'root'</span>, <span class="keyword">password</span> <span class="string">'123456'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建mysql外部数据表"><a class="markdownIt-Anchor" href="#创建mysql外部数据表"></a> 创建<code>MySQL</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> pg_mysql_tbl_fdw (id <span class="type">integer</span>,vname <span class="type">text</span>)</span><br><span class="line">  <span class="keyword">SERVER</span> mysql_svr <span class="keyword">OPTIONS</span> (dbname <span class="string">'mysql_fdw'</span>,<span class="built_in">table_name</span> <span class="string">'tbl_fdw'</span>);</span><br></pre></td></tr></table></figure></li></ol></li><li><h3 id="oracle关系型数据库"><a class="markdownIt-Anchor" href="#oracle关系型数据库"></a> <code>Oracle</code>关系型数据库</h3><ol><li><h4 id="安装扩展-3"><a class="markdownIt-Anchor" href="#安装扩展-3"></a> 安装扩展</h4></li></ol><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/laurenz/oracle_fdw</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> oracle_fdw;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><h4 id="创建server-3"><a class="markdownIt-Anchor" href="#创建server-3"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> oradb <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> oracle_fdw</span><br><span class="line">      <span class="keyword">OPTIONS</span> (dbserver <span class="string">'//dbserver.mydomain.com/ORADB'</span>);</span><br><span class="line">      ////dbserver.mydomain.com/ORADB指的是tns的名称</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">USAGE</span> <span class="keyword">ON</span> <span class="keyword">FOREIGN</span> <span class="keyword">SERVER</span> oradb <span class="keyword">TO</span> pguser;</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-3"><a class="markdownIt-Anchor" href="#创建user-mapping-3"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> pguser <span class="keyword">SERVER</span> oradb  </span><br><span class="line">  <span class="keyword">OPTIONS</span> (<span class="keyword">user</span> <span class="string">'orauser'</span>, <span class="keyword">password</span> <span class="string">'orapwd'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建oracle外部数据表"><a class="markdownIt-Anchor" href="#创建oracle外部数据表"></a> 创建<code>Oracle</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> oratab (</span><br><span class="line">    id        <span class="type">integer</span> <span class="keyword">OPTIONS</span> (key <span class="string">'true'</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="type">text</span>      <span class="type">character</span> <span class="type">varying</span>(<span class="number">30</span>),</span><br><span class="line">    floating  <span class="type">double</span> <span class="type">precision</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">) <span class="keyword">SERVER</span> oradb <span class="keyword">OPTIONS</span> (<span class="keyword">schema</span> <span class="string">'ORAUSER'</span>, <span class="keyword">table</span> <span class="string">'ORATAB'</span>);</span><br></pre></td></tr></table></figure></li></ol></li><li><h3 id="sqlserver关系型数据库"><a class="markdownIt-Anchor" href="#sqlserver关系型数据库"></a> <code>SqlServer</code>关系型数据库</h3><ol><li><h4 id="安装扩展-4"><a class="markdownIt-Anchor" href="#安装扩展-4"></a> 安装扩展</h4></li></ol><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/tds-fdw/tds_fdw</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> tds_fdw;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><h4 id="创建server-4"><a class="markdownIt-Anchor" href="#创建server-4"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> mssql_svr <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> tds_fdw</span><br><span class="line">  <span class="keyword">OPTIONS</span> (servername <span class="string">'127.0.0.1'</span>, port <span class="string">'1433'</span>, <span class="keyword">database</span> <span class="string">'tds_fdw_test'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-4"><a class="markdownIt-Anchor" href="#创建user-mapping-4"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> postgres <span class="keyword">SERVER</span> mssql_svr </span><br><span class="line">  <span class="keyword">OPTIONS</span> (username <span class="string">'sa'</span>, <span class="keyword">password</span> <span class="string">'xxxx'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建sqlserver外部数据表"><a class="markdownIt-Anchor" href="#创建sqlserver外部数据表"></a> 创建<code>SqlServer</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> mssql_table (</span><br><span class="line">    id <span class="type">integer</span>,</span><br><span class="line">    data <span class="type">varchar</span>)</span><br><span class="line">    <span class="keyword">SERVER</span> mssql_svr</span><br><span class="line">    <span class="keyword">OPTIONS</span> (<span class="built_in">table_name</span> <span class="string">'dbo.mytable'</span>);</span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li><h2 id="hadoop大数据"><a class="markdownIt-Anchor" href="#hadoop大数据"></a> <code>Hadoop</code>大数据</h2><ol><li><h4 id="安装扩展-5"><a class="markdownIt-Anchor" href="#安装扩展-5"></a> 安装扩展</h4></li></ol><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/EnterpriseDB/hdfs_fdw</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTENSION</span> hdfs_fdw;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><h4 id="创建server-5"><a class="markdownIt-Anchor" href="#创建server-5"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> hdfs_svr <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> hdfs_fdw</span><br><span class="line">  <span class="keyword">OPTIONS</span> (host <span class="string">'127.0.0.1'</span>,port <span class="string">'10000'</span>,client_type <span class="string">'spark'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-5"><a class="markdownIt-Anchor" href="#创建user-mapping-5"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> postgres <span class="keyword">server</span> hdfs_svr </span><br><span class="line">  <span class="keyword">OPTIONS</span> (username <span class="string">'ldapadm'</span>, <span class="keyword">password</span> <span class="string">'ldapadm'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建hadoop外部数据表"><a class="markdownIt-Anchor" href="#创建hadoop外部数据表"></a> 创建<code>Hadoop</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> f_names_tab( </span><br><span class="line">  a <span class="type">int</span>, </span><br><span class="line">  <span class="type">name</span> <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">) <span class="keyword">SERVER</span> hdfs_svr</span><br><span class="line">  <span class="keyword">OPTIONS</span> (dbname <span class="string">'testdb'</span>, <span class="built_in">table_name</span> <span class="string">'my_names_tab'</span>);</span><br></pre></td></tr></table></figure></li></ol></li><li><h2 id="mongodb-nosql数据库"><a class="markdownIt-Anchor" href="#mongodb-nosql数据库"></a> <code>MongoDB</code> <code>NoSQL</code>数据库</h2><ol><li><h4 id="安装扩展-6"><a class="markdownIt-Anchor" href="#安装扩展-6"></a> 安装扩展</h4></li></ol><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/EnterpriseDB/mongo_fdw</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTENSION</span> mongo_fdw;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><h4 id="创建server-6"><a class="markdownIt-Anchor" href="#创建server-6"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> mongo_server</span><br><span class="line">   <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> mongo_fdw</span><br><span class="line">   <span class="keyword">OPTIONS</span> (address <span class="string">'127.0.0.1'</span>, port <span class="string">'27017'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-6"><a class="markdownIt-Anchor" href="#创建user-mapping-6"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> postgres</span><br><span class="line">  <span class="keyword">SERVER</span> mongo_server</span><br><span class="line">  <span class="keyword">OPTIONS</span> (username <span class="string">'mongo_user'</span>, <span class="keyword">password</span> <span class="string">'mongo_pass'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建mongodb外部数据表"><a class="markdownIt-Anchor" href="#创建mongodb外部数据表"></a> 创建<code>MongoDB</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> warehouse(</span><br><span class="line">  _id <span class="type">NAME</span>,</span><br><span class="line">  warehouse_id <span class="type">int</span>,</span><br><span class="line">  warehouse_name <span class="type">text</span>,</span><br><span class="line">  warehouse_created <span class="type">timestamptz</span></span><br><span class="line">)<span class="keyword">SERVER</span> mongo_server</span><br><span class="line">   <span class="keyword">OPTIONS</span> (<span class="keyword">database</span> <span class="string">'db'</span>, collection <span class="string">'warehouse'</span>);</span><br></pre></td></tr></table></figure></li></ol></li><li><h2 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> <code>Redis</code></h2><ul><li><h3 id="安装-hiredis"><a class="markdownIt-Anchor" href="#安装-hiredis"></a> 安装 <code>Hiredis</code></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/redis/hiredis.git</span><br><span class="line">cd hiredis</span><br><span class="line">make</span><br><span class="line">mkdir /usr/lib/hiredis</span><br><span class="line">cp libhiredis.so /usr/lib/hiredis</span><br><span class="line">mkdir /usr/include/hiredis</span><br><span class="line">cp hiredis.h /usr/include/hiredis</span><br><span class="line">echo '/usr/local/lib' &gt;&gt;/etc/ld.so.conf </span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure></li><li><h3 id="安装-redis_fdw"><a class="markdownIt-Anchor" href="#安装-redis_fdw"></a> 安装 <code>redis_fdw</code></h3><ul><li><h4 id="下载扩展"><a class="markdownIt-Anchor" href="#下载扩展"></a> 下载扩展</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone -b REL_10_STABLE https://github.com/pg-redis-fdw/redis_fdw.git</span><br><span class="line">cd redis_fdw</span><br><span class="line">export PATH=/usr/local/Cellar/postgresql/11.2//bin:$PATH</span><br><span class="line">make USE_PGXS=1</span><br><span class="line">make USE_PGXS=1 install</span><br></pre></td></tr></table></figure></li><li><h4 id="在sql命令行中安装扩展"><a class="markdownIt-Anchor" href="#在sql命令行中安装扩展"></a> 在<code>SQL</code>命令行中安装扩展</h4><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> redis_fdw;</span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="创建server-7"><a class="markdownIt-Anchor" href="#创建server-7"></a> 创建<code>server</code></h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> redis_server</span><br><span class="line">    <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> redis_fdw</span><br><span class="line">    <span class="keyword">OPTIONS</span> (address <span class="string">'127.0.0.1'</span>, port <span class="string">'6379'</span>);</span><br></pre></td></tr></table></figure></li><li><h3 id="创建user-mapping-7"><a class="markdownIt-Anchor" href="#创建user-mapping-7"></a> 创建<code>user mapping</code></h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> <span class="built_in">PUBLIC</span></span><br><span class="line">    <span class="keyword">SERVER</span> redis_server</span><br><span class="line">    <span class="keyword">OPTIONS</span> (<span class="keyword">password</span> <span class="string">''</span>);</span><br></pre></td></tr></table></figure></li><li><h3 id="创建redis外部数据表"><a class="markdownIt-Anchor" href="#创建redis外部数据表"></a> 创建<code>Redis</code>外部数据表</h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> redis_localhost_15 (</span><br><span class="line">  "key" <span class="type">text</span>, </span><br><span class="line">  "val" <span class="type">json</span></span><br><span class="line">)<span class="keyword">SERVER</span> redis_server <span class="keyword">OPTIONS</span> (<span class="keyword">database</span> <span class="string">'15'</span>);</span><br></pre></td></tr></table></figure></li><li><h2 id="redis_fdw详细的用法介绍"><a class="markdownIt-Anchor" href="#redis_fdw详细的用法介绍"></a> redis_fdw详细的用法介绍</h2><ol><li>CREATE SERVER 支持的 option(指定地址和端口) <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">address:</span> <span class="string">The</span> <span class="string">address</span> <span class="string">or</span> <span class="string">hostname</span> <span class="string">of</span> <span class="string">the</span> <span class="string">Redis</span> <span class="string">server.</span> <span class="string">Default</span> <span class="string">is</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="attr">port: The port number on which the Redis server is listening. Default:</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure></li><li>CREATE USER MAPPING 支持的 option (指定密码) <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">password:</span> <span class="string">The</span> <span class="string">password</span> <span class="string">to</span> <span class="string">authenticate</span> <span class="string">to</span> <span class="string">the</span> <span class="string">Redis</span> <span class="string">server</span> <span class="string">with.</span> <span class="string">Default</span> <span class="string">is</span> <span class="string">''</span></span><br></pre></td></tr></table></figure></li><li>CREATE FOREIGN TABLE 支持的 option<ul><li>指定数据库ID</li><li>表类型(hash,list,set,zset或scalar)</li><li>key 前缀 key 集合 singleton_key 指定KEY</li></ul> <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">database:</span> <span class="string">The</span> <span class="string">numeric</span> <span class="string">ID</span> <span class="string">of</span> <span class="string">the</span> <span class="string">Redis</span> <span class="string">database</span> <span class="string">to</span> <span class="string">query.</span> <span class="string">Default</span> <span class="string">is</span> <span class="number">0</span></span><br><span class="line"><span class="attr">tabletype:</span> <span class="string">can</span> <span class="string">be</span> <span class="string">'hash'</span><span class="string">,</span> <span class="string">'list'</span><span class="string">,</span> <span class="string">'set'</span> <span class="string">or</span> <span class="string">'zset'</span> <span class="attr">Default:</span> <span class="string">none,</span> <span class="string">meaning</span> <span class="string">only</span> <span class="string">look</span> <span class="string">at</span> <span class="string">scalar</span> <span class="string">values.</span></span><br><span class="line"><span class="attr">tablekeyprefix:</span> <span class="string">only</span> <span class="string">get</span> <span class="string">items</span> <span class="string">whose</span> <span class="string">names</span> <span class="string">start</span> <span class="string">with</span> <span class="string">the</span> <span class="string">prefix</span> <span class="string">Default</span> <span class="string">is</span> <span class="string">none</span></span><br><span class="line"><span class="attr">tablekeyset:</span> <span class="string">fetch</span> <span class="string">item</span> <span class="string">names</span> <span class="string">from</span> <span class="string">the</span> <span class="string">named</span> <span class="string">set</span> <span class="string">Default</span> <span class="string">is</span> <span class="string">none</span></span><br><span class="line"><span class="attr">singleton_key:</span> <span class="string">get</span> <span class="string">all</span> <span class="string">the</span> <span class="string">values</span> <span class="string">in</span> <span class="string">the</span> <span class="string">table</span> <span class="string">from</span> <span class="string">a</span> <span class="string">single</span> <span class="string">named</span> <span class="string">object.</span> <span class="string">Default</span> <span class="string">is</span> <span class="string">none,</span> <span class="string">meaning</span> <span class="string">don't</span> <span class="string">just</span> <span class="string">use</span> <span class="string">a</span> <span class="string">single</span> <span class="string">object.</span></span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li><h2 id="kafka"><a class="markdownIt-Anchor" href="#kafka"></a> <code>Kafka</code></h2><ol><li><h4 id="安装扩展-7"><a class="markdownIt-Anchor" href="#安装扩展-7"></a> 安装扩展</h4></li></ol><ul><li>下载扩展<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://github.com/adjust/kafka_fdw</span><br></pre></td></tr></table></figure></li><li>在<code>SQL</code>命令行中安装扩展<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTENSION</span> kafka_fdw;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><h4 id="创建server-8"><a class="markdownIt-Anchor" href="#创建server-8"></a> 创建<code>server</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SERVER</span> kafka_server</span><br><span class="line">  <span class="keyword">FOREIGN DATA</span> <span class="keyword">WRAPPER</span> kafka_fdw</span><br><span class="line">  <span class="keyword">OPTIONS</span> (brokers <span class="string">'localhost:9092'</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="创建user-mapping-8"><a class="markdownIt-Anchor" href="#创建user-mapping-8"></a> 创建<code>user mapping</code></h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="keyword">MAPPING</span> <span class="keyword">FOR</span> <span class="built_in">PUBLIC</span> <span class="keyword">SERVER</span> kafka_server;</span><br></pre></td></tr></table></figure></li><li><h4 id="创建mongodb外部数据表-2"><a class="markdownIt-Anchor" href="#创建mongodb外部数据表-2"></a> 创建<code>MongoDB</code>外部数据表</h4> <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FOREIGN</span> <span class="keyword">TABLE</span> kafka_test (</span><br><span class="line">  part <span class="type">int</span> <span class="keyword">OPTIONS</span> (<span class="keyword">partition</span> <span class="string">'true'</span>),</span><br><span class="line">  offs <span class="type">bigint</span> <span class="keyword">OPTIONS</span> (<span class="keyword">offset</span> <span class="string">'true'</span>),</span><br><span class="line">  some_int <span class="type">int</span>,</span><br><span class="line">  some_text <span class="type">text</span>,</span><br><span class="line">  some_date <span class="type">date</span>,</span><br><span class="line">  some_time <span class="type">timestamp</span></span><br><span class="line">)<span class="keyword">SERVER</span> kafka_server <span class="keyword">OPTIONS</span>(</span><br><span class="line">  <span class="keyword">format</span> <span class="string">'csv'</span>, </span><br><span class="line">  topic <span class="string">'contrib_regress'</span>, </span><br><span class="line">  batch_size <span class="string">'30'</span>, </span><br><span class="line">  buffer_delay <span class="string">'100'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> PostgreSQL </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL的运算符</title>
      <link href="/2019/12/12/shu-ju-jie-gou/mysql-de-yun-suan-fu/"/>
      <url>/2019/12/12/shu-ju-jie-gou/mysql-de-yun-suan-fu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>数据库中的表结构确立后，表中的数据代表的意义就已经确定。而通过MySQL运算符进行运算，就可以获取到表结构以外的另一种数据。例如，学生表中存在一个birth字段，这个字段表示学生的出生年份。而运用MySQL的算术运算符用当前的年份减学生出生的年份，那么得到的就是这个学生的实际年龄数据。这就是MySQL的运算符，所以熟悉并掌握运算符的应用，对于操作MySQL数据库中的数据是非常有用的。下面就来熟悉一下MySQL支持的4种运算符都具备哪些功能。</p></blockquote><ul><li><p>算术运算符：执行算术运算，例如：加、减、乘、除等。</p></li><li><p>比较运算符：包括大于、小于、等于或者不等于，等等。主要用于数值的比较、字符串的匹配等方面。例如：LIKE、IN、BETWEEN AND和IS NULL等都是比较运算符，还包括正则表达式的REGEXP也是比较运算符。</p></li><li><p>逻辑运算符：包括与、或、非和异或等逻辑运算符。其返回值为布尔型，真值（1或true）和假值（0或false）。</p></li><li><p>位运算符：包括按位与、按位或、按位取反、按位异或、按位左移和按位右移等位运算符。位运算必须先将数据转换为二进制，然后在二进制格式下进行操作,运算完成后，将二进制的值转换为原来的类型，返回给用户。</p></li></ul><h3 id="算术运算符"><a class="markdownIt-Anchor" href="#算术运算符"></a> 算术运算符</h3><table><thead><tr><th>符号</th><th>作用</th><th>符号</th><th>作用</th></tr></thead><tbody><tr><td><code>+</code></td><td>加法运算</td><td><code>-</code></td><td>减法运算</td></tr><tr><td><code>*</code></td><td>乘法运算</td><td><code>/</code></td><td>除法运算</td></tr><tr><td><code>%</code></td><td>求余运算</td><td><code>DIV</code></td><td>出发运算，返回商，同『/』</td></tr><tr><td><code>MOD</code></td><td>求余运算，返回余数，同【%】</td><td></td><td></td></tr></tbody></table><h3 id="比较运算符"><a class="markdownIt-Anchor" href="#比较运算符"></a> 比较运算符</h3><table><thead><tr><th style="text-align:center">运算符</th><th>名称</th><th>示例</th><th style="text-align:center">运算符</th><th>名称</th><th>示例</th></tr></thead><tbody><tr><td style="text-align:center"><code>=</code></td><td>等于</td><td><code>id=5</code></td><td style="text-align:center"><code>&gt;</code></td><td>大于</td><td><code>id&gt;5</code></td></tr><tr><td style="text-align:center"><code>&lt;</code></td><td>小于</td><td><code>id&lt;5</code></td><td style="text-align:center"><code>&gt;=</code></td><td>大于等于</td><td><code>id&gt;=5</code></td></tr><tr><td style="text-align:center"><code>&lt;=</code></td><td>小于等于</td><td><code>id&lt;=5</code></td><td style="text-align:center"><code>&lt;&gt;</code></td><td>不等于</td><td><code>id&lt;&gt;5</code></td></tr><tr><td style="text-align:center"><code>!=</code></td><td>不等于</td><td><code>id!=5</code></td><td style="text-align:center"><code>IS NULL</code></td><td>n/a 为空</td><td><code>id IS NULL</code></td></tr><tr><td style="text-align:center"><code>IS NOT NULL</code></td><td>非空</td><td><code>id IS NOT NULL</code></td><td style="text-align:center"><code>IN</code></td><td>范围</td><td><code>id IN (3,4,5)</code></td></tr><tr><td style="text-align:center"><code>BETWEEN AND</code></td><td>范围</td><td><code>id BETWEEN 2 AND 6</code></td><td style="text-align:center"><code>NOT IN</code></td><td>范围</td><td><code>id NOT IN (3,4,5)</code></td></tr><tr><td style="text-align:center"><code>LIKE</code></td><td>模式匹配</td><td><code>name LIKE ('%Gad%')</code></td><td style="text-align:center"><code>NOT LIKE</code></td><td>模式匹配</td><td><code>name NOT LIKE ('%Gad%')</code></td></tr><tr><td style="text-align:center"><code>REGEXP</code></td><td>正则表达式</td><td><code>name REGEXP '正则表达式'</code></td><td style="text-align:center"></td><td></td><td></td></tr></tbody></table><h3 id="逻辑运算符"><a class="markdownIt-Anchor" href="#逻辑运算符"></a> 逻辑运算符</h3><table><thead><tr><th>符号</th><th>作用</th><th>符号</th><th>作用</th></tr></thead><tbody><tr><td><code>&amp;&amp;</code></td><td>与</td><td><code>AND</code></td><td>与</td></tr><tr><td><code>||</code></td><td>或</td><td><code>OR</code></td><td>或</td></tr><tr><td><code>！</code></td><td>非</td><td><code>NOT</code></td><td>非</td></tr><tr><td>XOR</td><td>异或</td><td></td><td></td></tr></tbody></table><h3 id="位运算符"><a class="markdownIt-Anchor" href="#位运算符"></a> 位运算符</h3><table><thead><tr><th>符号</th><th>名称</th><th>作用</th></tr></thead><tbody><tr><td><code>|</code></td><td>位或</td><td>对应的二进制位有一个或两个为 1 ，则该位的运算结果为 1 ，否则为 0</td></tr><tr><td><code>&amp;</code></td><td>位与</td><td>对应的二进制位都为 1 ，则该位的运算结果为 1 ，否则为 0</td></tr><tr><td><code>^</code></td><td>位异或</td><td>对应的二进制位不相同时，结果为 1 ，否则为 0</td></tr><tr><td><code>&lt;&lt;</code></td><td>位左移</td><td>使指定的二进制位都左移指定的位数，左移指定位之后，左边高位的数值将被移出并丢弃，右边低位空出的位置用 0 补齐</td></tr><tr><td><code>&gt;&gt;</code></td><td>位右移</td><td>使指定的二进制位都右移指定的位数，右移指定位之后，右边低位的数值将被移出并丢弃，左边高位空出的职位用 0 补齐</td></tr><tr><td><code>~</code></td><td>位取反</td><td>将对应的二进制数逐位反转，即 1 取反后变 0 ， 0 取反后变 1</td></tr></tbody></table><h3 id="运算符的优先级"><a class="markdownIt-Anchor" href="#运算符的优先级"></a> 运算符的优先级</h3><table><thead><tr><th>优先级</th><th>运算符</th></tr></thead><tbody><tr><td>1</td><td><code>!</code></td></tr><tr><td>2</td><td><code>~</code></td></tr><tr><td>3</td><td><code>^</code></td></tr><tr><td>4</td><td><code>*,/(DIV),%(MOD)</code></td></tr><tr><td>5</td><td><code>+,-</code></td></tr><tr><td>6</td><td><code>&gt;&gt;,&lt;&lt;</code></td></tr><tr><td>7</td><td><code>&amp;</code></td></tr><tr><td>8</td><td><code>|</code></td></tr><tr><td>9</td><td><code>=(比较运算),&lt;=&gt;,&lt;,&lt;=,&gt;,&gt;=,!=,&lt;&gt;,IN,IS NULL,LIKE,REGEXP</code></td></tr><tr><td>10</td><td><code>BETWEEN AND,CASE,WHEN,THEN,ELSE</code></td></tr><tr><td>11</td><td><code>NOT</code></td></tr><tr><td>12</td><td><code>&amp;&amp;,AND</code></td></tr><tr><td>13</td><td><code>||,OR,XOR</code></td></tr><tr><td>14</td><td><code>=(赋值运算),:=</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL 的数据结构备份</title>
      <link href="/2019/12/12/shu-ju-jie-gou/mysql-de-shu-ju-jie-gou-bei-fen/"/>
      <url>/2019/12/12/shu-ju-jie-gou/mysql-de-shu-ju-jie-gou-bei-fen/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="一-在-mysql-5711-以下时使用-mysqldump-进行备份"><a class="markdownIt-Anchor" href="#一-在-mysql-5711-以下时使用-mysqldump-进行备份"></a> 一、在 <code>MySQL-5.7.11</code> 以下时使用 <code>mysqldump</code> 进行备份</h3><table><thead><tr><th>参数</th><th>说明</th><th>简写</th></tr></thead><tbody><tr><td>–add-drop-database</td><td>在建立库之前先执行删库操作</td><td></td></tr><tr><td>–add-drop-table</td><td>在建表之前先执行删表操作</td><td></td></tr><tr><td>–add-drop-trigger</td><td>在建触发器之前先执行删触发器操作</td><td></td></tr><tr><td>–add-locks</td><td>备份表时，使用LOCK TABLES和UNLOCK TABLES。注意：这个参数不支持并行备份，需要关闭并行备份功能：–default-parallelism=0</td><td></td></tr><tr><td>–all-databases</td><td>备份所有库</td><td>-A</td></tr><tr><td>–allow-keywords</td><td>Allow creation of column names that are keywords</td><td></td></tr><tr><td>–apply-slave-statements</td><td>Include STOP SLAVE prior to CHANGE MASTER statement and START SLAVE at end of output</td><td></td></tr><tr><td>–bind-address</td><td>指定通过哪个网络接口来连接Mysql服务器（一台服务器可能有多个IP），防止同一个网卡出去影响业务。</td><td></td></tr><tr><td>–character-sets-dir</td><td>Directory where character sets are installed</td><td></td></tr><tr><td>–comments</td><td>Add comments to dump file</td><td></td></tr><tr><td>–compact</td><td>Produce more compact output</td><td></td></tr><tr><td>–compatible</td><td>它告诉 mysqldump，导出的数据将和哪种数据库或哪个旧版本的 MySQL 服务器相兼容。值可以为 ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_tables_options、no_field_options 等，要使用几个值，用逗号将它们隔开。当然了，它并不保证能完全兼容，而是尽量兼容。</td><td></td></tr><tr><td>–complete-insert</td><td>导出的数据采用包含字段名的完整 INSERT 方式，也就是把所有的值都写在一行。这么做能提高插入效率，但是可能会受到 max_allowed_packet 参数的影响而导致插入失败。因此，需要谨慎使用该参数，至少我不推荐。</td><td></td></tr><tr><td>–compress</td><td>压缩客户端和服务器传输的所有的数据</td><td>-C</td></tr><tr><td>–create-options</td><td>Include all MySQL-specific table options in CREATE TABLE statements</td><td></td></tr><tr><td>–databases</td><td>手动指定要备份的库，支持多个数据库，用空格分隔</td><td>-B</td></tr><tr><td>–debug</td><td>Write debugging log</td><td></td></tr><tr><td>–debug-check</td><td>Print debugging information when program exits</td><td></td></tr><tr><td>–debug-info</td><td>Print debugging information, memory, and CPU statistics when program exits</td><td></td></tr><tr><td>–default-auth</td><td>Authentication plugin to use</td><td></td></tr><tr><td>–default-character-set</td><td>指定备份的字符集。</td><td></td></tr><tr><td>–defaults-extra-file</td><td>Read named option file in addition to usual option files</td><td></td></tr><tr><td>–defaults-file</td><td>Read only named option file</td><td></td></tr><tr><td>–defaults-group-suffix</td><td>Option group suffix value</td><td></td></tr><tr><td>–delete-master-logs</td><td>On a master replication server, delete the binary logs after performing the dump operation</td><td></td></tr><tr><td>–disable-keys</td><td>告诉 mysqldump 在 INSERT 语句的开头和结尾增加 /*!40000 ALTER TABLE table DISABLE KEYS <em>/; 和 /</em>!40000 ALTER TABLE table ENABLE KEYS */; 语句，这能大大提高插入语句的速度，因为它是在插入完所有数据后才重建索引的。该选项只适合 MyISAM 表。</td><td></td></tr><tr><td>–dump-date</td><td>Include dump date as “Dump completed on” comment if --comments is given</td><td></td></tr><tr><td>–dump-slave</td><td>Include CHANGE MASTER statement that lists binary log coordinates of slave’s master</td><td></td></tr><tr><td>–enable-cleartext-plugin</td><td>Enable cleartext authentication plugin5.7.10</td><td></td></tr><tr><td>–events</td><td>Dump events from dumped databases</td><td></td></tr><tr><td>–extended-insert</td><td>默认情况下，mysqldump 开启 --complete-insert 模式，因此不想用它的的话，就使用本选项，设定它的值为 false 即可。</td><td></td></tr><tr><td>–fields-enclosed-by</td><td>This option is used with the --tab option and has the same meaning as the corresponding clause for LOAD DATA INFILE</td><td></td></tr><tr><td>–fields-escaped-by</td><td>This option is used with the --tab option and has the same meaning as the corresponding clause for LOAD DATA INFILE</td><td></td></tr><tr><td>–fields-optionally-enclosed-by</td><td>This option is used with the --tab option and has the same meaning as the corresponding clause for LOAD DATA INFILE</td><td></td></tr><tr><td>–fields-terminated-by</td><td>This option is used with the --tab option and has the same meaning as the corresponding clause for LOAD DATA INFILE</td><td></td></tr><tr><td>–flush-logs</td><td>Flush MySQL server log files before starting dump</td><td></td></tr><tr><td>–flush-privileges</td><td>Emit a FLUSH PRIVILEGES statement after dumping mysql database</td><td></td></tr><tr><td>–force</td><td>Continue even if an SQL error occurs during a table dump</td><td></td></tr><tr><td>–help</td><td>Display help message and exit</td><td></td></tr><tr><td>–hex-blob</td><td>使用十六进制格式导出二进制字符串字段。如果有二进制数据就必须使用本选项。影响到的字段类型有 BINARY、VARBINARY、BLOB。</td><td></td></tr><tr><td>–host</td><td>Host to connect to (IP address or hostname)</td><td></td></tr><tr><td>–ignore-error</td><td>Ignore specified errors5.7.1</td><td></td></tr><tr><td>–ignore-table</td><td>Do not dump given table</td><td></td></tr><tr><td>–include-master-host-port</td><td>Include MASTER_HOST/MASTER_PORT options in CHANGE MASTER statement produced with --dump-slave</td><td></td></tr><tr><td>–insert-ignore</td><td>Write INSERT IGNORE rather than INSERT statements</td><td></td></tr><tr><td>–lines-terminated-by</td><td>This option is used with the --tab option and has the same meaning as the corresponding clause for LOAD DATA INFILE</td><td></td></tr><tr><td>–lock-all-tables</td><td>在开始导出之前，提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭 --single-transaction 和 --lock-tables 选项。</td><td>-x</td></tr><tr><td>–lock-tables</td><td>它和 --lock-all-tables 类似，不过是锁定当前导出的数据表，而不是一下子锁定全部库下的表。本选项只适用于 MyISAM 表，如果是 Innodb 表可以用 --single-transaction 选项。</td><td></td></tr><tr><td>–log-error</td><td>Append warnings and errors to named file</td><td></td></tr><tr><td>–login-path</td><td>Read login path options from .mylogin.cnf</td><td></td></tr><tr><td>–master-data</td><td>Write the binary log file name and position to the output</td><td></td></tr><tr><td>–max_allowed_packet</td><td>Maximum packet length to send to or receive from server</td><td></td></tr><tr><td>–net_buffer_length</td><td>Buffer size for TCP/IP and socket communication</td><td></td></tr><tr><td>–no-autocommit</td><td>Enclose the INSERT statements for each dumped table within SET autocommit = 0 and COMMIT statements</td><td></td></tr><tr><td>–no-create-db</td><td>Do not write CREATE DATABASE statements</td><td></td></tr><tr><td>–no-create-info</td><td>只导出数据，而不添加 CREATE TABLE 语句。</td><td>-t</td></tr><tr><td>–no-data</td><td>不导出任何数据，只导出数据库表结构。</td><td>-d</td></tr><tr><td>–no-defaults</td><td>Read no option files</td><td></td></tr><tr><td>–no-set-names</td><td>Same as --skip-set-charset</td><td></td></tr><tr><td>–no-tablespaces</td><td>Do not write any CREATE LOGFILE GROUP or CREATE TABLESPACE statements in output</td><td></td></tr><tr><td>–opt</td><td>这只是一个快捷选项，等同于同时添加 --add-drop-tables --add-locking --create-option --disable-keys --extended-insert --lock-tables --quick --set-charset 选项。本选项能让 mysqldump 很快的导出数据，并且导出的数据能很快导回。该选项默认开启，但可以用 --skip-opt 禁用。注意，如果运行 mysqldump 没有指定 --quick 或 --opt 选项，则会将整个结果集放在内存中。如果导出大数据库的话可能会出现问题。</td><td></td></tr><tr><td>–order-by-primary</td><td>Dump each table’s rows sorted by its primary key, or by its first unique index</td><td></td></tr><tr><td>–password</td><td>备份需要的密码</td><td>-p</td></tr><tr><td>–pipe</td><td>On Windows, connect to server using named pipe</td><td></td></tr><tr><td>–plugin-dir</td><td>Directory where plugins are installed</td><td></td></tr><tr><td>–port</td><td>备份数据库的TCP/IP端口</td><td></td></tr><tr><td>–print-defaults</td><td>Print default options</td><td></td></tr><tr><td>–protocol</td><td>指定连接服务器的协议{TCP/SOCKET/PIPE/MEMORY}</td><td></td></tr><tr><td>–quick</td><td>该选项在导出大表时很有用，它强制 mysqldump 从服务器查询取得记录直接输出而不是取得所有记录后将它们缓存到内存中。</td><td>-q</td></tr><tr><td>–quote-names</td><td>Quote identifiers within backtick characters</td><td></td></tr><tr><td>–replace</td><td>Write REPLACE statements rather than INSERT statements</td><td></td></tr><tr><td>–result-file</td><td>Direct output to a given file</td><td></td></tr><tr><td>–routines</td><td>导出存储过程以及自定义函数。</td><td>-R</td></tr><tr><td>–secure-auth</td><td>Do not send passwords to server in old (pre-4.1) format5.7.45.7.5</td><td></td></tr><tr><td>–set-charset</td><td>Add SET NAMES default_character_set to output</td><td></td></tr><tr><td>–set-gtid-purged</td><td>Whether to add SET @@GLOBAL.GTID_PURGED to output</td><td></td></tr><tr><td>–shared-memory-base-name</td><td>The name of shared memory to use for shared-memory connections</td><td></td></tr><tr><td>–single-transaction</td><td>该选项在导出数据之前提交一个 BEGIN SQL语句，BEGIN 不会阻塞任何应用程序且能保证导出时数据库的一致性状态。它只适用于事务表，例如 InnoDB 和 BDB。本选项和 --lock-tables 选项是互斥的，因为 LOCK TABLES 会使任何挂起的事务隐含提交。要想导出大表的话，应结合使用 --quick 选项。</td><td></td></tr><tr><td>–skip-add-drop-table</td><td>Do not add a DROP TABLE statement before each CREATE TABLE statement</td><td></td></tr><tr><td>–skip-add-locks</td><td>Do not add locks</td><td></td></tr><tr><td>–skip-comments</td><td>Do not add comments to dump file</td><td></td></tr><tr><td>–skip-compact</td><td>Do not produce more compact output</td><td></td></tr><tr><td>–skip-disable-keys</td><td>Do not disable keys</td><td></td></tr><tr><td>–skip-extended-insert</td><td>Turn off extended-insert</td><td></td></tr><tr><td>–skip-opt</td><td>Turn off options set by --opt</td><td></td></tr><tr><td>–skip-quick</td><td>Do not retrieve rows for a table from the server a row at a time</td><td></td></tr><tr><td>–skip-quote-names</td><td>Do not quote identifiers</td><td></td></tr><tr><td>–skip-set-charset</td><td>Do not write SET NAMES statement</td><td></td></tr><tr><td>–skip-triggers</td><td>Do not dump triggers</td><td></td></tr><tr><td>–skip-tz-utc</td><td>Turn off tz-utc</td><td></td></tr><tr><td>–socket</td><td>For connections to localhost, the Unix socket file to use</td><td></td></tr><tr><td>–ssl</td><td>Enable encrypted connection</td><td></td></tr><tr><td>–ssl-ca</td><td>File that contains list of trusted SSL Certificate Authorities</td><td></td></tr><tr><td>–ssl-capath</td><td>Directory that contains trusted SSL Certificate Authority certificate files</td><td></td></tr><tr><td>–ssl-cert</td><td>File that contains X509 certificate</td><td></td></tr><tr><td>–ssl-cipher</td><td>List of permitted ciphers for connection encryption</td><td></td></tr><tr><td>–ssl-crl</td><td>File that contains certificate revocation lists</td><td></td></tr><tr><td>–ssl-crlpath</td><td>Directory that contains certificate revocation list files</td><td></td></tr><tr><td>–ssl-key</td><td>File that contains X509 key</td><td></td></tr><tr><td>–ssl-mode</td><td>Security state of connection to server5.7.11</td><td></td></tr><tr><td>–ssl-verify-server-cert</td><td>Verify host name against server certificate Common Name identity</td><td></td></tr><tr><td>–tab</td><td>Produce tab-separated data files</td><td></td></tr><tr><td>–tables</td><td>指定备份的表，多个用逗号分隔</td><td></td></tr><tr><td>–tls-version</td><td>Protocols permitted for encrypted connections5.7.10</td><td></td></tr><tr><td>–triggers</td><td>同时导出触发器。该选项默认启用，用 --skip-triggers 禁用它。</td><td></td></tr><tr><td>–tz-utc</td><td>Add SET TIME_ZONE=’+00:00’ to dump file</td><td></td></tr><tr><td>–user</td><td>MySQL user name to use when connecting to server</td><td></td></tr><tr><td>–verbose</td><td>Verbose mode</td><td></td></tr><tr><td>–version</td><td>Display version information and exit</td><td></td></tr><tr><td>–where</td><td>Dump only rows selected by given WHERE condition</td><td></td></tr><tr><td>–xml</td><td>Produce XML output</td><td></td></tr></tbody></table><h3 id="二-在-mysql-5711-及以上版本时使用-mysqlpump-进行备份"><a class="markdownIt-Anchor" href="#二-在-mysql-5711-及以上版本时使用-mysqlpump-进行备份"></a> 二、在 <code>MySQL-5.7.11</code> 及以上版本时使用 <code>mysqlpump</code> 进行备份</h3><table><thead><tr><th>参数</th><th>说明</th><th>简写</th></tr></thead><tbody><tr><td>–add-drop-database</td><td>在建立库之前先执行删库操作。</td><td></td></tr><tr><td>–add-drop-table</td><td>在建表之前先执行删表操作。</td><td></td></tr><tr><td>–add-drop-user</td><td>在CREATE USER语句之前增加DROP USER，注意：这个参数需要和–users一起使用，否者不生效。</td><td></td></tr><tr><td>–add-locks</td><td>备份表时，使用LOCK TABLES和UNLOCK TABLES。注意：这个参数不支持并行备份，需要关闭并行备份功能：–default-parallelism=0</td><td></td></tr><tr><td>–all-databases</td><td>备份所有库</td><td>-A</td></tr><tr><td>–bind-address</td><td>指定通过哪个网络接口来连接Mysql服务器（一台服务器可能有多个IP），防止同一个网卡出去影响业务。</td><td></td></tr><tr><td>–character-sets-dir</td><td>Directory where character sets are installed</td><td></td></tr><tr><td>–complete-insert</td><td>dump出包含所有列的完整insert语句。</td><td></td></tr><tr><td>–compress</td><td>压缩客户端和服务器传输的所有的数据</td><td>-C</td></tr><tr><td>–compress-output</td><td>默认不压缩输出，目前可以使用的压缩算法有LZ4和ZLIB。</td><td></td></tr><tr><td>–databases</td><td>手动指定要备份的库，支持多个数据库，用空格分隔</td><td>-B</td></tr><tr><td>–debugWrite</td><td>debugging log</td><td></td></tr><tr><td>–debug-check</td><td>Print debugging information when program exits</td><td></td></tr><tr><td>–debug-info</td><td>Print debugging information, memory, and CPU statistics when program exits</td><td></td></tr><tr><td>–default-auth</td><td>Authentication plugin to use</td><td></td></tr><tr><td>–default-character-set</td><td>指定备份的字符集</td><td></td></tr><tr><td>–default-parallelism</td><td>指定并行线程数，默认是2，如果设置成0，表示不使用并行备份。注意：每个线程的备份步骤是：先create table但不建立二级索引（主键会在create table时候建立），再写入数据，最后建立二级索引。</td><td></td></tr><tr><td>–defaults-extra-file</td><td>Read named option file in addition to usual option files</td><td></td></tr><tr><td>–defaults-file</td><td>Read only named option file</td><td></td></tr><tr><td>–defaults-group-suffix</td><td>Option group suffix value</td><td></td></tr><tr><td>–defer-table-indexes</td><td>延迟创建索引，直到所有数据都加载完之后，再创建索引，默认开启。若关闭则会和mysqldump一样：先创建一个表和所有索引，再导入数据，因为在加载还原数据的时候要维护二级索引的开销，导致效率比较低。关闭使用参数：–skip–defer-table-indexes。</td><td></td></tr><tr><td>–events</td><td>备份数据库的事件，默认开启，关闭使用–skip-events参数。</td><td></td></tr><tr><td>–exclude-databases</td><td>备份排除该参数指定的数据库，多个用逗号分隔</td><td></td></tr><tr><td>–exclude-events</td><td>备份排除该参数指定的事件，多个用逗号分隔</td><td></td></tr><tr><td>–exclude-routines</td><td>备份排除该参数指定的自定义函数和存储过程，多个用逗号分隔</td><td></td></tr><tr><td>–exclude-tables</td><td>备份排除该参数指定的表，多个用逗号分隔</td><td></td></tr><tr><td>–exclude-triggers</td><td>备份排除该参数指定的触发器，多个用逗号分隔</td><td></td></tr><tr><td>–exclude-users</td><td>备份排除该参数指定的用户，多个用逗号分隔</td><td></td></tr><tr><td>–extended-insert</td><td>Use multiple-row INSERT syntax</td><td></td></tr><tr><td>–help</td><td>Display help message and exit</td><td></td></tr><tr><td>–hex-blob</td><td>Dump binary columns using hexadecimal notation</td><td></td></tr><tr><td>–host</td><td>Host to connect to (IP address or hostname)</td><td></td></tr><tr><td>–include-databases</td><td>指定备份数据库，多个用逗号分隔</td><td></td></tr><tr><td>–include-events</td><td>指定备份的事件，多个用逗号分隔</td><td></td></tr><tr><td>–include-routines</td><td>指定备份的自定义函数和存储过程，多个用逗号分隔</td><td></td></tr><tr><td>–include-tables</td><td>指定备份的表，多个用逗号分隔</td><td></td></tr><tr><td>–include-triggers</td><td>指定备份的触发器，多个用逗号分隔</td><td></td></tr><tr><td>–include-users</td><td>指定备份的用户，多个用逗号分隔</td><td></td></tr><tr><td>–insert-ignore</td><td>备份用insert ignore语句代替insert语句。</td><td></td></tr><tr><td>–log-error-file</td><td>备份出现的warnings和erros信息输出到一个指定的文件</td><td></td></tr><tr><td>–login-path</td><td>Read login path options from .mylogin.cnf</td><td></td></tr><tr><td>–max-allowed-packet</td><td>备份时用于client/server直接通信的最大buffer包的大小</td><td></td></tr><tr><td>–net-buffer-length</td><td>Buffer size for TCP/IP and socket communication</td><td></td></tr><tr><td>–no-create-db</td><td>Do not write CREATE DATABASE statements</td><td></td></tr><tr><td>–no-create-info</td><td>Do not write CREATE TABLE statements that re-create each dumped table</td><td></td></tr><tr><td>–no-defaults</td><td>Read no option files</td><td></td></tr><tr><td>–parallel-schemas</td><td>Specify schema-processing parallelism</td><td></td></tr><tr><td>–password</td><td>备份需要的密码</td><td>-p</td></tr><tr><td>–plugin-dir</td><td>Directory where plugins are installed</td><td></td></tr><tr><td>–port</td><td>备份数据库的TCP/IP端口</td><td></td></tr><tr><td>–print-defaults</td><td>Print default options</td><td></td></tr><tr><td>–protocol</td><td>指定连接服务器的协议{TCP/SOCKET/PIPE/MEMORY}</td><td></td></tr><tr><td>–replace</td><td>备份出来replace into语句</td><td></td></tr><tr><td>–result-file</td><td>Direct output to a given file</td><td></td></tr><tr><td>–routines</td><td>备份出来包含存储过程和函数，默认开启，需要对 mysql.proc表有查看权限。生成的文件中会包含CREATE PROCEDURE 和 CREATE FUNCTION语句以用于恢复，关闭则需要用–skip-routines参数。</td><td></td></tr><tr><td>–secure-auth</td><td>Do not send passwords to server in old (pre-4.1) format</td><td></td></tr><tr><td>–set-charset</td><td>备份文件里写SET NAMES default_character_set 到输出，此参默认开启。 – skip-set-charset禁用此参数，不会在备份文件里面写出set names…</td><td></td></tr><tr><td>–set-gtid-purged</td><td>Whether to add SET @@GLOBAL.GTID_PURGED to output5.7.18</td><td></td></tr><tr><td>–single-transaction</td><td>该参数在事务隔离级别设置成Repeatable Read，并在dump之前发送start transaction 语句给服务端。这在使用innodb时很有用，因为在发出start transaction时，保证了在不阻塞任何应用下的一致性状态。对myisam和memory等非事务表，还是会改变状态的，当使用此参的时候要确保没有其他连接在使用ALTER TABLE、CREATE TABLE、DROP TABLE、RENAME TABLE、TRUNCATE TABLE等语句，否则会出现不正确的内容或则失败。–add-locks和此参互斥，在mysql5.7.11之前，–default-parallelism大于1的时候和此参也互斥，必须使用–default-parallelism=0。5.7.11之后解决了–single-transaction和–default-parallelism的互斥问题。</td><td></td></tr><tr><td>–skip-definer</td><td>忽略那些创建视图和存储过程用到的 DEFINER 和 SQL SECURITY 语句，恢复的时候，会使用默认值，否则会在还原的时候看到没有DEFINER定义时的账号而报错。</td><td></td></tr><tr><td>–skip-dump-rows</td><td>只备份表结构，不备份数据。注意：mysqldump支持–no-data，mysqlpump不支持–no-data</td><td>-d</td></tr><tr><td>–socket</td><td>对于连接到localhost，Unix使用套接字文件，在Windows上是命名管道的名称使用</td><td>-S</td></tr><tr><td>–ssl</td><td>Enable encrypted connection</td><td></td></tr><tr><td>–ssl-ca</td><td>File that contains list of trusted SSL Certificate Authorities</td><td></td></tr><tr><td>–ssl-capath</td><td>Directory that contains trusted SSL Certificate Authority certificate files</td><td></td></tr><tr><td>–ssl-cert</td><td>File that contains X509 certificate</td><td></td></tr><tr><td>–ssl-cipher</td><td>List of permitted ciphers for connection encryption</td><td></td></tr><tr><td>–ssl-crl</td><td>File that contains certificate revocation lists</td><td></td></tr><tr><td>–ssl-crlpath</td><td>Directory that contains certificate revocation list files</td><td></td></tr><tr><td>–ssl-key</td><td>File that contains X509 key</td><td></td></tr><tr><td>–ssl-mode</td><td>Security state of connection to server5.7.11</td><td></td></tr><tr><td>–ssl-verify-server-cert</td><td>Verify host name against server certificate Common Name identity</td><td></td></tr><tr><td>–tls-version</td><td>Protocols permitted for encrypted connections5.7.10</td><td></td></tr><tr><td>–triggers</td><td>备份出来包含触发器，默认开启，使用–skip-triggers来关闭。</td><td></td></tr><tr><td>–tz-utc</td><td>备份时会在备份文件的最前几行添加SET TIME_ZONE=’+00:00’。注意：如果还原的服务器不在同一个时区并且还原表中的列有timestamp字段，会导致还原出来的结果不一致。默认开启该参数，用 --skip-tz-utc来关闭参数。</td><td></td></tr><tr><td>–user</td><td>备份时候的用户名</td><td>-u</td></tr><tr><td>–users</td><td>备份数据库用户，备份的形式是CREATE USER…，GRANT…，只备份数据库账号可以通过如下命令</td><td></td></tr><tr><td>–version</td><td>Display version information and exit5.7.9</td><td></td></tr><tr><td>–watch-progress</td><td>定期显示进度的完成，包括总数表、行和其他对象。该参数默认开启，用–skip-watch-progress来关闭。</td><td></td></tr></tbody></table><h3 id="三-备份列子"><a class="markdownIt-Anchor" href="#三-备份列子"></a> 三、备份列子</h3><ul><li>备份指定数据库的结构和数据（包含结构、自定义函数、触发器和存储过程）</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump -u root -p --add-drop-database --add-drop-table --triggers --routines --events --skip-definer lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/backup.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump -u root -p --opt --routines --triggers --events lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/backup.sql</span><br></pre></td></tr></table></figure><ul><li>备份数据库结构 （包含结构、自定义函数、触发器和存储过程）</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump  -u root -p --skip-dump-rows --add-drop-database --add-drop-table --triggers --routines --events --skip-definer --databases lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/tables_structure.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump  -u root -p --no-data --opt --add-drop-trigger --triggers --routines --events --databases lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/tables_structure.sql</span><br></pre></td></tr></table></figure><ul><li>仅备份数据</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump -u root -p --no-create-db --no-create-info --skip-triggers --skip-routines lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump -u root -p --quick --no-create-db --no-create-info --skip-triggers lijiang_mq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</span><br></pre></td></tr></table></figure><ul><li>备份指定表的结构和数据（包含结构和触发器）</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump -u root -p --add-drop-table --triggers --skip-definer --databases lijiang_mq --include-tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/backup.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump -u root -p --opt --add-drop-trigger --triggers --databases lijiang_mq --tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/backup.sql</span><br></pre></td></tr></table></figure><ul><li>备份指定表的结构（包含结构和触发器）</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump  -u root -p --skip-dump-rows --add-drop-database --add-drop-table --triggers --skip-definer --databases lijiang_mq --include-tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/lijiang_rocketmq.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump  -u root -p --no-data --no-create-db --no-create-info --opt --add-drop-trigger --triggers --databases lijiang_mq --tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/lijiang_rocketmq.sql</span><br></pre></td></tr></table></figure><ul><li>仅备份指定表的数据</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mysql 5.7.11 或以上版本</span><br><span class="line">mysqlpump -u root -p --no-create-db --no-create-info --skip-triggers --skip-routines --databases lijiang_mq --include-tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</span><br><span class="line"></span><br><span class="line"># mysql 5.7.11 以下版本</span><br><span class="line">mysqldump -u root -p --quick --no-create-db --no-create-info --skip-triggers --databases lijiang_mq --tables=lijiang_rocketmq &gt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</span><br></pre></td></tr></table></figure><h3 id="四-恢复"><a class="markdownIt-Anchor" href="#四-恢复"></a> 四、恢复</h3><ul><li>直接用 mysql 客户端</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p lijiang_mq &lt; /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</span><br></pre></td></tr></table></figure><ul><li>在 mysql 客户端中使用 SOURCE 命令</li></ul><pre class="highlight"><code class="mysql">mysql -uroot -pmysql&gt; SOURCE /Users/gadflybsd/PhpstormProjects/LiJiangCheLiangHuiJuTongJiXiTong/sql/data.sql</code></pre>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL的流程控制语句</title>
      <link href="/2019/12/12/shu-ju-jie-gou/mysql-de-liu-cheng-kong-zhi-yu-ju/"/>
      <url>/2019/12/12/shu-ju-jie-gou/mysql-de-liu-cheng-kong-zhi-yu-ju/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>  mysql 操作同样有循环语句操作，网上说有3中标准的循环方式： while 循环 、 loop 循环和repeat循环。还有一种非标准的循环： goto。 鉴于goto语句的跳跃性会造成使用的的思维混乱，所以不建议使用。这几个循环语句的格式如下：</p></blockquote><ul><li><strong>条件判断语句</strong><ul><li>[x] <em><code>IF ... else</code></em></li></ul></li><li><strong>分支语句</strong><ul><li>[x] <em><code>case</code></em></li></ul></li><li><strong>循环语句</strong><ul><li>[x] <em><code>WHILE……DO……END WHILE</code></em></li><li>[x] <em><code>REPEAT……UNTIL END REPEAT</code></em></li><li>[x] <em><code>LOOP……END LOOP</code></em></li><li><s><em><code>GOTO</code></em></s></li></ul></li></ul><h2 id="一-条件判断语句"><a class="markdownIt-Anchor" href="#一-条件判断语句"></a> 一、条件判断语句</h2><h2 id="-0-"><a class="markdownIt-Anchor" href="#-0-"></a> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop procedure if exists test_if;  </span><br><span class="line">delimiter $$ </span><br><span class="line">create procedure test_if(in x int)  </span><br><span class="line">  begin  </span><br><span class="line">    if x=1 then  </span><br><span class="line">      select &apos;OK&apos;;  </span><br><span class="line">    elseif x=0 then  </span><br><span class="line">      select &apos;No&apos;;  </span><br><span class="line">    else   </span><br><span class="line">      select &apos;good&apos;;  </span><br><span class="line">    end if;  </span><br><span class="line">  end  </span><br><span class="line">delimiter $$  </span><br><span class="line">call test_if(0);</span><br></pre></td></tr></table></figure></h2><h2 id="二-分支语句"><a class="markdownIt-Anchor" href="#二-分支语句"></a> 二、分支语句</h2><h2 id="-1-"><a class="markdownIt-Anchor" href="#-1-"></a> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop procedure if exists test_case;  </span><br><span class="line">delimiter $$  </span><br><span class="line">create procedure test_case(in x int)  </span><br><span class="line">  begin  </span><br><span class="line">    case x  </span><br><span class="line">      when 1 then </span><br><span class="line">        select &apos;OK&apos;;  </span><br><span class="line">      when 0 then </span><br><span class="line">        select &apos;No&apos;;  </span><br><span class="line">      else </span><br><span class="line">        select &apos;good&apos;;  </span><br><span class="line">    end case;  </span><br><span class="line">  end  </span><br><span class="line">delimiter $$  </span><br><span class="line">call test_case(9);</span><br></pre></td></tr></table></figure></h2><h2 id="三-循环语句"><a class="markdownIt-Anchor" href="#三-循环语句"></a> 三、循环语句</h2><ul><li><h3 id="while语句"><a class="markdownIt-Anchor" href="#while语句"></a> while语句</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delimiter $$　　　　// 定义结束符为 $$</span><br><span class="line">drop procedure if exists wk;  //  删除 已有的 存储过程</span><br><span class="line">create procedure wk()　　　　　　//　 创建新的存储过程</span><br><span class="line">  begin </span><br><span class="line">    declare i int;　　　　　　　　　　// 变量声明</span><br><span class="line">    set i = 1;　　　　　</span><br><span class="line">    while i &lt; 11 do 　　　　　　　　　　//   循环体</span><br><span class="line">      insert into user_profile (uid) values (i);</span><br><span class="line">      set i = i +1;</span><br><span class="line">    end while;</span><br><span class="line">  end $$</span><br></pre></td></tr></table></figure></li></ul><hr /><ul><li><h3 id="repeat-语句"><a class="markdownIt-Anchor" href="#repeat-语句"></a> REPEAT 语句</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">drop procedure if exists looppc;</span><br><span class="line">create procedure looppc()</span><br><span class="line">  begin </span><br><span class="line">    declare i int;</span><br><span class="line">    set i = 1;</span><br><span class="line">    repeat </span><br><span class="line">        insert into user_profile_company (uid) values (i+1);</span><br><span class="line">        set i = i + 1;</span><br><span class="line">    until i &gt;= 20</span><br><span class="line">    end repeat;</span><br><span class="line">  end $$</span><br></pre></td></tr></table></figure></li></ul><hr /><ul><li><h3 id="loop-语句"><a class="markdownIt-Anchor" href="#loop-语句"></a> LOOP 语句</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">drop procedure if exists lopp;</span><br><span class="line">create procedure lopp()</span><br><span class="line">  begin </span><br><span class="line">    declare i int ;</span><br><span class="line">    set i = 1;</span><br><span class="line">    lp1 : LOOP　　　//  lp1 为循环体名称   LOOP 为关键字</span><br><span class="line">        insert into user_profile (uid) values (i);</span><br><span class="line">        set i = i+1;</span><br><span class="line">        if i &gt; 30 then</span><br><span class="line">    leave lp1;　　　　　　　　　　　　　　//  离开循环体</span><br><span class="line">        end if;</span><br><span class="line">    end LOOP;　　　　　　　　　　　　　　//  结束循环</span><br><span class="line">  end $$</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7下安装Zookeep+Kafka</title>
      <link href="/2019/12/12/cao-zuo-xi-tong/centos7-xia-an-zhuang-zookeep-kafka/"/>
      <url>/2019/12/12/cao-zuo-xi-tong/centos7-xia-an-zhuang-zookeep-kafka/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="一-zookeeper-概述"><a class="markdownIt-Anchor" href="#一-zookeeper-概述"></a> 一 、 <code>Zookeeper</code> 概述</h1><blockquote><p>  <code>ZooKeeper</code>是一个分布式的，开放源码的分布式应用程序协调服务，是<code>Google</code>的<code>Chubby</code>一个开源的实现，是<code>Hadoop</code>和<code>Hbase</code>的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。</p><p>  <code>ZooKeeper</code>的目标就是封装好复杂易出错的关键服务，将简单易用的接口和性能高效、功能稳定的系统提供给用户。</p><p>  <a href="http://zookeeper.apache.org" target="_blank" rel="noopener">Zookeeper的官方网站</a>可以学习</p></blockquote><ol><li><h2 id="下载zookeeper"><a class="markdownIt-Anchor" href="#下载zookeeper"></a> 下载<code>Zookeeper</code></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.5.6/apache-zookeeper-3.5.6-bin.tar.gz</span><br></pre></td></tr></table></figure></li><li><h2 id="安装zookeeper"><a class="markdownIt-Anchor" href="#安装zookeeper"></a> 安装<code>Zookeeper</code></h2></li></ol>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ mkdir /usr/local/zookeeper</span><br><span class="line">~$ cd /usr/local/zookeeper</span><br><span class="line">~$ tar -zxvf ~/apache-zookeeper-3.5.6-bin.tar.gz</span><br></pre></td></tr></table></figure><ol start="3"><li><h2 id="配置zookeeper"><a class="markdownIt-Anchor" href="#配置zookeeper"></a> 配置<code>Zookeeper</code></h2></li></ol>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~4 cd apache-zookeeper-3.5.6-bin</span><br><span class="line">~$ cp conf/zoo_sample.cfg conf/zoo.cfg</span><br><span class="line">~$ vi conf/zoo.cfg</span><br><span class="line">admin.serverPort=8888</span><br></pre></td></tr></table></figure><ol start="4"><li><h2 id="设置开机启动"><a class="markdownIt-Anchor" href="#设置开机启动"></a> 设置开机启动</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi /etc/profile</span><br><span class="line">export ZOOKEEPER_HOME=/usr/local/zookeeper/apache-zookeeper-3.5.6-bin/</span><br><span class="line">export PATH=$ZOOKEEPER_HOME/bin:$PATH</span><br><span class="line">~$ source /etc/profile</span><br><span class="line">~$ cd /etc/rc.d/init.d</span><br><span class="line">~$ touch zookeeper</span><br><span class="line">~$ vi /etc/rc.d/init.d/zookeeper</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">chkconfig: 2345 10 90  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">description: service zookeeper  </span></span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_172</span><br><span class="line">ZOOKEEPER_HOME=/usr/local/zookeeper/apache-zookeeper-3.5.6/</span><br><span class="line">export ZOO_LOG_DIR=/usr/local/zookeeper/log</span><br><span class="line">su root $&#123;ZOOKEEPER_HOME&#125;/bin/zkServer.sh "$1"</span><br><span class="line">~$ chmod +x /etc/rc.d/init.d/zookeeper</span><br><span class="line">~$ chkconfig --add zookeeper</span><br><span class="line">~$ service zookeeper start</span><br></pre></td></tr></table></figure></li><li><h2 id="检查测试zookeeper"><a class="markdownIt-Anchor" href="#检查测试zookeeper"></a> 检查测试<code>Zookeeper</code></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看状态</span></span><br><span class="line">~$ service  zookeeper   status</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看2181端口是否启用</span></span><br><span class="line">~$ lsof  -i:2181</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看网络状态</span></span><br><span class="line">~$ netstat   -lntup</span><br></pre></td></tr></table></figure></li></ol><h1 id="二-kafka-概述"><a class="markdownIt-Anchor" href="#二-kafka-概述"></a> 二、<code>Kafka</code> 概述</h1><blockquote><p>  <code>Kafka</code>是由<code>Apache</code>软件基金会开发的一个开源流处理平台，由<code>Scala</code>和<code>Java</code>编写。<code>Kafka</code>是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据。 这种动作（网页浏览，搜索和其他用户的行动）是在现代网络上的许多社会功能的一个关键因素。 这些数据通常是由于吞吐量的要求而通过处理日志和日志聚合来解决。 对于像<code>Hadoop</code>的一样的日志数据和离线分析系统，但又要求实时处理的限制，这是一个可行的解决方案。Kafka的目的是通过<code>Hadoop</code>的并行加载机制来统一线上和离线的消息处理，也是为了通过集群来提供实时的消息.<code>Kafka</code> 支持<code>Java</code>及多种其它语言客户端，可与<code>Hadoop</code>、<code>Storm</code>、<code>Spark</code>等其它大数据工具结合使用。</p></blockquote><ul><li><h2 id="下载kafka"><a class="markdownIt-Anchor" href="#下载kafka"></a> 下载<code>Kafka</code></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.3.1/kafka_2.12-2.3.1.tgz</span><br></pre></td></tr></table></figure></li><li><h2 id="安装kafka"><a class="markdownIt-Anchor" href="#安装kafka"></a> 安装<code>Kafka</code></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ mkdir /usr/local/kafka</span><br><span class="line">~$ tar -zxvf ~/kafka_2.12-2.3.1.tgz</span><br></pre></td></tr></table></figure></li><li><h2 id="配置kafka"><a class="markdownIt-Anchor" href="#配置kafka"></a> 配置<code>Kafka</code></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ cd /usr/local/server/kafka_2.12-2.3.1/config/</span><br><span class="line">~$ vi server.properties</span><br></pre></td></tr></table></figure></li><li><h2 id="验证"><a class="markdownIt-Anchor" href="#验证"></a> 验证</h2><ul><li><h3 id="后台启动zookeeper"><a class="markdownIt-Anchor" href="#后台启动zookeeper"></a> 后台启动<code>zookeeper</code></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ /usr/local/kafka/kafka_2.12-2.3.1</span><br><span class="line">~$ bin/zookeeper-server-start.sh -daemon config/zookeeper.propertie</span><br></pre></td></tr></table></figure></li><li><h3 id="后台启动kafka"><a class="markdownIt-Anchor" href="#后台启动kafka"></a> 后台启动<code>kafka</code></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ /usr/local/kafka/kafka_2.12-2.3.1</span><br><span class="line">~$ bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure></li><li><h3 id="创建topic"><a class="markdownIt-Anchor" href="#创建topic"></a> 创建<code>topic</code></h3><blockquote><p>使用<code>kafka-topics.sh</code> 创建单分区单副本的<code>topic test</code></p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ bin/kafka-topics.sh --create --zookeeper 192.168.199.254:2181 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure></li><li><h3 id="产生消息命令"><a class="markdownIt-Anchor" href="#产生消息命令"></a> 产生消息命令</h3><blockquote><p>使用<code>kafka-console-producer.sh</code>  命令向<code>topic test</code>发送消息</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ bin/kafka-console-producer.sh --broker-list 192.168.199.254:9092 --topic test</span><br></pre></td></tr></table></figure></li><li><h3 id="消费消息"><a class="markdownIt-Anchor" href="#消费消息"></a> 消费消息</h3><blockquote><p>使用<code>kafka-console-consumer.sh</code> 命令接受来自<code>topic test</code>的消息</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ bin/kafka-console-consumer.sh --bootstrap-server 192.168.199.254:9092 --topic test --from-beginning</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="设置开机启动kafka"><a class="markdownIt-Anchor" href="#设置开机启动kafka"></a> 设置开机启动<code>Kafka</code></h2><ul><li><h3 id="在etcrcdinitd新建一个kafka文件内容如下"><a class="markdownIt-Anchor" href="#在etcrcdinitd新建一个kafka文件内容如下"></a> 在<code>/etc/rc.d/init.d</code>新建一个<code>kafka</code>文件，内容如下</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ cd /etc/rc.d/init.d</span><br><span class="line">~$ touch kafka</span><br><span class="line">~$ vi kafka</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 2345 10 90 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Kafka</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> File : Kafka</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description: Starts and stops the Kafka server <span class="keyword">for</span> SASL/PLAIN</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line">source /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line">SERVER_HOME=/usr/local/server</span><br><span class="line">KAFKA_HOME=$&#123;SERVER_HOME&#125;/kafka_2.12-2.3.1/bin</span><br><span class="line">LOG_PATH=$&#123;SERVER_HOME&#125;/log</span><br><span class="line">KAFKA_USER=root</span><br><span class="line">export JRE_HOME=/usr/java/jdk1.8.0_172/jre</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_172</span><br><span class="line">export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line">[ -e /etc/sysconfig/kafka ] &amp;&amp; . /etc/sysconfig/kafka</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> See how we were called.</span></span><br><span class="line">case "$1" in</span><br><span class="line"></span><br><span class="line">  start)</span><br><span class="line">    echo -n "Starting Kafka:"</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER -c "nohup $KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties &gt; $LOG_PATH/server.out 2&gt; $LOG_PATH/server.err &amp;"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  stop)</span><br><span class="line">    echo -n "Stopping Kafka: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line">  hardstop)</span><br><span class="line">    echo -n "Stopping (hard) Kafka: "</span><br><span class="line">    /sbin/runuser -s /bin/sh $KAFKA_USER  -c "ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print \$2&#125;' | xargs kill -9"</span><br><span class="line">    echo " done."</span><br><span class="line">    exit 0</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  status)</span><br><span class="line">    c_pid=`ps -ef | grep kafka.Kafka | grep -v grep | awk '&#123;print $2&#125;'`</span><br><span class="line">    if [ "$c_pid" = "" ] ; then</span><br><span class="line">      echo "Stopped"</span><br><span class="line">      exit 3</span><br><span class="line">    else</span><br><span class="line">      echo "Running $c_pid"</span><br><span class="line">      exit 0</span><br><span class="line">    fi</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  restart)</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">  *)</span><br><span class="line">    echo "Usage: kafka &#123;start|stop|hardstop|status|restart&#125;"</span><br><span class="line">    exit 1</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line">esac</span><br></pre></td></tr></table></figure><ul><li><h3 id="赋予脚本可执行权限"><a class="markdownIt-Anchor" href="#赋予脚本可执行权限"></a> 赋予脚本可执行权限</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x kafka</span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="添加到开机启动项"><a class="markdownIt-Anchor" href="#添加到开机启动项"></a> 添加到开机启动项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig --add kafka</span><br></pre></td></tr></table></figure></li><li><h3 id="设置开机启动-2"><a class="markdownIt-Anchor" href="#设置开机启动-2"></a> 设置开机启动</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig kafka on</span><br></pre></td></tr></table></figure></li><li><h3 id="查看开机启动项确认kafka已添加"><a class="markdownIt-Anchor" href="#查看开机启动项确认kafka已添加"></a> 查看开机启动项，确认<code>kafka</code>已添加</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig --list</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="监控插件-kafka-eagle"><a class="markdownIt-Anchor" href="#监控插件-kafka-eagle"></a> 监控插件 <code>kafka eagle</code></h2></li></ul><ol><li><h3 id="安装包下载"><a class="markdownIt-Anchor" href="#安装包下载"></a> 安装包下载</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ wget https://github.com/smartloli/kafka-eagle-bin/archive/v1.4.1.tar.gz</span><br><span class="line">~$ cd /usr/local/kafka</span><br><span class="line">~$ tar -zxvf ~/v1.4.1.tar.gz</span><br><span class="line">~$ mv v1.4.1 afka-eagle-1.4.1</span><br></pre></td></tr></table></figure></li><li><h3 id="修改环境变量增加-java_hone-和-ke_home"><a class="markdownIt-Anchor" href="#修改环境变量增加-java_hone-和-ke_home"></a> 修改环境变量，增加 <code>JAVA_HONE</code> 和 <code>KE_HOME</code></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">kafka-eagle-web-1.3.0</span></span><br><span class="line">export KE_HOME=/usr/local/kafka/kafka-eagle-web-1.4.1/</span><br><span class="line">export PATH=$PATH:$KE_HOME/bin</span><br><span class="line">~$ source /etc/profile</span><br></pre></td></tr></table></figure></li><li><h3 id="修改-kafka-eagle-配置文件"><a class="markdownIt-Anchor" href="#修改-kafka-eagle-配置文件"></a> 修改 <code>kafka-eagle</code> 配置文件</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi conf/system-config.properties</span><br><span class="line">kafka.eagle.zk.cluster.alias=cluster1</span><br><span class="line">cluster1.zk.list=192.168.16.139:2181</span><br><span class="line">kafka.eagle.webui.port=8048</span><br><span class="line">kafka.eagle.metrics.charts=true</span><br><span class="line">kafka.eagle.sql.fix.error=true</span><br><span class="line">kafka.eagle.driver=com.mysql.jdbc.Driver</span><br><span class="line">kafka.eagle.url=jdbc:mysql://127.0.0.1:3306/kafka?useSSL=true&amp;characterEncoding=utf8&amp;useUnicode=true&amp;serverTimezone=UTC</span><br><span class="line">kafka.eagle.username=username</span><br><span class="line">kafka.eagle.password=password</span><br></pre></td></tr></table></figure></li><li><h3 id="赋予脚本可执行权限-2"><a class="markdownIt-Anchor" href="#赋予脚本可执行权限-2"></a> 赋予脚本可执行权限</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ chmod +x bin/ke.sh</span><br><span class="line">~$ ./bin/ke.sh start</span><br></pre></td></tr></table></figure></li><li><h3 id="设置开机启动kafka-eagle"><a class="markdownIt-Anchor" href="#设置开机启动kafka-eagle"></a> 设置开机启动<code>kafka-eagle</code></h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ vi /etc/init.d/kafka-eagle</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">chkconfig:2345 80 20</span></span><br><span class="line"><span class="meta">#</span><span class="bash">description:kafka-eagle</span></span><br><span class="line">KAFKA_EAGLE_HOME=/usr/local/kafka/kafka-eagle-web-1.4.1/</span><br><span class="line">case $1 in</span><br><span class="line">        start) $&#123;KAFKA_EAGLE_HOME&#125;/bin/ke.sh start ;;</span><br><span class="line">        stop) $&#123;KAFKA_EAGLE_HOME&#125;/bin/ke.sh stop ;;</span><br><span class="line">        status) $&#123;KAFKA_EAGLE_HOME&#125;/bin/ke.sh status ;;</span><br><span class="line">        restart) $&#123;KAFKA_EAGLE_HOME&#125;/bin/ke.sh restart ;;</span><br><span class="line">        *) echo "require start|stop|status|restart" ;;</span><br><span class="line">esac</span><br><span class="line">~$ chmod +x kafka-eagle</span><br><span class="line">~$ chkconfig --add /etc/init.d/kafka-eagle</span><br></pre></td></tr></table></figure></li></ol><ul><li><h2 id="安装配置kafka-manager集群管理工具"><a class="markdownIt-Anchor" href="#安装配置kafka-manager集群管理工具"></a> 安装配置<code>kafka-manager</code>集群管理工具`</h2></li></ul><p>  <code>kafka-manager</code>是最受欢迎的<code>kafka</code>集群管理工具，事由雅虎开源的一个项目。用户可以在<code>web</code>管理界面执行一些简单的集群管理操作。具体支持以下内容：</p><blockquote><ul><li>管理多个集群</li><li>轻松管理集群状态（主题、消费者、偏移、代理、副本分发、分区分发）</li><li>运行首选放油阀选举</li><li>使用选项生成分区分配以选择使用的的代理</li><li>运行分区重新分配（基于生产的分配）</li><li>使用可选主题配置创建主题</li><li>删除主题</li><li>主题列表现在指示标记为删除主题</li><li>批量生成多个主题的分区分配，并可选择要使用的代理</li><li>批量运行重新分配多个主题的分区</li><li>将分区添加到现有主题</li><li>更新现有主题的配置</li></ul></blockquote><p>  <code>github.com</code>项目地址：<a href="https://github.com/yahoo/kafka-manager/releases" target="_blank" rel="noopener"><code>kafka-manager</code>项目</a></p>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Zookeep </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于CentOS7搭建PXE服务器网络安装CentOS</title>
      <link href="/2019/12/12/cao-zuo-xi-tong/ji-yu-centos7-da-jian-pxe-fu-wu-qi-wang-luo-an-zhuang-centos/"/>
      <url>/2019/12/12/cao-zuo-xi-tong/ji-yu-centos7-da-jian-pxe-fu-wu-qi-wang-luo-an-zhuang-centos/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="什么是pxe网络"><a class="markdownIt-Anchor" href="#什么是pxe网络"></a> 什么是<code>PXE</code>网络</h1><ul><li><code>PXE</code>(<code>preboot execute environment</code>，预启动执行环境)是由<code>Intel</code>公司开发的技术，工作于<code>Client/Server</code>的网络模式，支持工作站通过网络从远端服务器下载映像，并由此支持通过网络启动操作系统，在启动过程中，终端要求服务器分配<code>IP</code>地址，再用<code>TFTP</code>（<code>trivial file transfer protocol</code>）或<code>MTFTP</code>(<code>multicast trivial file transfer protocol</code>)协议下载一个启动软件包到本机内存中执行，由这个启动软件包完成终端（客户端）基本软件设置，从而引导预先安装在服务器中的终端操作系统。</li><li><code>PXE</code>可以引导多种操作系统。</li><li><code>PXE client</code>集成在网卡<code>ROM</code>中，当计算机引导时，<code>BIOS</code>把<code>PXE client</code>调入内存执行，获取<code>PXE server</code>配置，显示菜单，根据用户选将远程操作系统下载到本机运行。</li><li><code>PXE</code>组件及过程的分析。</li><li>部署<code>PXE</code>需要哪些服务：<ul><li><code>DHCP</code>服务，分配IP地址，定位引导程序</li><li><code>DNS</code>服务，为客户机分配主机名</li><li><code>TFTP</code>服务，提供引导程序下载</li><li><code>HTTP</code>服务(或<code>ftp/nfs</code>)，提供<code>yum</code>安装源</li></ul></li><li>客户机应具备的条件：<ul><li>网卡<code>ROM</code>必须支持<code>PXE</code>协议</li><li>主板支持网络启动</li></ul></li></ul><h1 id="在centos上部署pxe服务器"><a class="markdownIt-Anchor" href="#在centos上部署pxe服务器"></a> 在<code>CentOS上</code>部署<code>PXE</code>服务器</h1><ul><li><h2 id="软件需求"><a class="markdownIt-Anchor" href="#软件需求"></a> 软件需求</h2><ul><li><code>dhcpd</code>: 　　 动态分配IP</li><li><code>xinetd</code>: 　　对服务访问进行控制，这里主要控制<code>tftp</code></li><li><code>tftp</code>:　　 　从服务器端下载<code>pxelinux.0</code>、<code>default</code>文件</li><li><code>httpd</code>: 　 　在网络上提供安装源，也就是ISO镜像文件中的内容</li><li><code>syslinux</code>: 　用于网络引导</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo yum install dhcp xinetd syslinux tftp-server httpd</span><br></pre></td></tr></table></figure></li><li><h2 id="配置ip"><a class="markdownIt-Anchor" href="#配置ip"></a> 配置<code>IP</code></h2><blockquote><p>将服务器的<code>IP</code>配置为<code>192.168.199.254</code>，让<code>DHCP</code>能够正常启动，<code>TFTP</code>，<code>HTTP</code>都是运行在这个<code>IP</code>上。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo ip addr add 192.168.0.1/24 brd + dev ensxx      # ensxx是网卡名称</span><br><span class="line">~$ ip addr show                                         # 查看网卡ip</span><br></pre></td></tr></table></figure></li><li><h2 id="配置dhcp"><a class="markdownIt-Anchor" href="#配置dhcp"></a> 配置<code>DHCP</code></h2><blockquote><p>编辑<code>dhcp</code>的配置文件<code>/etc/dhcp/dhcpd.conf</code>的内容：</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo vi /etc/dhcp/dhcpd.conf</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> DHCP Server Configuration file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   see /usr/share/doc/dhcp*/dhcpd.conf.example</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   see dhcpd.conf(5) man page</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 整体的环境设定</span></span><br><span class="line">ddns-update-style none;</span><br><span class="line">ignore client-updates;</span><br><span class="line">default-lease-time 259200;</span><br><span class="line">max-lease-time 518400;</span><br><span class="line">option domain-name-servers 192.168.199.254;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 上面是 DNS 的 IP 设定,这个设定值会修改客户端的 /etc/resolv.conf</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 关于动态分配的 IP</span></span><br><span class="line">subnet 192.168.199.0 netmask 255.255.255.0 &#123;</span><br><span class="line">      range 192.168.199.100 192.168.199.200;</span><br><span class="line">      option routers 192.168.199.1; </span><br><span class="line">      option subnet-mask 255.255.255.0;</span><br><span class="line">      next-server 192.168.199.254;</span><br><span class="line">      # the configuration  file for pxe boot</span><br><span class="line">      filename "centos7/pxelinux.0";</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h2 id="配置tftp"><a class="markdownIt-Anchor" href="#配置tftp"></a> 配置<code>TFTP</code></h2></li></ul><blockquote><p><code>tftp</code>是由<code>xinetd</code>管理的，所以需要配置<code>/etc/xinetd.d/tftp</code>文件，这个文件中只需要改一个参数即可</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo vi /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">    socket_type     = dgram</span><br><span class="line">    protocol        = udp</span><br><span class="line">    wait            = yes</span><br><span class="line">    user            = root</span><br><span class="line">    server          = /usr/sbin/in.tftpd</span><br><span class="line">    server_args     = -s /var/lib/tftpboot</span><br><span class="line">    disable         = no          #将此值改为no，表明开启此服务</span><br><span class="line">    per_source      = 11</span><br><span class="line">    cps             = 100 2</span><br><span class="line">    flags           = IPv4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h2 id="文件准备"><a class="markdownIt-Anchor" href="#文件准备"></a> 文件准备</h2></li></ul><blockquote><ol><li>首先将已经下载好的<code>CentOS</code>的<code>ISO</code>镜像文件挂载到一个目录中，然后复制可引导的、压缩的内核文件<code>vmlinuz</code>，以及包含一些模块和安装文件系统的<code>initrd</code>。因为安装过程中以<code>http</code>的方式提供镜像源，所以这里直接将镜像文件挂在到<code>httpd</code>访问目录中(<code>/data/wwwroot/default</code>)。</li></ol></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo mkdir  /data/wwwroot/default/centos7</span><br><span class="line">~$ sudo mount -o loop ~/CentOS-7-x86_64-Minimal-1908.iso /data/wwwroot/default/centos7/</span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>复制<code>vmlinuz</code>，和 <code>initrd.img</code> 到<code>TFTP</code>访问目录的<code>centos7</code>子目录中，因为以后会引导其它的系统，所以这里通过子目录将不同的系统区分开。</li></ol></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo mkdir /var/lib/tftpboot/centos7</span><br><span class="line">~$ sudo cp /var/www/html/centos7/images/pxeboot/initrd.img  /var/lib/tftpboot/centos7/</span><br><span class="line">~$ sudo cp /var/www/html/centos7/images/pxeboot/vmlinuz  /var/lib/tftpboot/centos7/</span><br></pre></td></tr></table></figure><ul><li><h2 id="设置syslinux加载器"><a class="markdownIt-Anchor" href="#设置syslinux加载器"></a> 设置<code>syslinux</code>加载器</h2></li></ul><blockquote><p><code>vesamenu.c32</code>和<code>menu.c32</code>是<code>syslinux</code>所拥有众多模块中的两个，它们的功能是制定启动器使用什么模式的背景。<code>vesamenu.c32</code>图形模式，<code>menu.c32</code>文本模式。我选择的是<code>menu.c32</code>。</p><p>同时还需要<code>pxelinux.0</code>文件，它对整个引导器的作用就如同内核对系统的作用，它可以解释<code>default</code>文件（配置引导菜单文件）中的每个配置项，并根据配置项做出不同的反应。如等待的时间、启动器背景、启动菜单、内核引导等等。</p><p>需要将这两个文件复制到<code>tftp</code>的访问目录中：</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo cp /usr/share/syslinux/menu.c32  /var/lib/tftpboot/</span><br><span class="line">~$ sudo cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/</span><br></pre></td></tr></table></figure><blockquote><p><code>pxelinux</code>被执行后，它会扫描该目录下是否存在指定的配置文件，如果存在，则引用被指定的配置文件。<br /><code>default</code>文件存放于<code>pxelinux.cfg</code>目录中，<code>pxelinux</code>程序最后扫描的配置文件名就是<code>default</code>。所以，把启动器配置项都写入该文件中。</p><p>所以就要建立<code>pxelinux.cfg</code>目录，并在此目录下建立<code>default</code>文件，编辑引导菜单。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo mkdir /var/lib/tftpboot/pxelinux.cfg/</span><br><span class="line">~$ sudo vi /var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line">default menu.c32</span><br><span class="line">prompt 0</span><br><span class="line">timeout 300</span><br><span class="line">ONTIMEOUT local</span><br><span class="line"> </span><br><span class="line">menu title ########## PXE Boot Menu ##########</span><br><span class="line"> </span><br><span class="line">label 1</span><br><span class="line">menu label ^1) Install CentOS 7 x64 with HTTP</span><br><span class="line">kernel centos7/vmlinuz</span><br><span class="line">append initrd=centos7/initrd.img method=http://192.168.199.254/centos7 devfs=nomount</span><br></pre></td></tr></table></figure><ul><li><h2 id="启动服务"><a class="markdownIt-Anchor" href="#启动服务"></a> 启动服务</h2></li></ul><blockquote><p>开启<code>dhcpd</code>, <code>xinetd</code>, <code>tftp</code>, <code>http</code>这些服务，在开启的时候没有发生错误，说明配置没问题。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo systemctl start dhcpd.service </span><br><span class="line">~$ sudo systemctl start xinetd.service </span><br><span class="line">~$ sudo systemctl start tftp.service</span><br><span class="line">~$ sudo systemctl start httpd.service</span><br></pre></td></tr></table></figure><blockquote><ul><li>可以在浏览器输入<code>192.168.199.254</code>验证<code>http</code>是否运行正常</li><li>为了防止意外的发生可以关闭防火墙和<code>selinux</code>。</li></ul></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ sudo systemctl stop firewalld.service </span><br><span class="line">~$ sudo setenforce 0</span><br></pre></td></tr></table></figure><blockquote><p>如果要通过<code>MAC</code>地址分配<code>IP</code>，可以编辑<code>dhcp</code>的配置文件<code>/etc/dhcp/dhcpd.conf</code></p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">subnet 192.168.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">    range 192.168.0.100 192.168.0.200;</span><br><span class="line">    option routers 192.168.0.1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">host centos7 &#123;</span><br><span class="line">    hardware ethernet 00:0C:29:C7:57:0C;    # 客户端的mac地址</span><br><span class="line">    next-server 192.168.0.1;</span><br><span class="line">    fixed-address 192.168.0.125;            # 分配给客户端的IP</span><br><span class="line">    filename "centos7/pxelinux.0";</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="网络环境pxe方式安装centos"><a class="markdownIt-Anchor" href="#网络环境pxe方式安装centos"></a> 网络环境<code>PXE</code>方式安装<code>CentOS</code></h1>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> PXE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac上制作CentOS7系统U盘安装盘</title>
      <link href="/2019/12/12/cao-zuo-xi-tong/mac-shang-zhi-zuo-centos7-xi-tong-u-pan-an-zhuang-pan/"/>
      <url>/2019/12/12/cao-zuo-xi-tong/mac-shang-zhi-zuo-centos7-xi-tong-u-pan-an-zhuang-pan/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="mac下转换u盘格式为exfat"><a class="markdownIt-Anchor" href="#mac下转换u盘格式为exfat"></a> mac下转换U盘格式为exFat</h1><blockquote><p>U盘拷贝4G以上文件时，某些格式无法支持，需要转换为exfat格式，mac下的格式转换比较方便，直接使用系统自带的磁盘工具，进行抹除操作的时候选择U盘格式为exfat即可，需要注意的是抹除的时候会格式化U盘，要提前备份U盘上的重要数据</p></blockquote><h1 id="mac下制作centos安装启动盘"><a class="markdownIt-Anchor" href="#mac下制作centos安装启动盘"></a> MAC下制作CentOS安装启动盘</h1><ol><li><h2 id="先插入u盘打开终端使用下面的命令查看u盘是否已经mount到系统这时在finder下也能看到u盘-使用diskutil-list查看当前mac下挂载的u盘目录"><a class="markdownIt-Anchor" href="#先插入u盘打开终端使用下面的命令查看u盘是否已经mount到系统这时在finder下也能看到u盘-使用diskutil-list查看当前mac下挂载的u盘目录"></a> 先插入U盘，打开终端使用下面的命令查看U盘是否已经mount到系统，这时在Finder下也能看到U盘。使用diskutil list查看当前mac下挂载的U盘目录</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> diskutil list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 系统输出类似如下内容：</span></span><br><span class="line">/dev/disk0</span><br><span class="line"><span class="meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      GUID_partition_scheme                        *160.0 GB   disk0</span><br><span class="line">   1:                        EFI                         209.7 MB   disk0s1</span><br><span class="line">   2:                  Apple_HFS Macintosh HD            159.2 GB   disk0s2</span><br><span class="line">   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3</span><br><span class="line"> /dev/disk1</span><br><span class="line"><span class="meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:     Apple_partition_scheme                        *17.3 MB    disk1</span><br><span class="line">   1:        Apple_partition_map                         32.3 KB    disk1s1</span><br><span class="line">   2:                  Apple_HFS Flash Player            17.3 MB    disk1s2</span><br><span class="line"> /dev/disk2</span><br><span class="line"><span class="meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:     FDisk_partition_scheme                        *15.7 GB    disk2</span><br><span class="line">   1:             Windows_FAT_32 KINGSTON                15.7 GB    disk2s1</span><br></pre></td></tr></table></figure></li><li><h2 id="解挂-u盘"><a class="markdownIt-Anchor" href="#解挂-u盘"></a> 解挂 U盘</h2><blockquote><p>使用<code>diskutil unmountDisk /dev/disk2</code>取消移动硬盘的挂载，<code>/dev/disk2</code> 是我自己电脑上U盘挂载的路径。<br />这样就有了一个已经插入但是unmount的U盘了，这时候你在Finder下看不到这个U盘了，但是用diskutil list命令还可以看到。</p></blockquote></li><li><h2 id="写系统镜像到u盘"><a class="markdownIt-Anchor" href="#写系统镜像到u盘"></a> 写系统镜像到U盘</h2><blockquote><p>接下来将你要制作的Linux安装的iso文件写到这个U盘里，这个任务可以使用如下命令完成：</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo dd <span class="keyword">if</span>=~/Downloads/CentOS-7-x86_64-DVD-1708.iso of=/dev/rdisk2 bs=1m</span></span><br></pre></td></tr></table></figure></li><li><h2 id="完成"><a class="markdownIt-Anchor" href="#完成"></a> 完成</h2><blockquote><p>这个过程大约需要5-10分钟（有可能要1小时哦），完成之后会输出类似下面的日志。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">648+0 records in</span><br><span class="line">648+0 records out</span><br><span class="line">679477248 bytes transferred in 447.883182 secs (1517086 bytes/sec)</span><br></pre></td></tr></table></figure><blockquote><p>这样一个通过USB启动的Linux安装U盘就做好了。</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> MacOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> MacOS </tag>
            
            <tag> U盘 </tag>
            
            <tag> 启动盘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis中javaType和jdbcType对应关系</title>
      <link href="/2019/12/09/cheng-xu-she-ji/mybatis-zhong-javatype-he-jdbctype-dui-ying-guan-xi/"/>
      <url>/2019/12/09/cheng-xu-she-ji/mybatis-zhong-javatype-he-jdbctype-dui-ying-guan-xi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="mybatis中javatype和jdbctype对应关系"><a class="markdownIt-Anchor" href="#mybatis中javatype和jdbctype对应关系"></a> Mybatis中javaType和jdbcType对应关系</h1><table><thead><tr><th>JDBC Type</th><th>Java Type</th></tr></thead><tbody><tr><td>CHAR</td><td>String</td></tr><tr><td>VARCHAR</td><td>String</td></tr><tr><td>LONGVARCHAR</td><td>String</td></tr><tr><td>NUMERIC</td><td>java.math.BigDecimal</td></tr><tr><td>DECIMAL</td><td>java.math.BigDecimal</td></tr><tr><td>BIT</td><td>boolean</td></tr><tr><td>BOOLEAN</td><td>boolean</td></tr><tr><td>TINYINT</td><td>byte</td></tr><tr><td>SMALLINT</td><td>short</td></tr><tr><td>INTEGER</td><td>int</td></tr><tr><td>BIGINT</td><td>long</td></tr><tr><td>REAL</td><td>float</td></tr><tr><td>FLOAT</td><td>double</td></tr><tr><td>DOUBLE</td><td>double</td></tr><tr><td>BINARY</td><td>byte[]</td></tr><tr><td>VARBINARY</td><td>byte[]</td></tr><tr><td>LONGVARBINARY</td><td>byte[]</td></tr><tr><td>DATE</td><td>java.sql.Date</td></tr><tr><td>TIME</td><td>java.sql.Time</td></tr><tr><td>TIMESTAMP</td><td>java.sql.Timestamp</td></tr><tr><td>CLOB</td><td>Clob</td></tr><tr><td>BLOB</td><td>Blob</td></tr><tr><td>ARRAY</td><td>Array</td></tr><tr><td>DISTINCT</td><td>mapping of underlying type</td></tr><tr><td>STRUCT</td><td>Struct</td></tr><tr><td>REF</td><td>Ref</td></tr><tr><td>DATALINK</td><td>java.net.URL</td></tr></tbody></table><h1 id="sql数据类型和java数据类型的对应关系"><a class="markdownIt-Anchor" href="#sql数据类型和java数据类型的对应关系"></a> SQL数据类型和Java数据类型的对应关系</h1><table><thead><tr><th>SQL Type</th><th>Java Type</th></tr></thead><tbody><tr><td>integer、int</td><td>int</td></tr><tr><td>tinyint、smallint</td><td>short</td></tr><tr><td>bigint</td><td>long</td></tr><tr><td>decimal、numeric</td><td>java.math.BigDecimal</td></tr><tr><td>float</td><td>float</td></tr><tr><td>double</td><td>double</td></tr><tr><td>char、varchar</td><td>String</td></tr><tr><td>boolean、bit</td><td>boolean</td></tr><tr><td>date</td><td>java.sql.Date</td></tr><tr><td>time</td><td>java.sql.Time</td></tr><tr><td>timestamp</td><td>java.sql.Timestamp</td></tr><tr><td>blob</td><td>java.sql.Blob</td></tr><tr><td>clob</td><td>java.sql.Clob</td></tr><tr><td>array</td><td>java.sql.Array</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> MyBatis-Plus </tag>
            
            <tag> SQL </tag>
            
            <tag> MyBatis </tag>
            
            <tag> javaType </tag>
            
            <tag> jdbcType </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis-Plus中自定义SQL语句的实现</title>
      <link href="/2019/12/09/cheng-xu-she-ji/mybatis-plus-zhong-zi-ding-yi-sql-yu-ju-de-shi-xian/"/>
      <url>/2019/12/09/cheng-xu-she-ji/mybatis-plus-zhong-zi-ding-yi-sql-yu-ju-de-shi-xian/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="一-引言"><a class="markdownIt-Anchor" href="#一-引言"></a> 一、引言</h1><blockquote><p><code>MyBatis Plus</code>自带的条件构造器虽然很强大，有时候也避免不了写稍微复杂一点业务的<code>sql</code>，那么那么今天说说<code>MyBatis Plus</code>怎么自定义<code>sql</code>语句吧。</p></blockquote><h1 id="二-配置"><a class="markdownIt-Anchor" href="#二-配置"></a> 二、配置</h1><blockquote><p>自定义的sql当然是写在XML文件中的啦，那么首先来定义xml文件的位置，在yml配置文件如下</p></blockquote><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"> <span class="comment"># 如果是放在src/main/java目录下 classpath:/com/*/*/mapper/*Mapper.xml</span></span><br><span class="line"> <span class="comment"># 如果是放在resource目录 classpath:/mapper/**.xml</span></span><br><span class="line"> <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/**.xml</span></span><br></pre></td></tr></table></figure><h1 id="三-具体实现"><a class="markdownIt-Anchor" href="#三-具体实现"></a> 三、具体实现</h1><h2 id="使用注解实现"><a class="markdownIt-Anchor" href="#使用注解实现"></a> 使用注解实现：</h2><blockquote><p>在我们Mapper接口中定义自定义方法即可。</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123; </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 如果自定义的方法还希望能够使用MP提供的Wrapper条件构造器，则需要如下写法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userWrapper</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM user $&#123;ew.customSqlSegment&#125;"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">selectByMyWrapper</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; userWrapper)</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 和Mybatis使用方法一致</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM user where name = #&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">selectByName</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用xml文件实现"><a class="markdownIt-Anchor" href="#使用xml文件实现"></a> 使用xml文件实现：</h2><blockquote><p>使用xml一定要指定xml文件所在位置</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 如果自定义的方法还希望能够使用MP提供的Wrapper条件构造器，则需要如下写法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userWrapper</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">selectByMyWrapper</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; userWrapper)</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 和Mybatis使用方法一致</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">selectByName</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.example.demo.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByName"</span> <span class="attr">resultType</span>=<span class="string">"com.example.demo.model.User"</span>&gt;</span></span><br><span class="line">        SELECT * FROM user where name = #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByMyWrapper"</span> <span class="attr">resultType</span>=<span class="string">"com.example.demo.model.User"</span>&gt;</span></span><br><span class="line">        SELECT * FROM user $&#123;ew.customSqlSegment&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="四-测试测试"><a class="markdownIt-Anchor" href="#四-测试测试"></a> 四、测试测试：</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 自定义sql查询语句</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectByMySelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByName(<span class="string">"王天风"</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 自定义sql使用Wrapper</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectByMyWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line">    wrapper.like(<span class="string">"name"</span>, <span class="string">"雨"</span>).lt(<span class="string">"age"</span>, <span class="number">40</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMyWrapper(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> MyBatis-Plus </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在SpringBoot项目普通类中注入mapper或service接口</title>
      <link href="/2019/12/09/cheng-xu-she-ji/zai-springboot-xiang-mu-pu-tong-lei-zhong-zhu-ru-mapper-huo-service-jie-kou/"/>
      <url>/2019/12/09/cheng-xu-she-ji/zai-springboot-xiang-mu-pu-tong-lei-zhong-zhu-ru-mapper-huo-service-jie-kou/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  在Spring Boot项目的普通类（使用@Component注解），需要依赖注入mapper或service接口时，出现空指针异常的解决方法</p><ol><li>该类使用@Component注解</li><li>添加一个本类类型的静态字段</li><li>创建一个初始化方法，贴上@PostConstruct 标签，用于注入bean</li><li>依赖注入mapper或service接口</li><li>最后直接在普通类中调用即可</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>    <span class="comment">// 该类使用@Component注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tengxun</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> TokenMapper tokenMapper;  <span class="comment">// 依赖注入mapper或service接口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Tengxun tengxun;    <span class="comment">// 添加一个本类类型的静态字段</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建一个初始化方法，贴上<span class="doctag">@PostConstruct</span> 标签，用于注入bean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostConstruct</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">tengxun = <span class="keyword">this</span>;</span><br><span class="line">tengxun.tokenMapper = <span class="keyword">this</span>.tokenMapper;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请最后直接在普通类中调用即可</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testToken</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(tengxun.tokenMapper.selectCount( <span class="keyword">null</span> ));</span><br><span class="line">System.out.println(tengxun.tokenMapper.selectBySchema(<span class="string">"hotel"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> 依赖注入 </tag>
            
            <tag> Service </tag>
            
            <tag> Mapper </tag>
            
            <tag> Component </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《你的灯亮着吗》发现问题的真正所在</title>
      <link href="/2019/12/08/sui-bi-za-tan/ni-de-deng-liang-zhao-ma-fa-xian-wen-ti-de-zhen-zheng-suo-zai/"/>
      <url>/2019/12/08/sui-bi-za-tan/ni-de-deng-liang-zhao-ma-fa-xian-wen-ti-de-zhen-zheng-suo-zai/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  《你的灯亮着吗》是唐纳德·高斯撰写的一本解决问题的图书，全书分为六个主题：①一个问题、②这个问题是什么、③什么是真正的问题、④这是谁的问题、⑤问题是从哪儿来的、⑥我们真的想解决问题吗。每个问题都有若干生动有趣而又有警戒意义的故事作为主线，通过对故事中实际问题的解决，引申出作者对问题解决领域中的重要观点。为我们思考能力的提高提供了一些启迪性的帮助。</p><p>  书中关注了“人们如何思考”、“人们在遇到棘手的难题时会如何思考和处理”、“对于某一个特定问题，人们会用什么样的角度思考”这样的话题；提出了像“问题其实就是你期望的东西和你体验到的东西之间的差别”、“不管看上去如何，人们很少知道他们想要的是什么，直到你给了他们所要的东西”这样的深刻见解。</p><p>  市面上，不缺乏解决问题的图书，可是，为何我们看过很多解决问题的方法、策略、妙招，却依旧解决不好问题？原因很简单，我们看到的都是“方法论”，却从没有接受过解决问题的思维训练。这本书可以有效地训练我们解决问题的思维能力。</p><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"autoplay":true,"video":{"url":"http://static.gadfly.pub/assets/videos/%E4%BD%A0%E7%9A%84%E7%81%AF%E4%BA%AE%E7%9D%80%E5%90%97.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> <h1 id="这是谁的问题"><a class="markdownIt-Anchor" href="#这是谁的问题"></a> 这是谁的问题</h1><blockquote><p>  人人都在追求实用的时代，我们看过太多解决问题的方法、策略和妙招，甚至也拥有很多解决问题的经验。当问题出现后，我们以为凭着过往的经验，就可以轻松解决问题。然而，很多时候，过往经验失效了，问题始终得不到解决。或者，即便问题得到了解决，又会冒出一个新的问题。</p><p>  这是为何？其实，答案就在于，我们一直都在孜孜不倦的追求解决问题的方法、策略、妙招，却从来就没有问过现在的问题是什么！</p></blockquote><h2 id="1-问题可能并非是某一方的问题"><a class="markdownIt-Anchor" href="#1-问题可能并非是某一方的问题"></a> 1. 问题可能并非是某一方的问题</h2><blockquote><p>  当出现问题时，我们该怎样解决这个问题？我们立即想到的解决方案有哪些，貌似每个解决方案都很完美。但我们有没有想过，这些叫绝方案是站在谁的角度提出来的？或者说，这些解决方案直指的是谁的问题？金融大厦电梯不够用的案列，告诉我们：在解决问题之前，一定要弄清楚，是谁遇到了问题？问题是什么？也就是说，不要在还没有定义问题之前就仓促地去解决问题。仓促解决问题，很有可能把问题对象给弄错了，或者只解决了某一方面的问题。</p><p>  有多时候，问题并非只有一方遇到，很有可能是多方遇到了问题。要想真正的解决问题，就不应该只站在某一方的立场或角度去考虑问题。而应该具有多方思考问题的思维。也就是说，真正解决问题的能力，不是只解决一个人的问题，而应该解决更多人的问题。</p></blockquote><h2 id="2-解决了问题但仍不知道问题是什么"><a class="markdownIt-Anchor" href="#2-解决了问题但仍不知道问题是什么"></a> 2. 解决了问题但仍不知道问题是什么</h2><ol><li>不要认为这样或者那样做，就能彻底解决这个问题。</li><li>虽然这样做或者那样做不能彻底解决这个问题，但是我们永远不要停止解决问题的步伐。</li><li>即使我们这样做或者那样做了以后问题得到解决，但依旧不能保证我们对问题的定义是正确的。或者说，别把解决方案当做问题的定义。</li><li>面对有利可图的事情时，我们往往会忘记道德这件事。</li></ol><h2 id="3-解决了问题又衍生出新的问题"><a class="markdownIt-Anchor" href="#3-解决了问题又衍生出新的问题"></a> 3. 解决了问题又衍生出新的问题</h2><ol><li>每一个解决问题的方法都有可能衍生出新的问题。</li><li>想出解决问题方法的人可能明白这个方法的隐患，而其他人并不一定清楚。</li><li>在想到解决方案的同时，也要想到这个解决方案可能出现的隐患。</li><li>借助简单的第三方来推理和发现解决方案中存在的隐患。</li></ol><h2 id="这是谁的问题小结"><a class="markdownIt-Anchor" href="#这是谁的问题小结"></a> 【这是谁的问题】小结</h2><ul><li>弄清楚问题是什么，其实就是要避免掉进解决问题的陷阱。</li><li>值得我们警惕的陷阱是仓促行动：一看到问题就凭着本能反应或惯性思维立即着手行动解决问题。</li><li>发现问题后应该先定义问题：多问问自己这是谁的问题，究竟问题是什么？</li><li>定义问题，实际上永远都没有办法确保问题的定义是正确的：<ul><li>不同的人有不同的问题，不应该只站在某一方的立场和角度考虑问题；</li><li>应该具有多方思考问题的思维；</li><li>即便多方思考问题，也许仍不能彻底解决问题</li><li>即便彻底解决了问题，也不能保证我们对问题定义是正确的</li><li>即便彻底解决了问题，也许可能滋生出新的问题</li><li>想到解决方案的同时，也要想到这个方案可能出现的隐患。</li></ul></li><li>遇到问题后正确的做法：<ul><li>不要仓促的行动</li><li>不要仓促的下结论</li><li>不要被惯性思维主导自己的思维和行动</li><li>永远不要停止解决问题的步伐</li></ul></li></ul><h1 id="这个问题该由谁来解决"><a class="markdownIt-Anchor" href="#这个问题该由谁来解决"></a> 这个问题该由谁来解决</h1><blockquote><p>  身边的人遇到了问题，深陷其中不能自拔，作为旁观者的我们却看得门清，于是我们怀着好心，帮他们把问题解决了。可没想到，他们不仅不感激我们，反而还责怪我们插手介入他们的事情。</p></blockquote><ul><li>问题应该由当事人自己来解决；</li><li>有些问题，当事人解决不了，外人又不能帮忙。</li></ul><blockquote><p>  遇到问题时，首先应该定义问题，而定义问题很重要的一点就是弄清楚这是谁的问题。确定了这是谁的问题后，才明白这个问题该由谁来解决。</p></blockquote><h2 id="1-当事人有能力解决问题时不要越俎代庖"><a class="markdownIt-Anchor" href="#1-当事人有能力解决问题时不要越俎代庖"></a> 1. 当事人有能力解决问题时不要越俎代庖</h2><blockquote><p>  如果这个问题是别人的问题，那么我们最好不要插手。尤其是当事人有能力解决这个问题的时候，我们就不要越俎代庖。</p></blockquote><ul><li>不要破坏当事人解决问题的专注力和兴趣</li><li>放手让当事人按照自己的理解去解决问题</li><li>不要误导当事人，待问题解决后有条件再和当事人一起沟通</li></ul><h2 id="2-让问题的解决者体验问题"><a class="markdownIt-Anchor" href="#2-让问题的解决者体验问题"></a> 2. 让问题的解决者体验问题</h2><ul><li>现实中，很多问题是当事人自己不能解决的，比如频繁加班的故事。</li><li>如果一个人是解决问题的关键人物，但他又不受问题的困恼，最简单有效的方法是让他亲身体验问题，比如抢占校长车位的故事。</li><li>为了有效解决问题，不妨把问题归结到自己身上，比如老师提前到校或不开车就不再有车位的烦恼。</li><li>解决频繁加班的两个办法：<ul><li>让老板体会到加班带来的效率低下等伤害；</li><li>试着提高自己的工作效率或改变同事间的协同模式。</li></ul></li></ul><h2 id="3-有时候提醒比解决方案更有效"><a class="markdownIt-Anchor" href="#3-有时候提醒比解决方案更有效"></a> 3. 有时候提醒比解决方案更有效</h2><blockquote><p>  有时候，看着当事人深陷问题的泥潭中走不出来，一句适当的提醒，可能比解决问题更有效。</p></blockquote><h2 id="这个问题该由谁来解决小结"><a class="markdownIt-Anchor" href="#这个问题该由谁来解决小结"></a> 【这个问题该由谁来解决】小结</h2><ul><li>当事人有能力解决问题时，当事人就是问题的最佳解决者。</li><li>如果问题来自一个系统，最佳解决者就是这个系统的制定者、决策者或设计者。不妨让这个关键人物体验一下这个问题。</li><li>当事人也不能把问题推到系统的制定者、决策者或设计者身上，这时候试着把问题归结到自己身上。</li><li>系统的制定者、决策者或设计者不妨给当事人一些适当的提醒，让当事人自行解决问题。<ul><li>不鼓励系统的制定者、决策者或设计者逃避、推卸责任。</li><li>出现的问题不能是导向性、原则性或道德性的错误，这时给当事人的提醒是无效的。</li></ul></li></ul><h1 id="问题出自哪里"><a class="markdownIt-Anchor" href="#问题出自哪里"></a> 问题出自哪里</h1><h2 id="1-问题很可能来自自己"><a class="markdownIt-Anchor" href="#1-问题很可能来自自己"></a> 1. 问题很可能来自自己</h2><blockquote><p>  从去波兰审查签证的案例中，我们虽然看到职能部门办事人员虽然无礼和官僚，最终发现对方的“无礼”来自自己的态度，所以很多时候想想是不是自己的态度出现了问题，如果是，解决态度的问题就可以收到很好的效果。</p></blockquote><h2 id="2-一些人总喜欢且擅长给我们制造问题"><a class="markdownIt-Anchor" href="#2-一些人总喜欢且擅长给我们制造问题"></a> 2. 一些人总喜欢且擅长给我们制造问题</h2><ul><li>世界上有两种人：一种是做事的人，另一种是制造出事情让别人去做的人。远离那些找事让别人做的人，你就可以好好过日子！</li><li>有时候管理者就是问题的制造者，他们专门制造问题：<ul><li>如果没有问题，他们就没有存在的价值和意义</li><li>有些领导就喜欢看到下属忙些再忙些</li></ul></li><li>面对这样的局面我们该如何解决：问题从哪里来就送回那里去！</li><li>老板让下属找宾馆的案例告诉我们：如果问题的制造者喜欢给我们找事干，那么就应该把决策权交还给他。其原因：<ul><li>喜欢给我们找事干的问题制造者，他们一定有着非常强的控制欲和权力欲，既然如此就把决策权交还给他；</li><li>把决策权交还给他，也是让他看到我们做了这件事情的哪些中间环节，我们并没有不干事，其实我们干了多好干了多少他才不关心。</li></ul></li></ul><h2 id="3-解决问题是弄清楚问题来自哪里"><a class="markdownIt-Anchor" href="#3-解决问题是弄清楚问题来自哪里"></a> 3. 解决问题是弄清楚问题来自哪里</h2><ul><li>参加一个“综合”考试，考试题目不一定很综合，也许出于某位教授之手，弄清这个教授的套路，过关的可能性就会大大提高。</li><li>如果知道某个任务是哪位领导下达的，并且对这位领导有所了解，就能知道他想要的目的是什么。</li><li><strong>不要全身心的投入到问题的解决中去，先弄清楚问题的来源，知道是谁给我们制造了问题，他的目的是什么，会大大减少我们的无用功，提高解决问题的效率！</strong></li></ul><h2 id="问题出自哪里小结"><a class="markdownIt-Anchor" href="#问题出自哪里小结"></a> 【问题出自哪里】小结</h2><ul><li>定义问题（书中第一章的内容）之后就是解决问题</li><li>解决问题需要经过两个环节：<ul><li>弄清楚谁是解决问题的最佳人选（书中第二章的内容）</li><li>弄清楚问题来自哪里（书中本章内容）<ul><li>一半以上的情况，问题出在解决者的身上，要想解决问题，唯有改变自己。</li><li>另外的情况是别人给我们制造问题，对策：问题从哪里来就送回哪里去。</li><li>弄清问题的来源和谁制造了问题，他的目的，可以事半功倍，提高解决的效率。</li></ul></li></ul></li></ul><h1 id="真的想解决问题吗"><a class="markdownIt-Anchor" href="#真的想解决问题吗"></a> 真的想解决问题吗</h1><h2 id="1-很多人根本就不知道自己想要什么"><a class="markdownIt-Anchor" href="#1-很多人根本就不知道自己想要什么"></a> 1. 很多人根本就不知道自己想要什么</h2><blockquote><p>  很多时候我们给问题的制造者提出解决方案的时候，这些问题的制造者并不知道他们想要的是什么！</p></blockquote><h2 id="2-真正想解决问题的人并不多"><a class="markdownIt-Anchor" href="#2-真正想解决问题的人并不多"></a> 2. 真正想解决问题的人并不多</h2><blockquote><p>  很多时候提出问题的人，当他让我们干这干哪，其实他是在深入了解问题，当他了解问题的全貌后，他不一定想解决问题。</p></blockquote><h2 id="3-问题重要答案未必重要"><a class="markdownIt-Anchor" href="#3-问题重要答案未必重要"></a> 3. 问题重要，答案未必重要</h2><ul><li>有时候问题很重要，然而答案未必重要。</li><li>有时候给我们分派任务的人，早已知道了问题的答案。</li><li>要当心这样的任务，它会让我们觉得付出毫无价值，从而产生失落、抱怨、失望的情绪</li><li>很多问题确实需要即时解决，但要当心那些催我们的人。</li></ul><h2 id="4-这些解决问题的事项值得我们注意"><a class="markdownIt-Anchor" href="#4-这些解决问题的事项值得我们注意"></a> 4. 这些解决问题的事项值得我们注意</h2><ul><li>解决问题的人也在制造问题，比如杀毒软件公司也在制造病毒。</li><li>问题的解决方案可能有副作用。比如解决害虫问题的解决方案是农药，而农药会带来环境污染的副作用。</li><li>解决问题的过程会出现道德偏向。定义问题的时候需要考虑道德问题，解决方案要忠于良知。</li></ul><h2 id="真的想解决问题吗小结"><a class="markdownIt-Anchor" href="#真的想解决问题吗小结"></a> 【真的想解决问题吗】小结</h2><blockquote><p>  真的想解决问题吗？就是要我们重新审视问题。</p></blockquote><ul><li>很多时候我们为问题制造者提供解决方案的时候，问题制造者并不知道他们想要的是什么。</li><li>有的时候，真正想要解决问题的人并不多。</li><li>有的时候，问题很重要，答案未必重要。要当心这样的工作，因为它会让我们觉得付出毫无价值，从而产生抱怨、失落、失望的情绪。</li><li>解决问题的人同时也在制造问题。</li><li>问题的解决方案可能有副作用。</li><li>在解决问题的过程中，可能会出现道德偏向。我们需要忠实于自己的良知。</li></ul><h1 id="总结感悟"><a class="markdownIt-Anchor" href="#总结感悟"></a> 总结感悟</h1><blockquote><p>  最后记住问题是没有“标准答案”、“最终答案”的，从自身出发思考问题，就事论事，放平心态，才能更好地解决问题</p><p>  当问题出现时，要理清目标，是谁的问题？怎么发生的？问题的关键是什么？只有理清楚了，才能更好的去解决。解决问题的时候就事论事、不翻旧账、放大问题，过渡情绪化、更不能强安罪名。只需要将问题的范围限制在这次或者这件事情上，然后沟通，才是解决问题的根本。</p><p>  想想看我们所面对的哪些问题（可能世界大多数）是我们自身的原因？这些问题中，哪些是我们真正想要解决的？哪些问题是我们已经放弃解决，却喊着要打到的？正视这些问题吧，只有真正了解现实中的自己，才有可能改变自己的现实。</p></blockquote><hr /><div class="row">    <embed src="http://static.gadfly.pub/assets/pdf/%E4%BD%A0%E7%9A%84%E7%81%AF%E4%BA%AE%E7%9D%80%E5%90%97%EF%BC%9F.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用Visual Studio Code进行Hexo博客写作</title>
      <link href="/2019/12/07/gong-ju-zi-liao/shi-yong-vscode-jin-xing-hexo-bo-ke-xie-zuo/"/>
      <url>/2019/12/07/gong-ju-zi-liao/shi-yong-vscode-jin-xing-hexo-bo-ke-xie-zuo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>欢迎使用 Hexo，本文档将帮助您快速上手。Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><h1 id="新建文章"><a class="markdownIt-Anchor" href="#新建文章"></a> 新建文章</h1><h2 id="使用命令行新建草稿"><a class="markdownIt-Anchor" href="#使用命令行新建草稿"></a> 使用命令行新建草稿</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new -p "子文件夹/文件标题" "文件标题"</span><br></pre></td></tr></table></figure><h2 id="新建md文件放到source_posts文件夹或其子文件夹中"><a class="markdownIt-Anchor" href="#新建md文件放到source_posts文件夹或其子文件夹中"></a> 新建md文件放到<code>/source/_posts</code>文件夹或其子文件夹中</h2><h2 id="具体文章页面的头部属性设置"><a class="markdownIt-Anchor" href="#具体文章页面的头部属性设置"></a> 具体文章页面的头部属性设置</h2><table><thead><tr><th>设置</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td>title</td><td>文章的标题</td><td></td></tr><tr><td>date</td><td>创建日期</td><td>文件的创建日期</td></tr><tr><td>updated</td><td>修改日期</td><td>文件的修改日期</td></tr><tr><td>comments</td><td>是否开启评论</td><td>true</td></tr><tr><td>description</td><td>文章节選</td><td>自动节选</td></tr><tr><td>cover</td><td>封面显示的圖片地址</td><td></td></tr><tr><td>password</td><td>加密文章的加密密码</td><td></td></tr><tr><td>tags</td><td>标签</td><td></td></tr><tr><td>categories</td><td>分类</td><td></td></tr></tbody></table><h1 id="新建草稿"><a class="markdownIt-Anchor" href="#新建草稿"></a> 新建草稿</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new draft "草稿标题"</span><br></pre></td></tr></table></figure><h1 id="发布-预览和部署"><a class="markdownIt-Anchor" href="#发布-预览和部署"></a> 发布、预览和部署</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 清除缓存： </span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成静态网页： </span></span><br><span class="line">hexo g    # 简写</span><br><span class="line">hexo generate</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 预览： </span></span><br><span class="line">hexo s    # 简写</span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 部署： </span></span><br><span class="line">hexo d    # 简写</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h1 id="给文章添加二维码"><a class="markdownIt-Anchor" href="#给文章添加二维码"></a> 给文章添加二维码</h1><h2 id="使用格式"><a class="markdownIt-Anchor" href="#使用格式"></a> 使用格式</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% qrcode data [alt:text] [title:text] [class] %&#125;</span><br></pre></td></tr></table></figure><h2 id="范例"><a class="markdownIt-Anchor" href="#范例"></a> 范例</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% qrcode "hello, world" alt:"hello, world" title:"hello, world" %&#125;</span><br></pre></td></tr></table></figure><h2 id="效果"><a class="markdownIt-Anchor" href="#效果"></a> 效果</h2><img alt="hello, world" title="hello, world" class="lazyload" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAAAAAAc6VLmAAAA6klEQVR42u3ZwQ6EIAxFUf7/p3GniaHlVZlMi7crDbHHBaEFWptHP+N6vY22NYGURepWmKlHo34WpHLSaJaYqU3JzIK0o6TOQqQPSKPUv5l7SFkkvz75AysrIVICSeg7hadF3TLSf6UejqefIdWQ1NmlrkGTVgapmuQ3rcLG1uxskIpIyo9E2ly5zCElldQWJXR2KmyAkbJKai5h1ZosU0iFJLkFFdcvuwgipZce3qnFz0mRKkmvz8LkSohUSApVpdB1C9KOUuiixH5F2kYSSpNymo5USApdncUv25AqSeo+129IhZNVpPTSAVWCHQugeNVrAAAAAElFTkSuQmCC"><h1 id="给文章插入图片"><a class="markdownIt-Anchor" href="#给文章插入图片"></a> 给文章插入图片</h1><h2 id="从剪贴板上传图像"><a class="markdownIt-Anchor" href="#从剪贴板上传图像"></a> 从剪贴板上传图像</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Windows / Unix：Ctrl + Alt + u</span><br><span class="line">OsX：Cmd + Opt + u</span><br></pre></td></tr></table></figure><h2 id="从资源管理器上传图像"><a class="markdownIt-Anchor" href="#从资源管理器上传图像"></a> 从资源管理器上传图像</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Windows / Unix：Ctrl + Alt + e</span><br><span class="line">OsX：Cmd + Opt + e</span><br></pre></td></tr></table></figure><h2 id="从输入框上传图像"><a class="markdownIt-Anchor" href="#从输入框上传图像"></a> 从输入框上传图像</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Windows / Unix：Ctrl + Alt + o</span><br><span class="line">OsX：Cmd + Opt + 0</span><br></pre></td></tr></table></figure><h2 id="使用网络图片"><a class="markdownIt-Anchor" href="#使用网络图片"></a> 使用网络图片</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![图片alt](图片地址 &apos;&apos;图片title&apos;&apos;)</span><br></pre></td></tr></table></figure><h1 id="给文章加密"><a class="markdownIt-Anchor" href="#给文章加密"></a> 给文章加密</h1><blockquote><p>你可能需要写一些私密的博客, 通过密码验证的方式让人不能随意浏览.</p></blockquote><h2 id="快速使用"><a class="markdownIt-Anchor" href="#快速使用"></a> 快速使用</h2><blockquote><p>将 “password” 字段添加到您文章信息头就像这样.</p></blockquote><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-30</span> <span class="number">21</span><span class="string">:18:02</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">mikemessi</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h2 id="高级设置"><a class="markdownIt-Anchor" href="#高级设置"></a> 高级设置</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">作为日记加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-30</span> <span class="number">21</span><span class="string">:12:21</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">mikemessi</span></span><br><span class="line"><span class="attr">abstract:</span> <span class="string">有东西被加密了,</span> <span class="string">请输入密码查看.</span></span><br><span class="line"><span class="attr">message:</span> <span class="string">您好,</span> <span class="string">这里需要密码.</span></span><br><span class="line"><span class="attr">wrong_pass_message:</span> <span class="string">谢谢,</span> <span class="string">这个密码是正确的,</span> <span class="string">请点击确定后观看正文.</span></span><br><span class="line"><span class="attr">wrong_hash_message:</span> <span class="string">抱歉,</span> <span class="string">这个文章不能被校验,</span> <span class="string">不过您还是能看看解密后的内容.</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h1 id="给文章插入音频"><a class="markdownIt-Anchor" href="#给文章插入音频"></a> 给文章插入音频</h1><blockquote><p>MetingJS 是基于Meting API 的 APlayer 衍生播放器，引入 MetingJS 后，播放器将支持对于 QQ音乐、网易云音乐、虾米、酷狗、百度等平台的音乐播放。</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 简单示例 (id, server, type)  --&gt;</span><br><span class="line">&#123;% meting &quot;60198&quot; &quot;netease&quot; &quot;song&quot; &quot;autoplay&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 进阶示例 --&gt;</span><br><span class="line">&#123;% meting &quot;60198&quot; &quot;netease&quot; &quot;playlist&quot; &quot;autoplay&quot; &quot;mutex:false&quot; &quot;listmaxheight:340px&quot; &quot;preload:none&quot; &quot;theme:#ad7a86&quot;%&#125;</span><br></pre></td></tr></table></figure>    <div id="aplayer-GHpLHwIV" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="436514312" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="true" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div><p><strong>有关<code>    <div id="aplayer-LwNRrUYZ" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="undefined" data-server="undefined" data-type="undefined" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div></code>的选项列表如下</strong></p><table><thead><tr><th>选项</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td><strong>必须值</strong></td><td>歌曲 id / 播放列表 id / 相册 id / 搜索关键字</td></tr><tr><td>server</td><td><strong>必须值</strong></td><td>音乐平台: <code>netease</code>, <code>tencent</code>, <code>kugou</code>, <code>xiami</code>, <code>baidu</code></td></tr><tr><td>type</td><td><strong>必须值</strong></td><td><code>song</code>, <code>playlist</code>, <code>album</code>, <code>search</code>, <code>artist</code></td></tr><tr><td>fixed</td><td><code>false</code></td><td>开启固定模式</td></tr><tr><td>mini</td><td><code>false</code></td><td>开启迷你模式</td></tr><tr><td>loop</td><td><code>all</code></td><td>列表循环模式：<code>all</code>, <code>one</code>,<code>none</code></td></tr><tr><td>order</td><td><code>list</code></td><td>列表播放模式： <code>list</code>, <code>random</code></td></tr><tr><td>volume</td><td>0.7</td><td>播放器音量</td></tr><tr><td>lrctype</td><td>0</td><td>歌词格式类型</td></tr><tr><td>listfolded</td><td><code>false</code></td><td>指定音乐播放列表是否折叠</td></tr><tr><td>storagename</td><td><code>metingjs</code></td><td>LocalStorage 中存储播放器设定的键名</td></tr><tr><td>autoplay</td><td><code>true</code></td><td>自动播放，移动端浏览器暂时不支持此功能</td></tr><tr><td>mutex</td><td><code>true</code></td><td>该选项开启时，如果同页面有其他 aplayer 播放，该播放器会暂停</td></tr><tr><td>listmaxheight</td><td><code>340px</code></td><td>播放列表的最大长度</td></tr><tr><td>preload</td><td><code>auto</code></td><td>音乐文件预载入模式，可选项： <code>none</code>, <code>metadata</code>, <code>auto</code></td></tr><tr><td>theme</td><td><code>#ad7a86</code></td><td>播放器风格色彩设置</td></tr></tbody></table><h1 id="给文章添加日历"><a class="markdownIt-Anchor" href="#给文章添加日历"></a> 给文章添加日历</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;% dateLunar(date(post.date)) %&gt;</span><br></pre></td></tr></table></figure><h1 id="在文章中插入优酷视频"><a class="markdownIt-Anchor" href="#在文章中插入优酷视频"></a> 在文章中插入优酷视频</h1><p>如要插入优酷视频“同理心”，查看它的链接为http://v.youku.com/v_show/id_XMTQ2MjU2NTU2OA==.html，那么就将其中的id提取出来，使用下述代码即可：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% youku 400 480 %&#125;</span><br><span class="line">XNDQ0NDgyODgzMg</span><br><span class="line">&#123;% endyouku %&#125;</span><br></pre></td></tr></table></figure><p>其中，参数600指定视频展示的高度为600px，800则指定视频展示的宽度为800px，如不写明这两项参数则默认值为高度600px，宽度800px。</p><iframe height="400" width="480" src="http://player.youku.com/embed/XNDQ0NDgyODgzMg" frameborder="0" allowfullscreen></iframe><h1 id="给文章添加流程图"><a class="markdownIt-Anchor" href="#给文章添加流程图"></a> 给文章添加流程图</h1><ul><li>示例</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">` ` `flow</span><br><span class="line">st=&gt;start: 开始</span><br><span class="line">op=&gt;operation: My Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line">e=&gt;end</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br><span class="line">` ` `</span><br></pre></td></tr></table></figure><ul><li>效果</li></ul><div id="flowchart-0" class="flow-chart"></div><h1 id="给文章添加uml数据建模图"><a class="markdownIt-Anchor" href="#给文章添加uml数据建模图"></a> 给文章添加UML数据建模图</h1><ul><li>示例</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">` ` `sequence</span><br><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br><span class="line">` ` `</span><br></pre></td></tr></table></figure><ul><li>效果</li></ul><pre class="highlight"><code class="sequence">Alice-&gt;Bob: Hello Bob, how are you?Note right of Bob: Bob thinksBob--&gt;Alice: I am good thanks!```&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js&quot;&gt;&lt;/script&gt;<textarea id="flowchart-0-code" style="display: none">st=>start: 开始op=>operation: My Operationcond=>condition: Yes or No?e=>endst->op->condcond(yes)->econd(no)->op</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script></code></pre>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式学习小抄</title>
      <link href="/2019/12/07/gong-ju-zi-liao/zheng-ze-biao-da-shi-xue-xi-xiao-chao/"/>
      <url>/2019/12/07/gong-ju-zi-liao/zheng-ze-biao-da-shi-xue-xi-xiao-chao/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  正则表达式，又称规则表达式。（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。<br />  许多程序设计语言都支持利用正则表达式进行字符串操作。例如，在Perl中就内建了一个功能强大的正则表达式引擎。正则表达式这个概念最初是由Unix中的工具软件（例如sed和grep）普及开的。正则表达式通常缩写成“regex”，单数有regexp、regex，复数有regexps、regexes、regexen。</p><div class="row">    <embed src="http://static.gadfly.pub/%E6%AD%A3%E5%88%99%E5%B0%8F%E6%8A%84.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>在Hexo中插入ECharts动态图表</title>
      <link href="/2019/12/07/gong-ju-zi-liao/zai-hexo-zhong-cha-ru-echarts-dong-tai-tu-biao/"/>
      <url>/2019/12/07/gong-ju-zi-liao/zai-hexo-zhong-cha-ru-echarts-dong-tai-tu-biao/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="什么是-echarts-图表"><a class="markdownIt-Anchor" href="#什么是-echarts-图表"></a> 什么是 ECharts 图表</h1><p>  ECharts，一个纯 Javascript 的图表库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖轻量级的 Canvas 类库 ZRender，提供直观，生动，可交互，可高度个性化定制的数据可视化图表。ECharts 作为国产工具，在语言上对中文开发者有着天然的优势，官方文档对每一个细节、参数、配置都有详尽的说明，对于新手非常的友好。另外一个重要的方面，就是 ECharts 的图表颜值很高，默认的主题和配色可以呈现出优雅漂亮的图表。所以，我也一直选择 ECharts 作为我的网页图表绘图工具。</p>    <div id="aplayer-ZXjvyKtY" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="1406211977" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="true" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div><h1 id="hexo-中的-echarts"><a class="markdownIt-Anchor" href="#hexo-中的-echarts"></a> Hexo 中的 ECharts</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% echarts 400 '85%' %&#125;</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    tooltip : &#123;</span></span><br><span class="line"><span class="code">        trigger: 'axis',</span></span><br><span class="line"><span class="code">        axisPointer : &#123;            // 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line"><span class="code">            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123;</span></span><br><span class="line"><span class="code">        data:['利润', '支出', '收入']</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    grid: &#123;</span></span><br><span class="line"><span class="code">        left: '3%',</span></span><br><span class="line"><span class="code">        right: '4%',</span></span><br><span class="line"><span class="code">        bottom: '3%',</span></span><br><span class="line"><span class="code">        containLabel: true</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    xAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : 'value'</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    yAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : 'category',</span></span><br><span class="line"><span class="code">            axisTick : &#123;show: false&#125;,</span></span><br><span class="line"><span class="code">            data : ['周一','周二','周三','周四','周五','周六','周日']</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    series : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:'利润',</span></span><br><span class="line"><span class="code">            type:'bar',</span></span><br><span class="line"><span class="code">            itemStyle : &#123;</span></span><br><span class="line"><span class="code">                normal: &#123;</span></span><br><span class="line"><span class="code">                    label: &#123;show: true, position: 'inside'&#125;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            data:[200, 170, 240, 244, 200, 220, 210]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:'收入',</span></span><br><span class="line"><span class="code">            type:'bar',</span></span><br><span class="line"><span class="code">            stack: '总量',</span></span><br><span class="line"><span class="code">            itemStyle: &#123;</span></span><br><span class="line"><span class="code">                normal: &#123;</span></span><br><span class="line"><span class="code">                    label : &#123;show: true&#125;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            data:[320, 302, 341, 374, 390, 450, 420]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:'支出',</span></span><br><span class="line"><span class="code">            type:'bar',</span></span><br><span class="line"><span class="code">            stack: '总量',</span></span><br><span class="line"><span class="code">            itemStyle: &#123;normal: &#123;</span></span><br><span class="line"><span class="code">                label : &#123;show: true, position: 'left'&#125;</span></span><br><span class="line"><span class="code">            &#125;&#125;,</span></span><br><span class="line"><span class="code">            data:[-120, -132, -101, -134, -190, -230, -210]</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line">&#125;;</span><br><span class="line">&#123;% endecharts %&#125;</span><br></pre></td></tr></table></figure><div id="echarts2550" style="width: 85%;height: 400px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts2550'));        // 指定图表的配置项和数据        var option = {    tooltip : {        trigger: 'axis',        axisPointer : {            // 坐标轴指示器，坐标轴触发有效            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'        }    },    legend: {        data:['利润', '支出', '收入']    },    grid: {        left: '3%',        right: '4%',        bottom: '3%',        containLabel: true    },    xAxis : [        {            type : 'value'        }    ],    yAxis : [        {            type : 'category',            axisTick : {show: false},            data : ['周一','周二','周三','周四','周五','周六','周日']        }    ],    series : [        {            name:'利润',            type:'bar',            itemStyle : {                normal: {                    label: {show: true, position: 'inside'}                }            },            data:[200, 170, 240, 244, 200, 220, 210]        },        {            name:'收入',            type:'bar',            stack: '总量',            itemStyle: {                normal: {                    label : {show: true}                }            },            data:[320, 302, 341, 374, 390, 450, 420]        },        {            name:'支出',            type:'bar',            stack: '总量',            itemStyle: {normal: {                label : {show: true, position: 'left'}            }},            data:[-120, -132, -101, -134, -190, -230, -210]        }    ]};        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h1 id="如何用好-echarts"><a class="markdownIt-Anchor" href="#如何用好-echarts"></a> 如何用好 ECharts</h1><p>  ECharts 的官方文档详细的介绍了如何在开发中使用 ECharts，如果你是一名前端 JavaScript 开发者，当然可以仔细的阅读并用代码实现。但是，如果你只是希望在博客中插入一些简单的图表，那么从头到尾写一个完整的图表配置，甚至是 ECharts 生成代码是没有必要的，所以我们需要更简单的方法来生成相关的数据。百度·图说是 ECharts 团队开发的另一款非常方便的工具，提供 UI 界面给你快速的绘制和定义图表，然后导出为代码、图片以及其他格式。</p><p>打开百度图说，点击开始创建图表，我们可以看到有非常多的选择：<br><img alt data-src="http://data.kchen.cc/mac_qrsync/ed9592d667cc0ad300cd455e87d5bafe.png-960.jpg" class="lazyload"></p>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Markdown </tag>
            
            <tag> ECharts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将一个已存在的目录转换为一个 GIT 项目并托管到 GITHUB 仓库</title>
      <link href="/2019/12/07/gong-ju-zi-liao/jiang-yi-ge-yi-cun-zai-de-mu-lu-zhuan-huan-wei-yi-ge-git-xiang-mu-bing-tuo-guan-dao-github-cang-ku/"/>
      <url>/2019/12/07/gong-ju-zi-liao/jiang-yi-ge-yi-cun-zai-de-mu-lu-zhuan-huan-wei-yi-ge-git-xiang-mu-bing-tuo-guan-dao-github-cang-ku/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><ol><li><p>进入项目所在目录，右键，点击Git Bash Here进入终端</p></li><li><p>将目录初始化为一个 Git 项目</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git init</span></span><br></pre></td></tr></table></figure><p>执行完后会在目录中创建一个 .git 隐藏文件夹</p></li><li><p>将所有文件放进新的本地git仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br></pre></td></tr></table></figure><p>如果本地已经有.gitignore文件，会按照已有规则过滤不需要添加的文件。如果不想要添加所有文件，可以把符号换成具体的文件名</p></li><li><p>将添加的文件提交到仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"Initial commit"</span></span></span><br></pre></td></tr></table></figure></li><li><p>将本地仓库关联到远程仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote add origin https://github.com/javacfox/Blog_Back_Up</span></span><br></pre></td></tr></table></figure></li><li><p>运行以下命令查看结果</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin master</span></span><br></pre></td></tr></table></figure></li><li><p>提交代码之前先执行一下同步</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin master</span></span><br></pre></td></tr></table></figure></li><li><p>如果报错，可以执行如下命令,慎用</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin master --allow-unrelated-histories</span></span><br></pre></td></tr></table></figure></li></ol><p>后面加上 --allow-unrelated-histories，把两段不相干的 分支进行强行合并，因为是提交到一个空白仓库，所以可以强制执行，然后在执行git push origin master</p>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown中数学公式整理</title>
      <link href="/2019/11/25/gong-ju-zi-liao/markdown-zhong-shu-xue-gong-shi-zheng-li/"/>
      <url>/2019/11/25/gong-ju-zi-liao/markdown-zhong-shu-xue-gong-shi-zheng-li/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="简要介绍"><a class="markdownIt-Anchor" href="#简要介绍"></a> 简要介绍</h2><blockquote><p>因为要使用markdown编辑数学公式然后在文档、网页中使用，但是自己总是记不住这么多东西，特别是几天不用，很多都忘记了，因此准备就数学公式的Latex编辑方式做一个整理，以方便自己和读者今后使用。</p></blockquote><h3 id="常用数学运算符"><a class="markdownIt-Anchor" href="#常用数学运算符"></a> 常用数学运算符</h3><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>加</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x + y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x + y$</code></td></tr><tr><td>减</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>−</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x - y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x - y$</code></td></tr><tr><td>乘</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>×</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \times y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \times y$</code></td></tr><tr><td>点乘</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \cdot y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \cdot y$</code></td></tr><tr><td>星乘</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∗</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \ast y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \ast y$</code></td></tr><tr><td>除</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>÷</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \div y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \div y$</code></td></tr><tr><td>分数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\frac{x}{y}$</code></td></tr><tr><td>上标</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mi>y</mi></msup></mrow><annotation encoding="application/x-tex">x ^ y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span></span></span></span></span></span></span></td><td><code>$x ^ y$</code></td></tr><tr><td>下标</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">x _ y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></td><td><code>$x _ y$</code></td></tr><tr><td>开二次方</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>x</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathdefault" style="padding-left:0.833em;">x</span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\sqrt x$</code></td></tr><tr><td>开方</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mroot><mrow><msup><mi>y</mi><mn>4</mn></msup><mo>+</mo><mn>3</mn><mi>y</mi><mo>−</mo><mn>1</mn></mrow><mi>x</mi></mroot></mrow><annotation encoding="application/x-tex">\sqrt[x]{y^4+3y-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.2821659999999999em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6206808em;"><span style="top:-2.9054008000000002em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578340000000001em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.917834em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2821659999999999em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\sqrt[x]{y^4+3y-1}$</code></td></tr><tr><td>加减</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>±</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \pm y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">±</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \pm y$</code></td></tr><tr><td>减加</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∓</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \mp y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∓</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \mp y$</code></td></tr><tr><td>行间公式</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><msup><mi>e</mi><mrow><mi>a</mi><mi>x</mi></mrow></msup><mo>=</mo><mi>a</mi><msup><mi>e</mi><mrow><mi>a</mi><mi>x</mi></mrow></msup><mspace width="1em"></mspace><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mrow><mo stretchy="false">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent="true"><mi>X</mi><mo stretchy="true">‾</mo></mover><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mrow><annotation encoding="application/x-tex">\frac{d}{dx}e^{ax}=ae^{ax}\quad \sum_{i=1}^{n}{(X_i - \overline{X})^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.18304em;vertical-align:-0.29971000000000003em;"></span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></td><td><code>$\frac{d}{dx}e^{ax}=ae^{ax}\quad \sum_{i=1}^{n}{(X_i - \overline{X})^2}$</code></td></tr><tr><td>开根号</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mn>2</mn></msqrt><mo separator="true">;</mo><mroot><mn>3</mn><mi>n</mi></mroot></mrow><annotation encoding="application/x-tex">\sqrt{2};\sqrt[n]{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.10166em;vertical-align:-0.19444em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.679944em;"><span style="top:-2.964664em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">3</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\sqrt{2};\sqrt[n]{3}$</code></td></tr><tr><td>矢量</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>b</mi><mo>⃗</mo></mover><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\vec{a} \cdot \vec{b}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.714em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9774399999999999em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></td><td><code>$\vec{a} \cdot \vec{b}=0$</code></td></tr><tr><td>积分</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∫</mo><mn>3</mn><mn>2</mn></msubsup><msup><mi>x</mi><mn>2</mn></msup><mi mathvariant="normal">d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\int ^2_3 x^2 {\rm d}x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3648280000000002em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0090080000000001em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2579000000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathdefault">x</span></span></span></span></td><td><code>$\int ^2_3 x^2 {\rm d}x$</code></td></tr><tr><td>极限</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>n</mi><mo>→</mo><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">\lim_{n\rightarrow+\infty} n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mop"><span class="mop">lim</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span></span></span></span></td><td><code>$\lim_{n\rightarrow+\infty} n$</code></td></tr><tr><td>累加</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∑</mo><mn>1</mn><mi>i</mi><mn>2</mn><mo>∑</mo><mfrac><mn>1</mn><msup><mi>i</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">∑1i2 \sum \frac{1}{i^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault">i</span><span class="mord">2</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$∑1i2\sum \frac{1}{i^2}$</code></td></tr><tr><td>累乘</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∏</mo><mfrac><mn>1</mn><msup><mi>i</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">\prod \frac{1}{i^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∏</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\prod \frac{1}{i^2}$</code></td></tr></tbody></table><ul><li><h3 id="关系运算符"><a class="markdownIt-Anchor" href="#关系运算符"></a> 关系运算符</h3></li></ul><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x = y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x = y$</code></td></tr><tr><td>小于等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≤</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \leq y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \leq y$</code></td></tr><tr><td>大于等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≥</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \geq y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \geq y$</code></td></tr><tr><td>不大于等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≱</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \ngeq y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.09657em;vertical-align:-0.30274em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel amsrm">≱</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \ngeq y$</code></td></tr><tr><td>不大于等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≱</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \not\geq y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \not\geq y$</code></td></tr><tr><td>不等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi mathvariant="normal">≠</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">x \neq y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \neq y$</code></td></tr><tr><td>约等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≈</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \approx y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.48312em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \approx y$</code></td></tr><tr><td>恒等于</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>≡</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \equiv y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46375em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></td><td><code>$x \equiv y$</code></td></tr><tr><td>省略号</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span></td><td><code>$\cdots$</code></td></tr></tbody></table><ul><li><h3 id="逻辑运算符"><a class="markdownIt-Anchor" href="#逻辑运算符"></a> 逻辑运算符</h3></li></ul><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>因为</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∵</mo></mrow><annotation encoding="application/x-tex">\because</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">∵</span></span></span></span></td><td><code>$\because$</code></td></tr><tr><td>所以</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∴</mo></mrow><annotation encoding="application/x-tex">\therefore</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">∴</span></span></span></span></td><td><code>$\therefore$</code></td></tr><tr><td>∀</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∀</mi></mrow><annotation encoding="application/x-tex">\forall</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∀</span></span></span></span></td><td><code>$\forall$</code></td></tr><tr><td>∃</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∃</mi></mrow><annotation encoding="application/x-tex">\exists</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∃</span></span></span></span></td><td><code>$\exists$</code></td></tr><tr><td>≠</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≠</mo></mrow><annotation encoding="application/x-tex">\not=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span></td><td><code>$\not=$</code></td></tr><tr><td>≯</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&gt;̸</mo></mrow><annotation encoding="application/x-tex">\not&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span></span></span></td><td><code>$\not&gt;$</code></td></tr><tr><td>⊄</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊄</mo></mrow><annotation encoding="application/x-tex">\not\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊂</span></span></span></span></td><td><code>$\not\subset$</code></td></tr></tbody></table><ul><li><h3 id="集合运算符"><a class="markdownIt-Anchor" href="#集合运算符"></a> 集合运算符</h3></li></ul><table><thead><tr><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\emptyset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td><td><code>$\emptyset$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span></td><td><code>$\in$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∉</mi></mrow><annotation encoding="application/x-tex">\notin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span></span></span></span></span></span></span></span></span></span></td><td><code>$\notin$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊂</mo></mrow><annotation encoding="application/x-tex">\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊂</span></span></span></span></td><td><code>$\subset$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊃</mo></mrow><annotation encoding="application/x-tex">\supset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊃</span></span></span></span></td><td><code>$\supset$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊆</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span></span></span></span></td><td><code>$\subseteq$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊇</mo></mrow><annotation encoding="application/x-tex">\supseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊇</span></span></span></span></td><td><code>$\supseteq$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋂</mo></mrow><annotation encoding="application/x-tex">\bigcap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋂</span></span></span></span></td><td><code>$\bigcap$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋃</mo></mrow><annotation encoding="application/x-tex">\bigcup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋃</span></span></span></span></td><td><code>$\bigcup$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋁</mo></mrow><annotation encoding="application/x-tex">\bigvee</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋁</span></span></span></span></td><td><code>$\bigvee$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋀</mo></mrow><annotation encoding="application/x-tex">\bigwedge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋀</span></span></span></span></td><td><code>$\bigwedge$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨄</mo></mrow><annotation encoding="application/x-tex">\biguplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨄</span></span></span></span></td><td><code>$\biguplus$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨆</mo></mrow><annotation encoding="application/x-tex">\bigsqcup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨆</span></span></span></span></td><td><code>$\bigsqcup$</code></td></tr></tbody></table><ul><li><h3 id="希腊字母"><a class="markdownIt-Anchor" href="#希腊字母"></a> 希腊字母</h3></li></ul><table><thead><tr><th>大写</th><th>markdown</th><th>小写</th><th>markdown</th><th>小写</th><th>markdown</th><th>小写</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></td><td><code>$\alpha$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></td><td><code>$\beta$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Γ</span></span></span></span></td><td><code>$\Gamma$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span></span></span></span></td><td><code>$\gamma$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span></td><td><code>$\Delta$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span></span></span></td><td><code>$\epsilon$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td><td><code>$\varepsilon$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ζ</mi></mrow><annotation encoding="application/x-tex">\zeta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07378em;">ζ</span></span></span></span></td><td>\zeta$`</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">η</span></span></span></span></td><td><code>$\eta$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi></mrow><annotation encoding="application/x-tex">\Theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Θ</span></span></span></span></td><td><code>$\Theta$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span></td><td><code>$\theta$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ι</mi></mrow><annotation encoding="application/x-tex">\iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ι</span></span></span></span></td><td><code>$\iota$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">κ</span></span></span></span></td><td><code>$\kappa$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Λ</span></span></span></span></td><td><code>$\Lambda$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">λ</span></span></span></span></td><td><code>$\lambda$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span></td><td><code>$\mu$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ν</mi></mrow><annotation encoding="application/x-tex">\nu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.06366em;">ν</span></span></span></span></td><td><code>$\nu$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ξ</mi></mrow><annotation encoding="application/x-tex">\Xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ξ</span></span></span></span></td><td><code>$\Xi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ξ</mi></mrow><annotation encoding="application/x-tex">\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.04601em;">ξ</span></span></span></span></td><td><code>$\xi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ο</mi></mrow><annotation encoding="application/x-tex">\omicron</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ο</span></span></span></span></td><td><code>$\omicron$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Π</mi></mrow><annotation encoding="application/x-tex">\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Π</span></span></span></span></td><td><code>$\Pi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span></td><td><code>$\pi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span></td><td><code>$\rho$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span></td><td><code>$\Sigma$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span></span></td><td><code>$\sigma$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span></td><td><code>$\tau$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Υ</mi></mrow><annotation encoding="application/x-tex">\Upsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Υ</span></span></span></span></td><td><code>$\Upsilon$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>υ</mi></mrow><annotation encoding="application/x-tex">\upsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">υ</span></span></span></span></td><td><code>$\upsilon$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Φ</mi></mrow><annotation encoding="application/x-tex">\Phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Φ</span></span></span></span></td><td><code>$\Phi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span></td><td><code>$\phi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">φ</span></span></span></span></td><td><code>$\varphi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>χ</mi></mrow><annotation encoding="application/x-tex">\chi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">χ</span></span></span></span></td><td><code>$\chi$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ψ</mi></mrow><annotation encoding="application/x-tex">\Psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ψ</span></span></span></span></td><td><code>$\Psi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span></span></span></td><td><code>$\psi$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ω</span></span></span></span></td><td><code>$\Omega$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span></span></span></span></td><td><code>$\omega$</code></td></tr></tbody></table><ul><li><h3 id="戴帽符号"><a class="markdownIt-Anchor" href="#戴帽符号"></a> 戴帽符号：</h3></li></ul><table><thead><tr><th>算式</th><th>markdown</th><th>算式</th><th>markdown</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\hat{y}$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>ˇ</mo></mover></mrow><annotation encoding="application/x-tex">\check{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.82291em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.62847em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">ˇ</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\check{y}$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>˘</mo></mover></mrow><annotation encoding="application/x-tex">\breve{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">˘</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\breve{y}$</code></td></tr></tbody></table><ul><li><h3 id="连线符号"><a class="markdownIt-Anchor" href="#连线符号"></a> 连线符号：</h3></li></ul><table><thead><tr><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo>+</mo><mi>d</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{a+b+c+d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.97777em;vertical-align:-0.08333em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.89444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span></span></span><span style="top:-3.81444em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.08333em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\overline{a+b+c+d}$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder accentunder="true"><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo>+</mo><mi>d</mi></mrow><mo stretchy="true">‾</mo></munder></mrow><annotation encoding="application/x-tex">\underline{a+b+c+d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.97777em;vertical-align:-0.2833300000000001em;"></span><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-2.7566699999999997em;"><span class="pstrut" style="height:3em;"></span><span class="underline-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2833300000000001em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\underline{a+b+c+d}$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mover><mrow><mi>a</mi><mo>+</mo><munder><munder><mrow><mi>b</mi><mo>+</mo><mi>c</mi></mrow><mo stretchy="true">⏟</mo></munder><mn>1.0</mn></munder><mo>+</mo><mi>d</mi></mrow><mo stretchy="true">⏞</mo></mover><mn>2.0</mn></mover></mrow><annotation encoding="application/x-tex">\overbrace{a+\underbrace{b+c}_{1.0}+d}^{2.0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.3759859999999997em;vertical-align:-1.382438em;"></span><span class="mord mover"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9935479999999997em;"><span style="top:-3.34244em;"><span class="pstrut" style="height:3.34244em;"></span><span class="mord mover"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3424399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-1.617562em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">.</span><span class="mord mtight">0</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span class="svg-align" style="top:-2.26867em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.73133em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.382438em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span></span></span><span class="svg-align" style="top:-3.79444em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMinYMin slice"><path d="M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7 5-6 9-10 13-.7 1-7.3 1-20 1H6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMidYMin slice"><path d="M200428 334c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMaxYMin slice"><path d="M400000 542l-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.382438em;"><span></span></span></span></span></span></span><span style="top:-4.88488em;"><span class="pstrut" style="height:3.34244em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.382438em;"><span></span></span></span></span></span></span></span></span></td><td><code>$\overbrace{a+\underbrace{b+c}_{1.0}+d}^{2.0}$</code></td></tr></tbody></table><ul><li><h3 id="箭头符号"><a class="markdownIt-Anchor" href="#箭头符号"></a> 箭头符号：</h3></li></ul><table><thead><tr><th>算式</th><th>markdown</th><th>算式</th><th>markdown</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↑</mo></mrow><annotation encoding="application/x-tex">\uparrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">↑</span></span></span></span></td><td><code>$\uparrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↓</mo></mrow><annotation encoding="application/x-tex">\downarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">↓</span></span></span></span></td><td><code>$\downarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇑</mo></mrow><annotation encoding="application/x-tex">\Uparrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">⇑</span></span></span></span></td><td><code>$\Uparrow$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇓</mo></mrow><annotation encoding="application/x-tex">\Downarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">⇓</span></span></span></span></td><td><code>$\Downarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span></td><td><code>$\rightarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>←</mo></mrow><annotation encoding="application/x-tex">\leftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">←</span></span></span></span></td><td><code>$\leftarrow$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">⇒</span></span></span></span></td><td><code>$\Rightarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇐</mo></mrow><annotation encoding="application/x-tex">\Leftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">⇐</span></span></span></span></td><td><code>$\Leftarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⟶</mo></mrow><annotation encoding="application/x-tex">\longrightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mrel">⟶</span></span></span></span></td><td><code>$\longrightarrow$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⟵</mo></mrow><annotation encoding="application/x-tex">\longleftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mrel">⟵</span></span></span></span></td><td><code>$\longleftarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⟹</mo></mrow><annotation encoding="application/x-tex">\Longrightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mrel">⟹</span></span></span></span></td><td><code>$\Longrightarrow$</code></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⟸</mo></mrow><annotation encoding="application/x-tex">\Longleftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mrel">⟸</span></span></span></span></td><td><code>$\Longleftarrow$</code></td></tr></tbody></table><ul><li><h3 id="使用指定字体"><a class="markdownIt-Anchor" href="#使用指定字体"></a> 使用指定字体</h3></li></ul><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>罗马体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">f</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">w</mi></mrow><annotation encoding="application/x-tex">{\rm longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">l</span><span class="mord mathrm">o</span><span class="mord mathrm">n</span><span class="mord mathrm" style="margin-right:0.01389em;">g</span><span class="mord mathrm">l</span><span class="mord mathrm">e</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mord mathrm">t</span><span class="mord mathrm">a</span><span class="mord mathrm">r</span><span class="mord mathrm">r</span><span class="mord mathrm">o</span><span class="mord mathrm" style="margin-right:0.01389em;">w</span></span></span></span></span></span></td><td><code>${\rm longleftarrow}$</code></td></tr><tr><td>意大利体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\it longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord"><span class="mord mathit">l</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">g</span><span class="mord mathit">l</span><span class="mord mathit">e</span><span class="mord mathit">f</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">r</span><span class="mord mathit">r</span><span class="mord mathit">o</span><span class="mord mathit">w</span></span></span></span></span></span></td><td><code>${\it longleftarrow}$</code></td></tr><tr><td>黑体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">l</mi><mi mathvariant="bold">o</mi><mi mathvariant="bold">n</mi><mi mathvariant="bold">g</mi><mi mathvariant="bold">l</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">f</mi><mi mathvariant="bold">t</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">o</mi><mi mathvariant="bold">w</mi></mrow><annotation encoding="application/x-tex">{\bf longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">l</span><span class="mord mathbf">o</span><span class="mord mathbf">n</span><span class="mord mathbf" style="margin-right:0.01597em;">g</span><span class="mord mathbf">l</span><span class="mord mathbf">e</span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mord mathbf">t</span><span class="mord mathbf">a</span><span class="mord mathbf">r</span><span class="mord mathbf">r</span><span class="mord mathbf">o</span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span></span></span></span></span></td><td><code>${\bf longleftarrow}$</code></td></tr><tr><td>花体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\mathcal longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\cal longleftarrow}$</code></td></tr><tr><td>倾斜体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{sl longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\sl longleftarrow}$</code></td></tr><tr><td>等线体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">n</mi><mi mathvariant="sans-serif">g</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">e</mi><mi mathvariant="sans-serif">f</mi><mi mathvariant="sans-serif">t</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">r</mi><mi mathvariant="sans-serif">r</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">w</mi></mrow><annotation encoding="application/x-tex">{\sf longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord"><span class="mord mathsf">l</span><span class="mord mathsf">o</span><span class="mord mathsf">n</span><span class="mord mathsf" style="margin-right:0.01389em;">g</span><span class="mord mathsf">l</span><span class="mord mathsf">e</span><span class="mord mathsf" style="margin-right:0.06944em;">f</span><span class="mord mathsf">t</span><span class="mord mathsf">a</span><span class="mord mathsf" style="margin-right:0.01389em;">r</span><span class="mord mathsf" style="margin-right:0.01389em;">r</span><span class="mord mathsf">o</span><span class="mord mathsf" style="margin-right:0.01389em;">w</span></span></span></span></span></span></td><td><code>${\sf longleftarrow}$</code></td></tr><tr><td>数学斜体1</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\mathscr longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\mathscr longleftarrow}$</code></td></tr><tr><td>数学斜体2</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="fraktur">l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\mathfrak longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathfrak">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\mathfrak longleftarrow}$</code></td></tr><tr><td>数学空心1</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\Bbb longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\Bbb longleftarrow}$</code></td></tr><tr><td>数学空心2</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">{\mathbb longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></td><td><code>${\mathbb longleftarrow}$</code></td></tr><tr><td>打字机字体</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="monospace">l</mi><mi mathvariant="monospace">o</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">g</mi><mi mathvariant="monospace">l</mi><mi mathvariant="monospace">e</mi><mi mathvariant="monospace">f</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">a</mi><mi mathvariant="monospace">r</mi><mi mathvariant="monospace">r</mi><mi mathvariant="monospace">o</mi><mi mathvariant="monospace">w</mi></mrow><annotation encoding="application/x-tex">{\tt longleftarrow}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.22222em;"></span><span class="mord"><span class="mord"><span class="mord mathtt">l</span><span class="mord mathtt">o</span><span class="mord mathtt">n</span><span class="mord mathtt">g</span><span class="mord mathtt">l</span><span class="mord mathtt">e</span><span class="mord mathtt">f</span><span class="mord mathtt">t</span><span class="mord mathtt">a</span><span class="mord mathtt">r</span><span class="mord mathtt">r</span><span class="mord mathtt">o</span><span class="mord mathtt">w</span></span></span></span></span></span></td><td><code>${\tt longleftarrow}$</code></td></tr></tbody></table><ul><li><h3 id="三角函数"><a class="markdownIt-Anchor" href="#三角函数"></a> 三角函数</h3></li></ul><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>垂直</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">⊥</mi></mrow><annotation encoding="application/x-tex">\bot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">⊥</span></span></span></span></td><td><code>$\bot$</code></td></tr><tr><td>角</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∠</mi></mrow><annotation encoding="application/x-tex">\angle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord">∠</span></span></span></span></td><td><code>$\angle$</code></td></tr><tr><td>度数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">30^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.674115em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span></td><td><code>$30^\circ$</code></td></tr><tr><td>正弦函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\sin A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\sin A=\frac{x}{y}$</code></td></tr><tr><td>余弦函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cos</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\cos A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\cos A=\frac{x}{y}$</code></td></tr><tr><td>正切函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tan</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\tan A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\tan A=\frac{x}{y}$</code></td></tr><tr><td>余切函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cot</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\cot A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">cot</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\cot A=\frac{x}{y}$</code></td></tr><tr><td>正割函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sec</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\sec A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">sec</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\sec A=\frac{x}{y}$</code></td></tr><tr><td>余割函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>csc</mi><mo>⁡</mo><mi>A</mi><mo>=</mo><mfrac><mi>x</mi><mi>y</mi></mfrac></mrow><annotation encoding="application/x-tex">\csc A=\frac{x}{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">csc</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><code>$\csc A=\frac{x}{y}$</code></td></tr></tbody></table><ul><li><h3 id="对数函数"><a class="markdownIt-Anchor" href="#对数函数"></a> 对数函数</h3></li></ul><table><thead><tr><th>名称</th><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td>ln函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ln</mi><mo>⁡</mo><mn>15</mn></mrow><annotation encoding="application/x-tex">\ln15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">5</span></span></span></span></td><td><code>$\ln15$</code></td></tr><tr><td>log函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mn>10</mn></mrow><annotation encoding="application/x-tex">log_210</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">1</span><span class="mord">0</span></span></span></span></td><td><code>$log_210$</code></td></tr><tr><td>lg函数</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>g</mi><mn>7</mn></mrow><annotation encoding="application/x-tex">lg7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord">7</span></span></span></span></td><td><code>$lg7$</code></td></tr></tbody></table><ul><li><h3 id="微积分运算符"><a class="markdownIt-Anchor" href="#微积分运算符"></a> 微积分运算符：</h3></li></ul><table><thead><tr><th>算式</th><th>markdown</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo mathvariant="normal">′</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">y\prime x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">′</span><span class="mord mathdefault">x</span></span></span></span></td><td><code>$y\prime x$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∫</mo></mrow><annotation encoding="application/x-tex">\int</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span></span></span></span></td><td><code>$\int$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∬</mo></mrow><annotation encoding="application/x-tex">\iint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">∬</span></span></span></span></td><td><code>$\iint$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∭</mo></mrow><annotation encoding="application/x-tex">\iiint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">∭</span></span></span></span></td><td><code>$\iiint$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∫</mo></mrow><annotation encoding="application/x-tex">\intop</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span></span></span></span></td><td><code>$\intop$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo largeop="false">∫</mo></mrow><annotation encoding="application/x-tex">\smallint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span></span></span></span></td><td><code>$\smallint$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∮</mo></mrow><annotation encoding="application/x-tex">\oint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∮</span></span></span></span></td><td><code>$\oint$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>lim</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\lim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">lim</span></span></span></span></td><td><code>$\lim$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></td><td><code>$\infty$</code></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi></mrow><annotation encoding="application/x-tex">\nabla</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">∇</span></span></span></span></td><td><code>$\nabla$</code></td></tr></tbody></table><ul><li><h3 id="需要转义的字符"><a class="markdownIt-Anchor" href="#需要转义的字符"></a> 需要转义的字符</h3></li></ul><blockquote><p>要输出字符　空格　#　$　%　&amp;　_　{　}　，用命令：　\空格　#　$　%　&amp;　_　{　}</p></blockquote><hr><ul><li><h2 id="更为详细的介绍英文"><a class="markdownIt-Anchor" href="#更为详细的介绍英文"></a> 更为详细的介绍（英文）</h2></li></ul><p><img alt data-src="https://img-blog.csdn.net/20180924212359444?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x2c2VoYWl5YW5nMTk5Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload"></p>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> MarkDown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java数组和集合（List、Map、Set）知识要点</title>
      <link href="/2019/11/23/cheng-xu-she-ji/java-shu-zu-he-ji-he-zhi-shi-yao-dian/"/>
      <url>/2019/11/23/cheng-xu-she-ji/java-shu-zu-he-ji-he-zhi-shi-yao-dian/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  数组是JAVA语言内置的数据类型，它是一个线性的序列，所以它可以快速的访问其他的元素。但是速度是要有代价的，当你创建了一个数组之后，它的容量就固定了，而且在其生命周期里是不能改变的。还有一点，JAVA里面的数组是会做边界检查的，所以当你越界访问时，会抛出RuntimeException，当然边界检查是以牺牲效率为代价的。数组与其它容器类的区别体现在三个方面：效率、类型识别和可以持有primitives。<br />  JAVA里面提供的其他容器还包括List，Set和Map。他们处理对象的时候就好像这些这些对象都没有自己的类型一样，容器将它所含的元素都看成是JAVA中所有类的根类Object类型的，这样我们只需创建一种容器，就能把所有的类型的对象全部放进去。</p><h1 id="数组和集合的区别"><a class="markdownIt-Anchor" href="#数组和集合的区别"></a> 数组和集合的区别</h1><ol><li>数组是大小固定的，并且同一个数组只能存放类型一样的数据（基本类型/引用类型）</li><li>AVA集合可以存储和操作数目不固定的一组数据。</li><li>JAVA集合只能存放引用类型的的数据，不能存放基本数据类型；数组可以。</li></ol><h1 id="数组和集合的定义方法"><a class="markdownIt-Anchor" href="#数组和集合的定义方法"></a> 数组和集合的定义方法</h1><ul><li><h2 id="数组array"><a class="markdownIt-Anchor" href="#数组array"></a> 数组（Array）</h2><ul><li><h3 id="数组第一种定义方式"><a class="markdownIt-Anchor" href="#数组第一种定义方式"></a> 数组第一种定义方式</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//分配长度为 4 个 int 型的内存空间，并分别赋初始值1，2，3，4</span></span><br><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure></li><li><h3 id="数组第二种定义方式"><a class="markdownIt-Anchor" href="#数组第二种定义方式"></a> 数组第二种定义方式</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//方式一的简写</span></span><br><span class="line"><span class="keyword">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure></li><li><h3 id="数组创建第三种方式先初始化后赋值"><a class="markdownIt-Anchor" href="#数组创建第三种方式先初始化后赋值"></a> 数组创建第三种方式(先初始化，后赋值)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//分配长度为 4 的内存空间，并全部赋为默认值 0</span></span><br><span class="line"><span class="comment">//相当于 int[] array = new int[4]&#123;0, 0, 0, 0&#125; 的简写</span></span><br><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line">array[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">array[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">array[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">array[<span class="number">0</span>] = <span class="number">1000</span>;    <span class="comment">//在索引范围以内可以更改</span></span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="集合"><a class="markdownIt-Anchor" href="#集合"></a> 集合</h2><ul><li><h3 id="list-集合"><a class="markdownIt-Anchor" href="#list-集合"></a> <code>List</code> 集合</h3><ul><li><h4 id="list集合包括list接口以及list接口的所有实现类-list集合具有以下特点"><a class="markdownIt-Anchor" href="#list集合包括list接口以及list接口的所有实现类-list集合具有以下特点"></a> List集合包括List接口以及List接口的所有实现类。List集合具有以下特点：</h4><ol><li>集合中的元素允许重复</li><li>集合中的元素是有顺序的，各元素插入的顺序就是各元素的顺序</li><li>集合中的元素可以通过索引来访问或者设置</li></ol></li><li><h4 id="list接口的实现类"><a class="markdownIt-Anchor" href="#list接口的实现类"></a> List接口的实现类:</h4><ol><li>ArrayList：数组实现，查询快，增删慢，轻量级；(线程不安全)</li><li>LinkedList：双向链表实现，增删快，查询慢 (线程不安全)</li><li>Vector：数组实现，重量级 (线程安全、使用少)</li></ol></li><li><h4 id="创建事例"><a class="markdownIt-Anchor" href="#创建事例"></a> 创建事例</h4>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">strList.add(<span class="string">"a"</span>);</span><br><span class="line">strList.add(<span class="string">"b"</span>);</span><br><span class="line">strList.add(<span class="string">"c"</span>);</span><br></pre></td></tr></table></figure></li><li><h4 id="list常用方法"><a class="markdownIt-Anchor" href="#list常用方法"></a> List常用方法</h4><ul><li><code>void add(int index, Object element)</code> ：添加对象element到位置index上</li><li><code>boolean addAll(int index, Collection collection)</code> ：在index位置后添加容器collection中所有的元素</li><li><code>Object get(int index)</code> ：取出下标为index的位置的元素</li><li><code>int indexOf(Object element)</code> ：查找对象element 在List中第一次出现的位置</li><li><code>int lastIndexOf(Object element)</code> ：查找对象element 在List中最后出现的位置</li><li><code>Object remove(int index)</code> ：删除index位置上的元素</li><li><code>ListIterator listIterator(int startIndex)</code>：返回一个ListIterator 跌代器，开始位置为startIndex</li><li><code>List subList(int fromIndex, int toIndex)</code> ：返回一个子列表List ,元素存放为从 fromIndex 到toIndex之前的一个元素</li></ul></li></ul></li><li><h3 id="map-集合"><a class="markdownIt-Anchor" href="#map-集合"></a> <code>Map</code> 集合</h3><ul><li><h4 id="map集合具有以下特点"><a class="markdownIt-Anchor" href="#map集合具有以下特点"></a> Map集合具有以下特点</h4><ol><li>Map接口并没有继承Collection接口，提供的是key到value的映射</li><li>Map中不能包含相同的key</li></ol></li><li><h4 id="map接口的实现类"><a class="markdownIt-Anchor" href="#map接口的实现类"></a> Map接口的实现类</h4><ul><li>HashMap：键值对，key不能重复，但是value可以重复；key的实现就是HashSet；value对应着放；允许null的键或值；</li><li>Hashtable：线程安全的，不允许null的键或值；</li><li>Properties:：key和value都是String类型，用来读配置文件；</li><li>TreeMap：对key排好序的Map; key 就是TreeSet, value对应每个key; key要实现Comparable接口或TreeMap有自己的构造器；</li><li>LinkedHashMap： 此实现与HashMap的不同之处在于，后者维护着一个运行于所有条目的双重链接列表。存储的数据是有序的。</li></ul></li><li><h4 id="map集合比较"><a class="markdownIt-Anchor" href="#map集合比较"></a> Map集合比较</h4><ul><li>HashMap的存入顺序和输出顺序无关。</li><li>LinkedHashMap 则保留了键值对的存入顺序。</li><li>TreeMap则是对Map中的元素进行排序。</li><li>因为HashMap和LinkedHashMap 存储数据的速度比直接使用TreeMap 要快，存取效率要高。</li><li>当完成了所有的元素的存放后，我们再对整个的Map中的元素进行排序。这样可以提高整个程序的运行的效率，缩短执行时间。</li></ul><blockquote><p>注意：TreeMap中是根据键（Key）进行排序的。而如果我们要使用TreeMap来进行正常的排序的话，Key 中存放的对象必须实现Comparable 接口。</p></blockquote></li><li><h4 id="map常用方法"><a class="markdownIt-Anchor" href="#map常用方法"></a> Map常用方法</h4><ul><li><code>Object put(Object key,Object value)</code>：用来存放一个键-值对Map中</li><li><code>Object remove(Object key)</code>：根据key(键)，移除键-值对，并将值返回</li><li><code>void putAll(Map mapping)</code> ：将另外一个Map中的元素存入当前的Map中</li><li><code>void clear()</code> ：清空当前Map中的元素</li><li><code>Object get(Object key)</code> ：根据key(键)取得对应的值</li><li><code>boolean containsKey(Object key)</code> ：判断Map中是否存在某键（key）</li><li><code>boolean containsValue(Object value)</code>:判断Map中是否存在某值(value)</li><li><code>public Set keySet()</code> ：返回所有的键（key），并使用Set容器存放</li><li><code>public Collection values()</code> ：返回所有的值（Value），并使用Collection存放</li><li><code>public Set entrySet()</code> ：返回一个实现 Map.Entry 接口的元素 Set</li></ul></li></ul></li><li><h3 id="set-集合"><a class="markdownIt-Anchor" href="#set-集合"></a> <code>Set</code> 集合</h3><ul><li><h4 id="set集合具有以下特点"><a class="markdownIt-Anchor" href="#set集合具有以下特点"></a> Set集合具有以下特点</h4><ol><li>集合中不包含重复元素(你可以重复添加，但只会保留第1个)</li><li>集合中的元素不一定保证有序</li></ol></li><li><h4 id="set接口的实现类"><a class="markdownIt-Anchor" href="#set接口的实现类"></a> Set接口的实现类</h4><ol><li><code>HashSet</code>：equals返回true，hashCode返回相同的整数；哈希表；存储的数据是无序的。<ul><li>HashSet的特征<ul><li>不仅不能保证元素插入的顺序，而且在元素在以后的顺序中也可能变化（这是由HashSet按HashCode存储对象（元素）决定的，对象变化则可能导致HashCode变化</li><li>HashSet是线程非安全的</li><li>HashSet元素值可以为NULL</li></ul></li><li>HashSet常用方法<ul><li><code>public boolean contains(Object o)</code> ：如果set包含指定元素，返回true</li><li><code>public Iterator iterator()</code> ：返回set中元素的迭代器</li><li><code>public Object[] toArray()</code>：返回包含set中所有元素的数组public Object[] toArray(Object[] a) ：返回包含set中所有元素的数组，返回数组的运行时类型是指定数组的运行时类型</li><li><code>public boolean add(Object o)</code> ：如果set中不存在指定元素，则向set加入</li><li><code>public boolean remove(Object o)</code>：如果set中存在指定元素，则从set中删除</li><li><code>public boolean removeAll(Collection c)</code>：如果set包含指定集合，则从set中删除指定集合的所有元素</li><li><code>public boolean containsAll(Collection c)</code> ：如果set包含指定集合的所有元素，返回true。如果指定集合也是一个set，只有是当前set的子集时，方法返回true</li></ul></li></ul></li><li><code>LinkedHashSet</code>：此实现与HashSet的不同之外在于，后者维护着一个运行于所有条目的双重链接列表。存储的数据是有序的。</li><li><code>TreeSet</code>：TreeSet实现了SortedSet接口，顾名思义这是一种排序的Set集合，查看jdk源码发现底层是用TreeMap实现的，本质上是一个红黑树原理。 正因为它是排序了的，所以相对HashSet来说，TreeSet提供了一些额外的按排序位置访问元素的方法，例如first(), last(), lower(), higher(), subSet(), headSet(), tailSet().</li><li><code>EnumSet</code>：顾名思义就是专为枚举类型设计的集合，因此集合元素必须是枚举类型，否则会抛出异常。 EnumSet集合也是有序的，其顺序就是Enum类内元素定义的顺序。 EnumSet存取的速度非常快，批量操作的速度也很快。EnumSet主要提供以下方法，allOf, complementOf, copyOf, noneOf, of, range等。注意到EnumSet并没有提供任何构造函数，要创建一个EnumSet集合对象，只需要调用allOf等方法</li></ol></li></ul></li><li><h4 id="各种set集合性能分析"><a class="markdownIt-Anchor" href="#各种set集合性能分析"></a> 各种Set集合性能分析</h4><ul><li>HashSet和TreeSet是Set集合中用得最多的I集合。HashSet总是比TreeSet集合性能好，因为HashSet不需要额维护元素的顺序。</li><li>LinkedHashSet需要用额外的链表维护元素的插入顺序，因此在插入时性能比HashSet低，但在迭代访问（遍历）时性能更高。因为插入的时候即要计算hashCode又要维护链表，而遍历的时候只需要按链表来访问元素。</li><li>EnumSet元素是所有Set元素中性能最好的，但是它只能保存Enum类型的元素</li></ul></li></ul></li></ul><h1 id="数组和集合的遍历方法"><a class="markdownIt-Anchor" href="#数组和集合的遍历方法"></a> 数组和集合的遍历方法</h1><ul><li><h2 id="数组的遍历"><a class="markdownIt-Anchor" href="#数组的遍历"></a> 数组的遍历</h2><ul><li>for 形式<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;in1.length;i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;in1[i].length;j++)&#123;</span><br><span class="line">      System.out.println(in1[i][j]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>增强for<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[][]in1=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>&#125;,&#123;<span class="number">5</span>,<span class="number">6</span>&#125;,&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> [] k:in1)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> l:k)&#123;</span><br><span class="line">      System.out.println(l);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>while形式<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;in1.length)&#123;</span><br><span class="line">  <span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(j&lt;in1[i].length)&#123;</span><br><span class="line">      System.out.println(in1[i][j]);</span><br><span class="line">      j++;</span><br><span class="line">  &#125;</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>do…while形式<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">  <span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">do</span>&#123;</span><br><span class="line">      System.out.println(in1[i][j]);</span><br><span class="line">      j++;</span><br><span class="line">  &#125;<span class="keyword">while</span>(j&lt;in1[i].length);</span><br><span class="line">    i++;</span><br><span class="line">&#125;<span class="keyword">while</span>(i&lt;in1.length);</span><br></pre></td></tr></table></figure></li></ul></li><li><h2 id="集合的遍历"><a class="markdownIt-Anchor" href="#集合的遍历"></a> 集合的遍历</h2><ul><li><h3 id="list遍历"><a class="markdownIt-Anchor" href="#list遍历"></a> List遍历</h3><ul><li>第一种遍历方法<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (String str : list) &#123;</span><br><span class="line">  System.out.println(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>第二种遍历方法<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    System.out.println(list.get(i));</span><br><span class="line">  &#125;</span><br><span class="line">  ``` </span><br><span class="line">* 第三种遍历方法</span><br><span class="line">  ```java</span><br><span class="line">  Iterator&lt;String&gt; iter = list.iterator();</span><br><span class="line">  <span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">      System.out.println(iter.next());</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="map遍历"><a class="markdownIt-Anchor" href="#map遍历"></a> Map遍历</h3><ul><li>增强for循环<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(Obj o:c)&#123;</span><br><span class="line">  syso(o)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>使用iterator ， Iterator it=c.iterator;<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">  Object o = it.next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>普通循环<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(Iterator it=c.iterator();it.hasNext();)&#123;</span><br><span class="line">  it.next() </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="set遍历"><a class="markdownIt-Anchor" href="#set遍历"></a> Set遍历</h3><ul><li>迭代遍历<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;String&gt;();  </span><br><span class="line">Iterator&lt;String&gt; it = set.iterator();  </span><br><span class="line"><span class="keyword">while</span> (it.hasNext()) &#123;  </span><br><span class="line">  String str = it.next();  </span><br><span class="line">  System.out.println(str);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>for循环遍历<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line"><span class="keyword">for</span> (String str : set) &#123;  </span><br><span class="line">  System.out.println(str);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>set.forEach循环遍历(java8 才支持)<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">set.forEach(item -&gt; &#123;</span><br><span class="line">    System.out.println(item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>set.stream().forEach循环遍历(java8 才支持)<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">set.stream().forEach(item -&gt; &#123;</span><br><span class="line">    System.out.println(item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h1 id="数组和集合的排序"><a class="markdownIt-Anchor" href="#数组和集合的排序"></a> 数组和集合的排序</h1><h1 id="数组和集合的相互转换"><a class="markdownIt-Anchor" href="#数组和集合的相互转换"></a> 数组和集合的相互转换</h1>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Array </tag>
            
            <tag> Map </tag>
            
            <tag> List </tag>
            
            <tag> Set </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot 笔记: 集成Spring Security + JWT实现Oauth2.0的授权码模式</title>
      <link href="/2019/11/11/cheng-xu-she-ji/springboot-bi-ji-ji-cheng-springsecurity-jwt-shi-xian-oauth2-de-shou-quan-ma-mo-shi/"/>
      <url>/2019/11/11/cheng-xu-she-ji/springboot-bi-ji-ji-cheng-springsecurity-jwt-shi-xian-oauth2-de-shou-quan-ma-mo-shi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="spring-security简介"><a class="markdownIt-Anchor" href="#spring-security简介"></a> Spring Security简介</h1><p>  SpringSecurity是基于Spring应用提供的声明式的安全保护性的框架，它可以在web请求级别的和方法调用级别处理身份和授权。他是基于AspectJ的切面经行配置的。</p><blockquote><p>spring security 的核心功能主要包括：</p><ul><li>认证 （你是谁）</li><li>授权 （你能干什么）</li><li>攻击防护 （防止伪造身份）</li></ul></blockquote><p>  其核心就是一组过滤器链，项目启动后将会自动配置。最核心的就是 Basic Authentication Filter 用来认证用户的身份，一个在spring security中一种过滤器处理一种认证方式。</p><h1 id="授权码模式authorization-code"><a class="markdownIt-Anchor" href="#授权码模式authorization-code"></a> 授权码模式（authorization code）</h1><p>  授权码模式（authorization code）是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与&quot;服务提供商&quot;的认证服务器进行互动。</p><h1 id="整合与配置spring-boot"><a class="markdownIt-Anchor" href="#整合与配置spring-boot"></a> 整合与配置Spring Boot</h1><h2 id="pomxml"><a class="markdownIt-Anchor" href="#pomxml"></a> pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.security.oauth/spring-security-oauth2 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security.oauth<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-oauth2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.postgresql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>postgresql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis-plus --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.baomidou/mybatis-plus-boot-starter --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 模版引擎 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Test--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="配置认证服务器"><a class="markdownIt-Anchor" href="#配置认证服务器"></a> 配置认证服务器</h2>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringSecurity </tag>
            
            <tag> JWT </tag>
            
            <tag> Oauth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQL 11 新特性之存储过程</title>
      <link href="/2019/11/09/shu-ju-jie-gou/postgresql11-xin-te-xing-zhi-cun-chu-guo-cheng/"/>
      <url>/2019/11/09/shu-ju-jie-gou/postgresql11-xin-te-xing-zhi-cun-chu-guo-cheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  PostgreSQL 11 版本一个重量级新特性是对存储过程的支持，同时支持存储过程嵌入事务，存储过程是很多 PostgreSQL 从业者期待已久的特性，尤其是很多从Oracle转到PostgreSQL朋友，尽管PostgreSQL提供函数可以实现大多数存储过程的功能，但在函数中无法执行事务实现部分提交，换句话说，函数中的SQL要么都执行成功，要不全部返回失败。<br />  PostgreSQL 11 版本对存储过程的支持，从兼容层面考虑和Oracle的兼容性进一步增强，本文演示下PostgreSQL存储过程的创建和调用，并且演示存储过程支持嵌入事务样例。</p><h2 id="存储过程创建语法"><a class="markdownIt-Anchor" href="#存储过程创建语法"></a> 存储过程创建语法</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">OR</span> <span class="keyword">REPLACE</span> ] <span class="keyword">PROCEDURE</span></span><br><span class="line">    <span class="keyword">name</span> ( [ [ argmode ] [ argname ] argtype [ &#123; <span class="keyword">DEFAULT</span> | = &#125; default_expr ] [, ...] ] )</span><br><span class="line">  &#123; <span class="keyword">LANGUAGE</span> lang_name</span><br><span class="line">    | TRANSFORM &#123; <span class="keyword">FOR</span> <span class="keyword">TYPE</span> type_name &#125; [, ... ]</span><br><span class="line">    | [ <span class="keyword">EXTERNAL</span> ] <span class="keyword">SECURITY</span> INVOKER | [ <span class="keyword">EXTERNAL</span> ] <span class="keyword">SECURITY</span> DEFINER</span><br><span class="line">    | <span class="keyword">SET</span> configuration_parameter &#123; <span class="keyword">TO</span> <span class="keyword">value</span> | = <span class="keyword">value</span> | <span class="keyword">FROM</span> <span class="keyword">CURRENT</span> &#125;</span><br><span class="line">    | <span class="keyword">AS</span> <span class="string">'definition'</span></span><br><span class="line">    | <span class="keyword">AS</span> <span class="string">'obj_file'</span>, <span class="string">'link_symbol'</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>存储过程调用语法<code>CALL name ( [ argument ] [, ...] )</code></p><blockquote><p>存储过程调用比较简单，使用 CALL 命令即可，而函数的调用是使用 SELECT 命令。</p></blockquote><h2 id="优势"><a class="markdownIt-Anchor" href="#优势"></a> 优势</h2><p>  存储过程最大的优势就是能够支持事务控制，也就是可以在定义中使用 COMMIT 或者 ROLLBACK 语句。<br />  使用 CREATE\ALTER\DROP PROCEDURE 命令创建\修改\删除存储过程，使用 CALL 命令调用存储过程。支持存储过程的服务器端编程语言包括：PL/pgSQL、PL/Perl、PL/Python、PL/Tcl 以及 SPI 。</p><h2 id="列子"><a class="markdownIt-Anchor" href="#列子"></a> 列子</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tbl(<span class="keyword">id</span> <span class="built_in">int</span>, <span class="keyword">name</span> <span class="built_in">text</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc1(pid <span class="built_in">integer</span>, pname <span class="built_in">text</span>)</span><br><span class="line"><span class="keyword">LANGUAGE</span> <span class="keyword">sql</span></span><br><span class="line"><span class="keyword">AS</span> $$</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl(<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (pid, pname);</span><br><span class="line">$$;</span><br></pre></td></tr></table></figure><p>使用 CALL 语句调用存储过程：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> proc1(<span class="number">1</span>, <span class="string">'the first value'</span>);</span><br><span class="line"><span class="keyword">CALL</span> proc1(pname=&gt;<span class="string">'the second value'</span>, pid=&gt;<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>查看一下结果：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl;</span><br><span class="line"> id |       name       </span><br><span class="line"><span class="comment">----+------------------</span></span><br><span class="line">  1 | the first value</span><br><span class="line">  2 | the second value</span><br><span class="line">(2 rows)</span><br></pre></td></tr></table></figure><p>存储过程增加了对事务的支持：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">PROCEDURE</span> proc2()</span><br><span class="line"> <span class="keyword">LANGUAGE</span> plpgsql</span><br><span class="line"><span class="keyword">AS</span> $$</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"> <span class="keyword">FOR</span> i <span class="keyword">IN</span> <span class="number">0.</span><span class="number">.9</span> <span class="keyword">LOOP</span></span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl(<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (i, <span class="string">'value: '</span>|| i);</span><br><span class="line">  IF i % 2 = 0 THEN</span><br><span class="line">   <span class="keyword">COMMIT</span>;</span><br><span class="line">  ELSE</span><br><span class="line">   <span class="keyword">ROLLBACK</span>;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"> <span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$;</span><br></pre></td></tr></table></figure><p>调用存储过程 proc2，即使没有参数，仍然需要加上括号（()）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> proc2();</span><br></pre></td></tr></table></figure><p>查看结果：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl;</span><br><span class="line"> id |       name       </span><br><span class="line"><span class="comment">----+------------------</span></span><br><span class="line">  1 | the first value</span><br><span class="line">  2 | the second value</span><br><span class="line">  0 | value: 0</span><br><span class="line">  2 | value: 2</span><br><span class="line">  4 | value: 4</span><br><span class="line">  6 | value: 6</span><br><span class="line">  8 | value: 8</span><br><span class="line">(7 rows)</span><br></pre></td></tr></table></figure><p>只有id 为偶数的记录成功插入表中，奇数都被 ROLLBACK 语句回退了。</p><h2 id="在-psql-中使用-df-命令查看存储过程"><a class="markdownIt-Anchor" href="#在-psql-中使用-df-命令查看存储过程"></a> 在 psql 中，使用 \df 命令查看存储过程：</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">\df</span><br><span class="line">                         List of functions</span><br><span class="line"> Schema | Name  | Result data type |   Argument data types   | Type </span><br><span class="line"><span class="comment">--------+-------+------------------+-------------------------+------</span></span><br><span class="line"> public | add   | integer          | integer, integer        | func</span><br><span class="line"> public | proc1 |                  | pid integer, pname text | proc</span><br><span class="line"> public | proc2 |                  |                         | proc</span><br><span class="line">(3 rows)</span><br></pre></td></tr></table></figure><h2 id="对于存储过程type-的值为-proc-使用-sf-命令可以查看存储过程的定义"><a class="markdownIt-Anchor" href="#对于存储过程type-的值为-proc-使用-sf-命令可以查看存储过程的定义"></a> 对于存储过程，Type 的值为 proc。使用 \sf 命令可以查看存储过程的定义：</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">\sf proc1</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">PROCEDURE</span> public.proc1(pid <span class="built_in">integer</span>, pname <span class="built_in">text</span>)</span><br><span class="line"> <span class="keyword">LANGUAGE</span> <span class="keyword">sql</span></span><br><span class="line"><span class="keyword">AS</span> $<span class="keyword">procedure</span>$</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl(<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (pid, pname);</span><br><span class="line">$procedure$</span><br></pre></td></tr></table></figure><blockquote><p>PROCDEURE 目前还不支持自治事务（autonomous transaction）。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> PostgreSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot中教你手把手配置https</title>
      <link href="/2019/11/09/cheng-xu-she-ji/springboot-zhong-jiao-ni-shou-ba-shou-pei-zhi-https/"/>
      <url>/2019/11/09/cheng-xu-she-ji/springboot-zhong-jiao-ni-shou-ba-shou-pei-zhi-https/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="去阿里云购买证书免费版并提交审核资料"><a class="markdownIt-Anchor" href="#去阿里云购买证书免费版并提交审核资料"></a> 去阿里云购买证书（免费版），并提交审核资料</h2><p><img alt="20191109221820.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109221820.png" class="lazyload"></p><h2 id="下载证书"><a class="markdownIt-Anchor" href="#下载证书"></a> 下载证书</h2><p><img alt="20191109222913.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109222913.png" class="lazyload"></p><h2 id="查看上图页面的第三步"><a class="markdownIt-Anchor" href="#查看上图页面的第三步"></a> 查看上图页面的第三步</h2><p><img alt="20191109223014.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109223014.png" class="lazyload"></p><h2 id="在证书目录下执行阿里云提供的命令密码都填-pfx-passwordtxt-中的内容三次会生成-your-namejks-文件"><a class="markdownIt-Anchor" href="#在证书目录下执行阿里云提供的命令密码都填-pfx-passwordtxt-中的内容三次会生成-your-namejks-文件"></a> 在证书目录下执行阿里云提供的命令，密码都填 pfx-password.txt 中的内容（三次），会生成 your-name.jks 文件。</h2><p><img alt="20191109223107.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109223107.png" class="lazyload"><br>此处我已改名为 any.jks</p><h2 id="将-anyjks-复制到-spring-boot-应用的-resources-目录下"><a class="markdownIt-Anchor" href="#将-anyjks-复制到-spring-boot-应用的-resources-目录下"></a> 将 any.jks 复制到 spring boot 应用的 resources 目录下</h2><p><img alt="20191109223245.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109223245.png" class="lazyload"></p><h2 id="在-applicationyml-中配置证书及端口密码填写第四步中的密码"><a class="markdownIt-Anchor" href="#在-applicationyml-中配置证书及端口密码填写第四步中的密码"></a> 在 application.yml 中配置证书及端口，密码填写第四步中的密码</h2><p><img alt="20191109223457.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109223457.png" class="lazyload"><br>  此配置会使 Undertow 容器监听 443 端口，那么只有在域名前添加 https:// 才能访问网站内容，添加 http:// 则不行，所以需要让 Undertow 容器监听 80 端口，并将 80 端口的所有请求重定向到 443 端口，即完成 http 到 https 的跳转。</p><h2 id="添加-sslconfigjava-配置-undertow-监听-80-端口"><a class="markdownIt-Anchor" href="#添加-sslconfigjava-配置-undertow-监听-80-端口"></a> 添加 SslConfig.java ，配置 Undertow 监听 80 端口。</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SslConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EmbeddedServletContainerFactory <span class="title">servletContainer</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        UndertowEmbeddedServletContainerFactory undertowFactory = <span class="keyword">new</span> UndertowEmbeddedServletContainerFactory();</span><br><span class="line">        undertowFactory.addBuilderCustomizers(<span class="keyword">new</span> UndertowBuilderCustomizer() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Undertow.Builder builder)</span> </span>&#123;</span><br><span class="line">                builder.addHttpListener(<span class="number">80</span>, <span class="string">"0.0.0.0"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> undertowFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>在 Spring Security 中配置 80 端口到 443 端口的映射<br>  至此，重新打包应用，重新发布应用，即完成了 http 到 https 的升级， https 能让网站更安全，有兴趣的试试吧。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS注册系统服务添加自动启动脚本</title>
      <link href="/2019/11/09/cao-zuo-xi-tong/centos-zhu-ce-xi-tong-fu-wu-tian-jia-zi-dong-qi-dong-jiao-ben/"/>
      <url>/2019/11/09/cao-zuo-xi-tong/centos-zhu-ce-xi-tong-fu-wu-tian-jia-zi-dong-qi-dong-jiao-ben/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>CentOS7.x添加自动脚本比之前的脚本要显示。比如miner，首先以管理员用户创建一个新的服务文件</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nano /usr/lib/systemd/system/miner.service</span><br></pre></td></tr></table></figure><p>粘贴以下内容：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=miner</span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/path/to/miner</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>如果停止或停启服务有特殊参数，可以添加 ExecStop= 和 ExecReload= 参数。<br />然后运行命令，让此服务每次启动。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable miner.service      </span><br><span class="line">systemctl start miner.service</span><br><span class="line">systemctl status miner.service</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot2创建定时任务</title>
      <link href="/2019/11/09/cheng-xu-she-ji/springboot2-chuang-jian-ding-shi-ren-wu/"/>
      <url>/2019/11/09/cheng-xu-she-ji/springboot2-chuang-jian-ding-shi-ren-wu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  创建定时任务非常简单，主要有两种创建方式：一、基于注解(@Scheduled) 二、基于接口（SchedulingConfigurer）. 前者相信大家都很熟悉，但是实际使用中我们往往想从数据库中读取指定时间来动态执行定时任务，这时候基于接口的定时任务就大派用场了。</p><h2 id="一-静态定时任务基于注解"><a class="markdownIt-Anchor" href="#一-静态定时任务基于注解"></a> 一、静态定时任务（基于注解）</h2><p>基于注解来创建定时任务非常简单，只需几行代码便可完成。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span> 除了支持灵活的参数表达式cron之外，还支持简单的延时操作，例如 fixedDelay ，fixedRate 填写相应的毫秒数即可。</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//1.主要用于标记配置类，兼备Component的效果。</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">// 2.开启定时任务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleScheduleConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">//3.添加定时任务</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0/5 * * * * ?"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"执行定时任务1: "</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Cron表达式参数分别表示：<br>秒（0~59） 例如0/5表示每5秒<br>分（0~59）<br>时（0~23）<br>月的某天（0~31） 需计算<br>月（0~11）<br>周几（ 可填1-7 或 SUN/MON/TUE/WED/THU/FRI/SAT）</p><p>启动应用，可以看到控制台的信息如下：<br><img alt="20191109215606.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109215606.png" class="lazyload"></p><p>  诚然，使用Scheduled 确实很方便，但缺点是当我们调整了执行周期的时候，需要重启应用才能生效，这多少有些不方便。为了达到实时生效的效果，可以使用接口来完成定时任务。</p><h2 id="二-动态定时任务基于接口"><a class="markdownIt-Anchor" href="#二-动态定时任务基于接口"></a> 二、动态定时任务（基于接口）</h2><p>  为了演示效果，这里选用 Mysql数据库 和 Mybatis 来查询和调整定时任务的执行周期，然后观察定时任务的执行情况。</p><blockquote><p>关注微信公众号：Java后端，每日获取技术博文推送。</p></blockquote><ol><li>引入依赖<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--依赖管理 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--添加Web依赖 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--添加Mybatis依赖 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--添加MySql依赖 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--添加Test依赖 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>添加数据库记录<br>在Navicat 连接本地数据库，随便打开查询窗口，然后执行脚本内容，如下：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`socks`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`socks`</span>;</span><br><span class="line"><span class="keyword">USE</span> <span class="string">`SOCKS`</span>;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`cron`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`cron`</span>  (</span><br><span class="line"><span class="string">`cron_id`</span> <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line"><span class="string">`cron`</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`cron`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'0/5 * * * * ?'</span>);</span><br></pre></td></tr></table></figure>然后在项目中的application.yml 添加数据源：<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#application.yml 配置如下：</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/socks?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure></li><li>创建定时器<br>  数据库准备好数据之后，我们编写定时任务，注意这里添加的是TriggerTask，目的是循环读取我们在数据库设置好的执行周期，以及执行相关定时任务的内容。具体代码如下：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteScheduleConfig</span> <span class="keyword">implements</span> <span class="title">SchedulingConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mapper</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CronMapper</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Select</span>(<span class="string">"select cron from cron limit 1"</span>)</span><br><span class="line">        <span class="function">String <span class="title">getCron</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    CronMapper cronMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 执行定时任务.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">(ScheduledTaskRegistrar taskRegistrar)</span> </span>&#123;</span><br><span class="line">        taskRegistrar.addTriggerTask(</span><br><span class="line">                <span class="comment">//1.添加任务内容(Runnable)</span></span><br><span class="line">                () -&gt; System.out.println(<span class="string">"执行定时任务2: "</span> + LocalDateTime.now().toLocalTime()),</span><br><span class="line">                <span class="comment">//2.设置执行周期(Trigger)</span></span><br><span class="line">                triggerContext -&gt; &#123;</span><br><span class="line">                    <span class="comment">//2.1 从数据库获取执行周期</span></span><br><span class="line">                    String cron = cronMapper.getCron();</span><br><span class="line">                    <span class="comment">//2.2 合法性校验.</span></span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.isEmpty(cron)) &#123;</span><br><span class="line">                        <span class="comment">// Omitted Code ..</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//2.3 返回执行周期(Date)</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> CronTrigger(cron).nextExecutionTime(triggerContext);</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>动态修改执行周期<br>  启动应用后，查看控制台，打印时间是我们预期的每5秒一次：<br><img alt="20191109220307.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109220307.png" class="lazyload"><br>  然后打开Navicat ，将执行周期修改为每1秒执行一次，如图：<br><img alt="20191109220349.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109220349.png" class="lazyload"><br>  查看控制台，发现执行周期已经改变，并且不需要我们重启应用，十分方便。如图：<br><img alt="20191109220430.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109220430.png" class="lazyload"></li></ol>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle通过PL/SQL工具进行数据导出导入</title>
      <link href="/2019/11/09/shu-ju-jie-gou/oracle-tong-guo-pl-sql-gong-ju-jin-xing-shu-ju-dao-chu-dao-ru/"/>
      <url>/2019/11/09/shu-ju-jie-gou/oracle-tong-guo-pl-sql-gong-ju-jin-xing-shu-ju-dao-chu-dao-ru/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="第一步备份数据-打开plsql"><a class="markdownIt-Anchor" href="#第一步备份数据-打开plsql"></a> 第一步备份数据： 打开PL/SQL。</h2><p>（这里以两个数据库举例，现在备份的是TestFirstDB）找到菜单 Tools=&gt;Export Tables，弹出以下对话框，按照以下图片操作<br><img alt="20191109214850.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109214850.png" class="lazyload"></p><h2 id="第二步还原数据库"><a class="markdownIt-Anchor" href="#第二步还原数据库"></a> 第二步：还原数据库</h2><p>(把上面备份的TestFirstDB还原在MyFirstDemoDB)<br>找到菜单Tools=&gt;Import Tables，弹出以下对话框，按照以下图片操作<br><img alt="20191109215005.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109215005.png" class="lazyload"></p><h2 id="点击导入这时候就已经大功告成啦"><a class="markdownIt-Anchor" href="#点击导入这时候就已经大功告成啦"></a> 点击导入这时候就已经大功告成啦！</h2>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle数据库备份还原笔记</title>
      <link href="/2019/11/09/shu-ju-jie-gou/oracle-shu-ju-ku-bei-fen-huan-yuan-bi-ji/"/>
      <url>/2019/11/09/shu-ju-jie-gou/oracle-shu-ju-ku-bei-fen-huan-yuan-bi-ji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>通过查阅资料知道Oracle备份还原的方式有三种。分别的是导出/导入、热备份和冷备份。导出/导入是一种逻辑备份、而热备份和冷备份是物理备份。<br />这里只记录导出/导入的备份和还原的方式。实际工作中遇到一个需求：需要将服务器上的数据库备份，导入自己本机的数据库。相当于把服务器上的对应数据库实例copy一份儿到本地。主要操作步骤如下。</p></blockquote><ol><li>数据库导出<br />操作位置：需要备份的数据库，DOS窗口【注意不是SQLPLUS】。</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exp RSGL_GB_NEW/RSGL@ORCL file=d:\beifen_20190909.dmp owner=(RSGL_GB_NEW)</span><br></pre></td></tr></table></figure><p>这个命令意思是将RSGL_GB_NEW这个库（密码是RSGL）导出。导出的路径是d:\beifen_20190909.dmp。<br />导出完成之后，将这个文件拷贝到需要还原的机器上，进行第二步。</p><ol start="2"><li>创建表空间<br />操作位置：需要还原数据库的机器，DOS窗口，登录之后进入SQLPLUS窗口</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">C:\Users\zz&gt;sqlplus / as sysdba;</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release 11.2.0.1.0 Production on 星期五 9月 27 19:13:21 2019</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2010, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line">ERROR:</span><br><span class="line">ORA-01031: 权限不足</span><br><span class="line"></span><br><span class="line">请输入用户名:  system</span><br><span class="line">输入口令:</span><br><span class="line"></span><br><span class="line">连接到:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</span><br><span class="line">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> create tablespace RSGL_GB_NEW nologging datafile <span class="string">'E:\app\oracleServer\product\11.2.0\Oracle\RSGL_GB_NEW.dbf'</span> size 100m autoextend on next 500M maxsize unlimited;</span></span><br></pre></td></tr></table></figure><p>表空间已创建。<br />登录了数据库，选择一个可以具有创建用户权限的用户账号登录，创建表空间。接着第三步。</p><ol start="3"><li>创建用户，赋予DBA权限<br />操作位置：SQLPLUS窗口</li></ol><figure class="highlight"><table><tr><td class="code"><pre><span class="line">SQL&gt; CREATE USER RSGL_GB_NEW IDENTIFIED BY RSGL DEFAULT TABLESPACE users;</span><br><span class="line"></span><br><span class="line">用户已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; GRANT CREATE SESSION,CREATE ANY TABLE,CREATE ANY VIEW ,CREATE ANY INDEX,CREATE ANY PROCEDURE, ALTER ANY TABLE, ALTER ANY PROCEDURE,DROP ANY TABLE,DROP ANY VIEW,DROP ANY INDEX, DROP ANY PROCEDURE,SELECT ANY TABLE,INSERT ANY TABLE,UPDATE ANY TABLE,DELETE ANY TABLE TO RSGL_GB_NEW;</span><br><span class="line"></span><br><span class="line">授权成功。</span><br><span class="line"></span><br><span class="line">SQL&gt; grant DBA to RSGL_GB_NEW;</span><br></pre></td></tr></table></figure><ol start="4"><li>导入数据库<br />操作位置：DOS窗口【 注意 ：是DOS】</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">C:\Users\zz&gt;imp RSGL_GB_NEW/RSGL fromuser=RSGL_GB_NEW touser=RSGL_GB_NEW file=D:\RSGL_GN_NEW201909270.dmp ignore=y;</span><br><span class="line"></span><br><span class="line">Import: Release 11.2.0.1.0 - Production on 星期五 9月 27 19:31:10 2019</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">连接到: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</span><br><span class="line">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 开始导入数据了。。。。。。。。</span></span></span><br></pre></td></tr></table></figure><p>我这里因为是导入本地，所以不需要在RSGL_GB_NEW/RSGL后加上 @ORCL 。网上是这么说的，我还没搞明白为什么。<br />对Oracle数据库不熟悉，有可能有没有说明白的地方。如果实际操作过程中遇到错误，可以搜索对应的错误提示，大概率是命令写错了。</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GIT设置自动保存用户名密码</title>
      <link href="/2019/11/09/gong-ju-zi-liao/git-she-zhi-zi-dong-bao-cun-yong-hu-ming-mi-ma/"/>
      <url>/2019/11/09/gong-ju-zi-liao/git-she-zhi-zi-dong-bao-cun-yong-hu-ming-mi-ma/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><a id="more"></a><p>设置git用户名／邮箱</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global user.name [username]</span><br><span class="line">git config --global user.email [email]</span><br></pre></td></tr></table></figure><p>但是这个仅仅是设置用户名密码，如果你的git 源每次操作需要你输入用户名/密码验证，你依然需要每次设置，那么该如何办呢？<br />git保存用户名密码<br />这里主要是配置一个config项<br />有两个方法，基本上原理都是一样，都是修改.git/config文件<br />1.使用如下命令，修改config文件即可保存</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &quot;[credential]&quot; &gt;&gt; .git/config</span><br><span class="line">echo &quot;    helper = store&quot; &gt;&gt; .git/config</span><br></pre></td></tr></table></figure><p>2.直接修改.git/config文件<br />在linux/mac下可以直接使用vim工具修改config文件</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ubuntu@VM-7-212-ubuntu:~/kernel-code/kernel-netfilter-sample-code$ vim .git/config</span><br><span class="line"></span><br><span class="line">##修改成如下</span><br><span class="line">[core]</span><br><span class="line">    repositoryformatversion = 0</span><br><span class="line">    filemode = true</span><br><span class="line">    bare = false</span><br><span class="line">    logallrefupdates = true</span><br><span class="line">[remote &quot;origin&quot;]</span><br><span class="line">    url = https://github.com/Miss-you/kernel-netfilter-sample-code.git</span><br><span class="line">    fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch &quot;master&quot;]</span><br><span class="line">    remote = origin</span><br><span class="line">    merge = refs/heads/master</span><br><span class="line">##主要是后面这两行，如果不想保存，则删除即可</span><br><span class="line">[credential]</span><br><span class="line">    helper = store</span><br><span class="line">##保存</span><br></pre></td></tr></table></figure><p>这样就可以保存用户名密码，不用每次都输入了！<br />git config查看配置<br />使用git config --list查看已设配置</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">feiqianyousadeMacBook-Pro:xt_GTPU yousa$ git config --list</span><br><span class="line">core.excludesfile=/Users/yousa/.gitignore_global</span><br><span class="line">user.name=Miss-you</span><br><span class="line">user.email=snowfly1993@gmail.com</span><br><span class="line">core.repositoryformatversion=0</span><br><span class="line">core.filemode=true</span><br><span class="line">core.bare=false</span><br><span class="line">core.logallrefupdates=true</span><br><span class="line">core.ignorecase=true</span><br><span class="line">core.precomposeunicode=true</span><br><span class="line">remote.origin.url=https://github.com/Miss-you/xt_GTPU.git</span><br><span class="line">remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*</span><br><span class="line">branch.master.remote=origin</span><br><span class="line">branch.master.merge=refs/heads/master</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用正则表达式</title>
      <link href="/2019/11/09/gong-ju-zi-liao/chang-yong-zheng-ze-biao-da-shi/"/>
      <url>/2019/11/09/gong-ju-zi-liao/chang-yong-zheng-ze-biao-da-shi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><ul><li>字母开头6至10位字母和数字组合</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 手机号码号(国内)</span><br><span class="line">```0?(13|14|15|17|18)[0-9]&#123;9&#125;</span><br></pre></td></tr></table></figure><ul><li>电话号码(国内)</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 中文字符</span><br><span class="line">```[\u4e00-\u9fa5]</span><br></pre></td></tr></table></figure><ul><li>双字节字符</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 电子邮件</span><br><span class="line">```JavaScript</span><br><span class="line">var pattern = /\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]&#123;2,14&#125;/;</span><br><span class="line">var str = &quot;jb51@163.com&quot;;</span><br><span class="line">console.log(pattern.test(str));</span><br><span class="line">PHP</span><br><span class="line">$str = &quot;jb51@163.com&quot;;</span><br><span class="line">$isMatched = preg_match(&apos;/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]&#123;2,14&#125;/&apos;, $str, $matches);</span><br><span class="line">var_dump($isMatched, $matches);</span><br><span class="line">Java</span><br><span class="line">import java.util.regex.Pattern;</span><br><span class="line">public class RegexMatches &#123;</span><br><span class="line">    public static void main(String args[]) &#123;</span><br><span class="line">        String str = &quot;jb51@163.com&quot;;</span><br><span class="line">        String pattern = &quot;\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]&#123;2,14&#125;&quot;;</span><br><span class="line">        Pattern r = Pattern.compile(pattern);</span><br><span class="line">        Matcher m = r.matcher(str);</span><br><span class="line">        System.out.println(m.matches());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>网址</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 腾讯QQ号</span><br><span class="line">```[1-9]([0-9]&#123;5,11&#125;)</span><br></pre></td></tr></table></figure><ul><li>邮政编码</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* IP地址</span><br><span class="line">```/(25[0-5]|2[0-4]\d|[0-1]\d&#123;2&#125;|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d&#123;2&#125;|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d&#123;2&#125;|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d&#123;2&#125;|[1-9]?\d)/</span><br></pre></td></tr></table></figure><ul><li>身份证号码(包含一代和二代证)</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 格式日期</span><br><span class="line">```\d&#123;4&#125;(\-|\/|.)\d&#123;1,2&#125;\1\d&#123;1,2&#125;</span><br></pre></td></tr></table></figure><ul><li>用户名</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 空白行</span><br><span class="line">```\s</span><br></pre></td></tr></table></figure><ul><li>正浮点数</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 负浮点数</span><br><span class="line">```-([1-9]\d*.\d*|0.\d*[1-9]\d*)</span><br></pre></td></tr></table></figure><ul><li>匹配整数</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 正整数</span><br><span class="line">```[1-9]\d*</span><br></pre></td></tr></table></figure><ul><li>负整数<br /><code>-[1-9]\d*</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《非暴力沟通》读书笔记</title>
      <link href="/2019/11/09/sui-bi-za-tan/fei-bao-li-gou-tong-du-shu-bi-ji/"/>
      <url>/2019/11/09/sui-bi-za-tan/fei-bao-li-gou-tong-du-shu-bi-ji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><ul><li>语言是窗户，否则它们是墙</li><li>使用暴力的人其实是他们内心的宁静早到了破坏，所以他们才会使用暴力维护和寻求内心的平和。</li><li>非暴力沟通源于爱，爱人如己并爱我们的仇敌，通过非暴力沟通让爱融于生活。</li></ul></blockquote><ul><li><h4 id="非暴力沟通的四个要素观察-感受-需要-请求"><a class="markdownIt-Anchor" href="#非暴力沟通的四个要素观察-感受-需要-请求"></a> 非暴力沟通的四个要素：观察、感受、需要、请求</h4></li><li><h4 id="非暴力沟通的过程"><a class="markdownIt-Anchor" href="#非暴力沟通的过程"></a> 非暴力沟通的过程</h4><ul><li>我观察到了什么</li><li>我的感受如何</li><li>是哪些需要（价值或愿望等）导致我产生那样的感受</li><li>为了改善现状或生活，我的请求是什么</li></ul></li><li><h4 id="表达"><a class="markdownIt-Anchor" href="#表达"></a> 表达</h4><ul><li>表达自己的<em>观察</em><ul><li>不要做比较和评判，这样会使别人蒙蔽对自己的爱意</li><li>将观察与评论混为一谈，就会使别人更倾向于听到评论而反驳我们</li></ul></li><li>表达自己的<em>感受</em><ul><li>示弱有助于解决冲突</li><li>区分想法和感受</li><li>表达感受的时候不要参杂着评判</li><li>通过“我（感到）……因为我……”这种表达方式来表达感受与自身的关系。</li></ul></li><li>表达自己的<em>需要</em><ul><li>感受源于自身的需要</li><li>通过指责、批评与评论来提出自己需要的主张，会导致申辩或反击的结果</li><li>直接客观的说出自己需要的主张，别人大多可能做出积极的回应</li></ul></li><li>表达自己的<em>请求</em><ul><li>不要自以为是的认为说了那么多，对方应该了解我的请求了，而不去说出自己的请求，不说对方往往不知道你的请求到底是什么</li><li>不要提出自己想要避免或不希望看到的请求，这会导致对方不清楚自己可以做什么</li><li>避免使用抽象的言语，直接客观的表达自己需要对方如何做</li><li>将自己的请求表达越清楚、越具体，就越能得到理想的回应</li><li>及时了解对方对自己请求的反馈<ul><li>对方此时此刻的感受<ul><li>“听我说这些你的心情怎么样……为什么呢？”</li></ul></li><li>对方正在想什么<ul><li>“我想请你谈谈我的建议是否有可行性。如果不太可行，那根据你的判断，那些因素会妨碍建议的实施呢。”</li></ul></li><li>对方是否接受我们的请求<ul><li>“我想知道你是否同意……“</li></ul></li></ul></li><li>注意区分请求和命令，除了语气外，当请求被拒绝后的表现也会将请求转化为命令<ul><li>批评、指责、软磨硬泡、愤怒、生气都会将请求转化为命令</li><li>清楚及时的表达我们无意强人所难</li></ul></li></ul></li></ul></li><li><h4 id="聆听"><a class="markdownIt-Anchor" href="#聆听"></a> 聆听</h4><ul><li>放下自己的体会和感受，一心一意的体会对方的感受</li><li>站在对方的立场上，用心区分对方的<em>观察</em>、<em>感受</em>、<em>需要</em>和<em>请求</em></li><li>在聆听的过程中切记不要：<ul><li>评论：『你这样想是不对的……』</li><li>建议：『我想你应该……』</li><li>比较：『你这算不了什么……』</li><li>说教：『如果你这样做……你将会……』</li><li>安慰：『这不是你的错……』</li><li>回忆：『这让我想起……』</li><li>否定：『高兴一点，不要这么难过……』</li><li>同情：『哦，你这个可怜的人……』</li><li>询问：『这种情况是从什么时候开始的？』【有疑问待解决】</li><li>辩解：『不是你所说的这样的，我是……』</li><li>矫正：『事情的经过不是你所说的这样的，而是……』</li></ul></li><li>当我们痛苦的无法聆听时<ul><li>体会自己的感受和需要</li><li>大声的提出请求</li><li>换一个时间和环境</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 随笔杂谈 </category>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 沟通 </tag>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git远程操作详解</title>
      <link href="/2019/11/09/gong-ju-zi-liao/git-yuan-cheng-cao-zuo-xiang-jie/"/>
      <url>/2019/11/09/gong-ju-zi-liao/git-yuan-cheng-cao-zuo-xiang-jie/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>Git是目前最流行的版本管理系统，学会Git几乎成了开发者的必备能。Git有很多优势，其中之一就是远程操作非常简便。本文详细介绍5个Git命令，它们的概念和用法，理解了这些内容，你就会完全掌握Git远程操作。</p><ul><li>git clone</li><li>git remote</li><li>git fetch</li><li>git pull</li><li>git push</li></ul></blockquote><p>![IMAGE](quiver-image-url/27C395F69767D4DC2DDE59B7D9BCC55C.jpg =800x227)</p><ul><li><h1 id="git-clone"><a class="markdownIt-Anchor" href="#git-clone"></a> <code>git clone</code></h1><blockquote><p>从远程主机克隆一个版本库</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone &lt;版本库的网址&gt;</span><br></pre></td></tr></table></figure><p>该命令会在本地主机生成一个目录，与远程主机的版本库同名。如果要指定不同的目录名，可以将目录名作为git clone命令的第二个参数。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone &lt;版本库的网址&gt; &lt;本地目录名&gt;</span><br></pre></td></tr></table></figure><p>git clone支持多种协议，除了HTTP(s)以外，还支持SSH、Git、本地文件协议等。通常来说，Git协议下载速度最快，SSH协议用于需要用户认证的场合。</p><ul><li>克隆版本库的时候，所使用的远程主机自动被Git命名为origin。如果想用其他的主机名，需要用git clone命令的-o选项指定。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> -o jQuery https://github.com/jquery/jquery.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote</span></span><br><span class="line">jQuery</span><br></pre></td></tr></table></figure></li></ul></li><li><h1 id="git-免密码去除每次输入密码"><a class="markdownIt-Anchor" href="#git-免密码去除每次输入密码"></a> <code>git</code> 免密码，去除每次输入密码</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> http://github.com/git_dir</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config credential.helper store</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi ~/git_dir/.git/config</span></span><br><span class="line">[credential]</span><br><span class="line">      helper = store</span><br></pre></td></tr></table></figure></li><li><h1 id="git-remote"><a class="markdownIt-Anchor" href="#git-remote"></a> <code>git remote</code></h1><blockquote><p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。git remote命令就用于管理主机名。</p></blockquote><ul><li>不带选项的时候，<code>git remote</code>命令列出所有远程主机。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote</span></span><br><span class="line">origin</span><br></pre></td></tr></table></figure></li><li>使用<code>-v</code>选项，可以参看远程主机的网址。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br><span class="line">origin  git@github.com:jquery/jquery.git (fetch)</span><br><span class="line">origin  git@github.com:jquery/jquery.git (push)</span><br></pre></td></tr></table></figure></li><li><code>git remote show</code> 命令加上主机名，可以查看该主机的详细信息。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote show &lt;主机名&gt;</span></span><br></pre></td></tr></table></figure></li><li><code>git remote add</code> 命令用于添加远程主机。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote add &lt;主机名&gt; &lt;网址&gt;</span></span><br></pre></td></tr></table></figure></li><li><code>git remote rm</code> 命令用于删除远程主机。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote rm &lt;主机名&gt;</span></span><br></pre></td></tr></table></figure></li><li><code>git remote rename</code> 命令用于远程主机的改名。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><h1 id="git-fetch"><a class="markdownIt-Anchor" href="#git-fetch"></a> <code>git fetch</code></h1><blockquote><p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到git fetch命令。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch &lt;远程主机名&gt;</span></span><br></pre></td></tr></table></figure><ul><li>上面命令将某个远程主机的更新，全部取回本地。</li><li><code>git fetch</code>命令通常用来查看其他人的进程，因为它取回的代码对你本地的开发代码没有影响。</li><li>默认情况下，<code>git fetch</code>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch &lt;远程主机名&gt; &lt;分支名&gt;</span></span><br></pre></td></tr></table></figure><ul><li>所取回的更新，在本地主机上要用&quot;远程主机名/分支名&quot;的形式读取。比如<code>origin</code>主机的<code>master</code>，就要用<code>origin/master</code>读取。</li><li><code>git branch</code> 命令的<code>-r</code>选项，可以用来查看远程分支，<code>-a</code>选项查看所有分支。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -r</span></span><br><span class="line">origin/master</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -a</span></span><br><span class="line">* master</span><br><span class="line">  remotes/origin/master</span><br></pre></td></tr></table></figure></li><li>上面命令表示，本地主机的当前分支是<code>master</code>，远程分支是<code>origin/master</code>。</li><li>取回远程主机的更新以后，可以在它的基础上，使用<code>git checkout</code>命令创建一个新的分支。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b newBrach origin/master</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，在<code>origin/master</code>的基础上，创建一个新分支</li><li>也可以使用<code>git merge</code>命令或者<code>git rebase</code>命令，在本地分支上合并远程分支。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge origin/master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rebase origin/master</span></span><br></pre></td></tr></table></figure></li></ul></li><li><h1 id="git-pull"><a class="markdownIt-Anchor" href="#git-pull"></a> <code>git pull</code></h1><blockquote><p><code>git pull</code> 命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。它的完整格式稍稍有点复杂。</p></blockquote>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span></span><br></pre></td></tr></table></figure><ul><li>取回<code>origin</code>主机的<code>next</code>分支，与本地的<code>master</code>分支合并，需要写成下面这样。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin next:master</span></span><br></pre></td></tr></table></figure></li><li>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin next</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，取回<code>origin/next</code>分支，再与当前分支合并。实质上，这等同于先做<code>git fetch</code>，再做<code>git merge</code>。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch origin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge origin/next</span></span><br></pre></td></tr></table></figure></li><li>在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<code>git clone</code>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<code>master</code>分支自动&quot;追踪&quot;<code>origin/master</code>分支。</li></ul><blockquote><p><code>Git</code>也允许手动建立追踪关系。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch --<span class="built_in">set</span>-upstream master origin/next</span></span><br></pre></td></tr></table></figure><ul><li>上面命令指定<code>master</code>分支追踪<code>origin/next</code>分支。</li><li>如果当前分支与远程分支存在追踪关系，<code>git pull</code>就可以省略远程分支名。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，本地的当前分支自动与对应的<code>origin</code>主机&quot;追踪分支&quot;（<code>remote-tracking branch</code>）进行合并。</li><li>如果当前分支只有一个追踪分支，连远程主机名都可以省略。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，当前分支自动与唯一一个追踪分支进行合并。</li><li>如果合并需要采用rebase模式，可以使用–rebase选项。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull --rebase &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span></span><br></pre></td></tr></table></figure></li><li>如果远程主机删除了某个分支，默认情况下，<code>git pull</code> 不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致<code>git pull</code>不知不觉删除了本地分支。</li><li>但是，你可以改变这个行为，加上参数 <code>-p</code>就会在本地删除远程已经删除的分支。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull -p</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 等同于下面的命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git fetch --prune origin </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git fetch -p</span></span><br></pre></td></tr></table></figure></li></ul></li><li><h1 id="git-push"><a class="markdownIt-Anchor" href="#git-push"></a> <code>git push</code></h1><blockquote><p><code>git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与<code>git pull</code>命令相仿。</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span></span><br></pre></td></tr></table></figure><ul><li>注意，分支推送顺序的写法是<code>&lt;来源地&gt;:&lt;目的地&gt;</code>，所以<code>git pull</code>是<code>&lt;远程分支&gt;:&lt;本地分支&gt;</code>，而<code>git push</code>是<code>&lt;本地分支&gt;:&lt;远程分支&gt;</code>。</li><li>如果省略远程分支名，则表示将本地分支推送与之存在&quot;追踪关系&quot;的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin master</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，将本地的<code>master</code>分支推送到<code>origin</code>主机的<code>master</code>分支。如果后者不存在，则会被新建。</li><li>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin :master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 等同于</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --delete master</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示删除origin主机的master分支。</li><li>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，将当前分支推送到origin主机的对应分支。</li><li>如果当前分支只有一个追踪分支，那么主机名都可以省略。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push</span></span><br></pre></td></tr></table></figure></li><li>如果当前分支与多个主机存在追踪关系，则可以使用<code>-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git push</code>。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push -u origin master</span></span><br></pre></td></tr></table></figure></li><li>上面命令将本地的<code>master</code>分支推送到<code>origin</code>主机，同时指定<code>origin</code>为默认主机，后面就可以不加任何参数使用<code>git push</code>了。</li><li>不带任何参数的<code>git push</code>，默认只推送当前分支，这叫做<code>simple</code>方式。此外，还有一种<code>matching</code>方式，会推送所有有对应的远程分支的本地分支。<code>Git 2.0</code>版本之前，默认采用<code>matching</code>方法，现在改为默认采用<code>simple</code>方式。如果要修改这个设置，可以采用<code>git config</code>命令。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --global push.default matching</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global push.default simple</span></span><br></pre></td></tr></table></figure></li><li>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code>--all</code>选项。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push --all origin</span></span><br></pre></td></tr></table></figure></li><li>上面命令表示，将所有本地分支都推送到<code>origin</code>主机。</li><li>如果远程主机的版本比本地版本更新，推送时<code>Git</code>会报错，要求先在本地做<code>git pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code>--force</code>选项。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push --force origin</span></span><br></pre></td></tr></table></figure></li><li>上面命令使用<code>--force</code>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<code>--force</code>选项。</li><li>最后，<code>git push</code>不会推送标签（<code>tag</code>），除非使用<code>--tags</code>选项。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin --tags</span></span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown基本语法</title>
      <link href="/2019/11/09/gong-ju-zi-liao/markdown-ji-ben-yu-fa/"/>
      <url>/2019/11/09/gong-ju-zi-liao/markdown-ji-ben-yu-fa/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>Markdown是一种纯文本格式的标记语言。通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p></blockquote><h1 id="一-标题"><a class="markdownIt-Anchor" href="#一-标题"></a> 一、标题</h1><ul><li>示例<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 这是一级标题</span></span><br><span class="line"><span class="section">## 这是二级标题</span></span><br><span class="line"><span class="section">### 这是三级标题</span></span><br><span class="line"><span class="section">#### 这是四级标题</span></span><br><span class="line"><span class="section">##### 这是五级标题</span></span><br><span class="line"><span class="section">###### 这是六级标题</span></span><br></pre></td></tr></table></figure></li><li>效果<h1 id="这是一级标题"><a class="markdownIt-Anchor" href="#这是一级标题"></a> 这是一级标题</h1><h2 id="这是二级标题"><a class="markdownIt-Anchor" href="#这是二级标题"></a> 这是二级标题</h2><h3 id="这是三级标题"><a class="markdownIt-Anchor" href="#这是三级标题"></a> 这是三级标题</h3><h4 id="这是四级标题"><a class="markdownIt-Anchor" href="#这是四级标题"></a> 这是四级标题</h4><h5 id="这是五级标题"><a class="markdownIt-Anchor" href="#这是五级标题"></a> 这是五级标题</h5><h6 id="这是六级标题"><a class="markdownIt-Anchor" href="#这是六级标题"></a> 这是六级标题</h6></li></ul><h1 id="二-字体"><a class="markdownIt-Anchor" href="#二-字体"></a> 二、字体</h1><ul><li>加粗<blockquote><p>要加粗的文字左右分别用两个*号包起来</p></blockquote></li><li>斜体<blockquote><p>要倾斜的文字左右分别用一个*号包起来</p></blockquote></li><li>斜体加粗<blockquote><p>要倾斜和加粗的文字左右分别用三个*号包起来</p></blockquote></li><li>删除线<blockquote><p>要加删除线的文字左右分别用两个~~号包起来</p></blockquote></li><li>示例：<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="strong">**这是加粗的文字**</span></span><br><span class="line"><span class="emphasis">*这是倾斜的文字*</span>`</span><br><span class="line"><span class="strong">***这是斜体加粗的文字**</span>*</span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure></li><li>效果<br><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em>`<br><em><strong>这是斜体加粗的文字</strong></em><br><s>这是加删除线的文字</s></li></ul><h1 id="三-引用"><a class="markdownIt-Anchor" href="#三-引用"></a> 三、引用</h1><blockquote><p>在引用的文字前加&gt;即可。引用也可以嵌套，如加两个&gt;&gt;三个&gt;&gt;&gt; n个…</p></blockquote><ul><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;这是引用的内容</span><br><span class="line">&gt;&gt;这是引用的内容</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;这是引用的内容</span><br></pre></td></tr></table></figure></li><li>效果<blockquote><p>这是引用的内容</p><blockquote><p>这是引用的内容</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>这是引用的内容</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></li></ul><h1 id="四-分割线"><a class="markdownIt-Anchor" href="#四-分割线"></a> 四、分割线</h1><blockquote><p>三个或者三个以上的 - 或者 * 都可以。</p></blockquote><ul><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">----</span><br><span class="line">***</span><br><span class="line">*****</span><br></pre></td></tr></table></figure></li><li><h2 id="效果"><a class="markdownIt-Anchor" href="#效果"></a> 效果</h2><hr><hr><hr></li></ul><h1 id="五-图片"><a class="markdownIt-Anchor" href="#五-图片"></a> 五、图片</h1><ul><li>语法<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![图片alt](图片地址 &apos;&apos;图片title&apos;&apos;)</span><br><span class="line">图片alt就是显示在图片下面的文字，相当于对图片内容的解释。</span><br><span class="line">图片title是图片的标题，当鼠标移到图片上时显示的内容。title可加可不加</span><br></pre></td></tr></table></figure></li><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![blockchain](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=702257389,1274025419&amp;fm=27&amp;gp=0.jpg &quot;区块链&quot;)</span><br></pre></td></tr></table></figure></li><li>效果<br><img alt="blockchain" title="区块链" data-src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=702257389,1274025419&amp;fm=27&amp;gp=0.jpg" class="lazyload"></li></ul><h1 id="六-超链接"><a class="markdownIt-Anchor" href="#六-超链接"></a> 六、超链接</h1><ul><li>语法<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[超链接名](超链接地址 &quot;超链接title&quot;)</span><br><span class="line">title可加可不加</span><br></pre></td></tr></table></figure></li><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[简书](http://jianshu.com)</span><br><span class="line">[百度](http://baidu.com)</span><br></pre></td></tr></table></figure></li><li>效果<br><a href="http://jianshu.com" target="_blank" rel="noopener">简书</a><br><a href="http://baidu.com" target="_blank" rel="noopener">百度</a></li></ul><blockquote><p>注：Markdown本身语法不支持链接在新页面中打开，如果想要在新页面中打开的话可以用html语言的a标签代替。</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;超链接地址&quot; target=&quot;_blank&quot;&gt;超链接名&lt;/a&gt;</span><br></pre></td></tr></table></figure><h1 id="七-列表"><a class="markdownIt-Anchor" href="#七-列表"></a> 七、列表</h1><ul><li>无序列表<ul><li>语法：<br><code>无序列表用 - + * 任何一种都可以</code><blockquote><p><code>- + *</code>跟内容之间都要有一个空格</p></blockquote></li><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- 列表内容</span><br><span class="line">+ 列表内容</span><br><span class="line">* 列表内容</span><br></pre></td></tr></table></figure></li><li>效果<ul><li>列表内容</li></ul><ul><li>列表内容</li></ul><ul><li>列表内容</li></ul></li></ul></li><li>有序列表<ul><li>语法<br><code>数字加点</code><blockquote><p>注意：序号跟内容之间要有空格</p></blockquote></li><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.列表内容</span><br><span class="line">2.列表内容</span><br><span class="line">3.列表内容</span><br></pre></td></tr></table></figure></li><li>效果<br>1.列表内容<br>2.列表内容<br>3.列表内容</li></ul></li><li>列表嵌套<ul><li>语法</li></ul><blockquote><p>上一级和下一级之间敲三个空格或者【TAB】即可</p></blockquote><ul><li><p>示例</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 一级无序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">* 一级无序列表内容</span><br><span class="line">  * 二级有序列表内容</span><br><span class="line">  * 二级有序列表内容</span><br><span class="line">  * 二级有序列表内容</span><br><span class="line">1 一级有序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">  * 二级无序列表内容</span><br><span class="line">2 一级有序列表内容</span><br><span class="line">  1 二级有序列表内容</span><br><span class="line">  2 二级有序列表内容</span><br><span class="line">  3 二级有序列表内容</span><br></pre></td></tr></table></figure></li><li><p>效果</p><ul><li>一级无序列表内容<ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li><li>一级无序列表内容<ul><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ul></li></ul><ol><li>一级有序列表内容<ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li><li>一级有序列表内容<ol><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ol></li></ol></li><li><p>GFM 任务列表</p><ul><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- [ ] a task list item</span><br><span class="line">- [ ] list syntax required</span><br><span class="line">- [ ] normal **formatting**, @mentions, #1234 refs</span><br><span class="line">- [ ] incomplete</span><br><span class="line">- [x] completed</span><br></pre></td></tr></table></figure></li><li>效果<ul><li>[ ] a task list item</li><li>[ ] list syntax required</li><li>[ ] normal <strong>formatting</strong>, @mentions, #1234 refs</li><li>[ ] incomplete</li><li>[x] completed</li></ul></li></ul></li></ul></li></ul><h1 id="八-表格"><a class="markdownIt-Anchor" href="#八-表格"></a> 八、表格</h1><ul><li>语法<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表头|表头|表头</span><br><span class="line">---|:--:|---:</span><br><span class="line">内容|内容|内容</span><br><span class="line">内容|内容|内容</span><br></pre></td></tr></table></figure><ul><li>第二行分割表头和内容。</li><li><ul><li>有一个就行，为了对齐，多加了几个</li></ul></li><li>文字默认居左<ul><li>-两边加：表示文字居中</li><li>-右边加：表示文字居右</li></ul></li></ul><blockquote><p>注：原生的语法两边都要用 | 包起来。此处省略</p></blockquote></li><li>示例<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">姓名|技能|排行</span><br><span class="line">--|:--:|--:</span><br><span class="line">刘备|哭|大哥</span><br><span class="line">关羽|打|二哥</span><br><span class="line">张飞|骂|三弟</span><br></pre></td></tr></table></figure></li><li>效果<table><thead><tr><th>姓名</th><th style="text-align:center">技能</th><th style="text-align:right">排行</th></tr></thead><tbody><tr><td>刘备</td><td style="text-align:center">哭</td><td style="text-align:right">大哥</td></tr><tr><td>关羽</td><td style="text-align:center">打</td><td style="text-align:right">二哥</td></tr><tr><td>张飞</td><td style="text-align:center">骂</td><td style="text-align:right">三弟</td></tr></tbody></table></li></ul><h1 id="九-代码"><a class="markdownIt-Anchor" href="#九-代码"></a> 九、代码</h1><ul><li><p>语法</p><ul><li>单行代码：代码之间分别用一个反引号包起来</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">`代码内容`</span><br></pre></td></tr></table></figure><ul><li>代码块：代码之间分别用三个反引号包起来，且两边的反引号单独占一行</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(```)</span><br><span class="line">  代码...</span><br><span class="line">  代码...</span><br><span class="line">  代码...</span><br><span class="line">(```)</span><br></pre></td></tr></table></figure><blockquote><p>注：为了防止转译，前后三个反引号处加了小括号，实际是没有的。这里只是用来演示，实际中去掉两边小括号即可。</p></blockquote></li><li><p>示例</p><ul><li>单行代码<br><code>create database hero;</code></li><li>代码块<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(```)</span><br><span class="line">function fun()&#123;</span><br><span class="line">     echo &quot;这是一句非常牛逼的代码&quot;;</span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br><span class="line">(```)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>效果</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function fun()&#123;</span><br><span class="line">     echo &quot;这是一句非常牛逼的代码&quot;;</span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br></pre></td></tr></table></figure></li></ul><h1 id="十-流程图"><a class="markdownIt-Anchor" href="#十-流程图"></a> 十、流程图</h1><ul><li>示例</li></ul><pre class="highlight"><code class>&lt;div id=&quot;flowchart-0&quot; class=&quot;flow-chart&quot;&gt;&lt;/div&gt;```&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js&quot;&gt;&lt;/script&gt;<textarea id="flowchart-0-code" style="display: none">st=>start: 开始op=>operation: My Operationcond=>condition: Yes or No?e=>endst->op->condcond(yes)->econd(no)->op&</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script></code></pre>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> MarkDown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7下安装和配置PostgreSQL11</title>
      <link href="/2019/11/09/cao-zuo-xi-tong/centos7-xia-an-zhuang-he-pei-zhi-postgresql11/"/>
      <url>/2019/11/09/cao-zuo-xi-tong/centos7-xia-an-zhuang-he-pei-zhi-postgresql11/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><ol><li><p>安装</p>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install postgresql96 postgresql96-server postgresql96-contrib postgresql96-devel postgresql96-libs</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install https://download.postgresql.org/pub/repos/yum/11/redhat/rhel-7.7-x86_64/pgdg-centos11-11-2.noarch.rpm</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install postgresql11.x86_64 postgresql11-devel.x86_64 postgresql11-plpython.x86_64 postgresql11-server.x86_64 postgresql11-contrib.x86_64 postgresql11-libs.x86_64 postgresql11-llvmjit.x86_64</span></span><br></pre></td></tr></table></figure></li><li><p>初始化 <code>PostgreSQL</code> 数据库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir /data/pgsql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown -R postgres:postgres /data/pgsql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> su postgres</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> /usr/pgsql-11/bin/initdb -D /data/pgsql/data</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /usr/lib/systemd/system/postgresql-11.service</span></span><br><span class="line">Environment=PGDATA=/data/pgsql/data</span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl daemon-reload</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> postgresql-11</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl start postgresql-11</span></span><br></pre></td></tr></table></figure></li><li><p>配置默认 <code>postgres</code> 用户及密码并创建新的用户和数据库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> data</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> su postgres</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> createuser gadfly</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> createdb gadfly_db</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> psql</span></span><br><span class="line">psql (11.2)</span><br><span class="line">Type "help" for help.</span><br><span class="line">Postgres=# </span><br><span class="line">postgres=# \password postgres</span><br><span class="line">Enter new password:</span><br><span class="line">Enter it again:</span><br><span class="line">postgres=# CREATE EXTENSION adminpack;</span><br><span class="line">CREATE EXTENSION</span><br><span class="line">postgres=# alter user gadfly with encrypted password 'centos';</span><br><span class="line">ALTER ROLE </span><br><span class="line">postgres=# grant all privileges on database gadfly_db to gadfly;</span><br><span class="line">GRANT</span><br><span class="line">postgres=# \q</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure></li><li><p>配置 <code>PostgreSQL</code></p><ul><li>配置 <code>PostgreSQL-MD5</code> 认证<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /data/pgsql/data/pg_hba.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">"local"</span> is <span class="keyword">for</span> Unix domain socket connections only</span></span><br><span class="line">local        all      all                     md5</span><br><span class="line"><span class="meta">#</span><span class="bash"> IPv4 <span class="built_in">local</span> connections:</span></span><br><span class="line">host        all      all    192.168.1.0/24    md5</span><br><span class="line">host        all      all    127.0.0.1/32      md5</span><br><span class="line"><span class="meta">#</span><span class="bash"> IPv6 <span class="built_in">local</span> connections:</span></span><br><span class="line">host        all      all    ::1/128           md5</span><br></pre></td></tr></table></figure></li><li>配置 <code>PostgreSQL-Configure TCP/IP</code><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /data/pgsql/data/postgresql.conf </span></span><br><span class="line">[...]</span><br><span class="line">listen_addresses = '*’</span><br><span class="line">[...]</span><br><span class="line">port = 5432</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure></li></ul></li><li><p>安装 <code>redis_fdw</code> 外部表插件</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> -b REL_10_STABLE https://github.com/pg-redis-fdw/redis_fdw.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> redis_fdw</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> PATH=/usr/pgsql-9.6//bin:<span class="variable">$PATH</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make USE_PGXS=1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make USE_PGXS=1 install</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> su postgres</span></span><br><span class="line">bash-4.2$ psql -U postgres -d postgres</span><br><span class="line">postgres=# create extension redis_fdw;</span><br><span class="line">CREATE EXTENSION</span><br><span class="line">postgres=# CREATE SERVER redis_server</span><br><span class="line"><span class="meta">postgres-#</span><span class="bash">     FOREIGN DATA WRAPPER redis_fdw</span></span><br><span class="line"><span class="meta">postgres-#</span><span class="bash">     OPTIONS (address <span class="string">'127.0.0.1'</span>, port <span class="string">'6379'</span>);</span></span><br><span class="line">CREATE SERVER</span><br><span class="line">postgres=# CREATE USER MAPPING FOR PUBLIC</span><br><span class="line"><span class="meta">postgres-#</span><span class="bash">     SERVER redis_server</span></span><br><span class="line"><span class="meta">postgres-#</span><span class="bash">     OPTIONS (password <span class="string">''</span>);</span></span><br><span class="line">CREATE USER MAPPING</span><br></pre></td></tr></table></figure><blockquote><p><code>redis_fdw</code> 详细的用法介绍</p></blockquote><ol><li><code>CREATE SERVER</code> 支持的 <code>option</code>(指定地址和端口) <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">address: The address or hostname of the Redis server. Default: 127.0.0.1</span><br><span class="line">port: The port number on which the Redis server is listening. Default: 6379</span><br></pre></td></tr></table></figure></li><li><code>CREATE USER MAPPING</code> 支持的 <code>option</code> (指定密码) <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">password: The password to authenticate to the Redis server with. Default:</span><br></pre></td></tr></table></figure></li><li><code>CREATE FOREIGN TABLE</code> 支持的 <code>option</code><ul><li>指定数据库ID</li><li>表类型(<code>hash</code>,<code>list</code>,<code>set</code>,<code>zset</code>或<code>scalar</code>)</li><li><code>key</code> 前缀 <code>key</code> 集合 <code>singleton_key</code> 指定 <code>KEY</code></li></ul> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">database: The numeric ID of the Redis database to query. Default: 0</span><br><span class="line">tabletype: can be &apos;hash&apos;, &apos;list&apos;, &apos;set&apos; or &apos;zset&apos; Default: none, meaning only look at scalar values.</span><br><span class="line">tablekeyprefix: only get items whose names start with the prefix Default: none</span><br><span class="line">tablekeyset: fetch item names from the named set Default: none</span><br><span class="line">singleton_key: get all the values in the table from a single named object. Default: none, meaning don&apos;t just use a single object.</span><br></pre></td></tr></table></figure></li></ol></li><li><p>安装<code>www_fdw</code>扩展</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/cyga/www_fdw.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> www_fdw</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> USE_PGXS=1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure></li><li><p>安装<code>pgsql-http</code>扩展</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> $ git clone https://github.com/pramsey/pgsql-http.git</span><br><span class="line">$ cd pgsql-http</span><br><span class="line">$ export PATH=/usr/local/Cellar/postgresql/11.2/bin:$PATH</span><br><span class="line">$ make USE_PGXS=1</span><br><span class="line">$ make USE_PGXS=1 install</span><br><span class="line">$ su postgres</span><br><span class="line">bash-4.2$ psql -U postgres -d postgres</span><br><span class="line">postgres=# create extension http;</span><br></pre></td></tr></table></figure></li><li><p>安装<code>mysql-fdw</code>扩展</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/EnterpriseDB/mysql_fdw.git</span><br><span class="line">cd mysql_fdw</span><br><span class="line">$ export PATH=/usr/local/Cellar/postgresql/11.2/bin:$PATH</span><br><span class="line">$ make USE_PGXS=1</span><br><span class="line">$ make USE_PGXS=1 install</span><br><span class="line">$ su postgres</span><br><span class="line">bash-4.2$ psql -U postgres -d postgres</span><br><span class="line">postgres=# create extension mysql_fdw;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> PostgreSQL </tag>
            
            <tag> FWD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7下iptables防火墙设置</title>
      <link href="/2019/11/09/cao-zuo-xi-tong/centos7-xia-iptables-fang-huo-qiang-she-zhi/"/>
      <url>/2019/11/09/cao-zuo-xi-tong/centos7-xia-iptables-fang-huo-qiang-she-zhi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="查看当前防火墙规则"><a class="markdownIt-Anchor" href="#查看当前防火墙规则"></a> 查看当前防火墙规则</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -L -n</span><br></pre></td></tr></table></figure><h2 id="添加一个开放端口22的输入流的规则"><a class="markdownIt-Anchor" href="#添加一个开放端口22的输入流的规则"></a> 添加一个开放端口22的输入流的规则</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span><br></pre></td></tr></table></figure><h2 id="添加一个开放端口22的输出流的规则"><a class="markdownIt-Anchor" href="#添加一个开放端口22的输出流的规则"></a> 添加一个开放端口22的输出流的规则</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT</span><br></pre></td></tr></table></figure><h2 id="保存上述规则"><a class="markdownIt-Anchor" href="#保存上述规则"></a> 保存上述规则</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service iptables save</span><br></pre></td></tr></table></figure><h2 id="查看iptables服务状态"><a class="markdownIt-Anchor" href="#查看iptables服务状态"></a> 查看iptables服务状态</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service iptables status</span><br></pre></td></tr></table></figure><h2 id="打开iptables的配置文件"><a class="markdownIt-Anchor" href="#打开iptables的配置文件"></a> 打开iptables的配置文件</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure><h2 id="最后重启防火墙使配置生效"><a class="markdownIt-Anchor" href="#最后重启防火墙使配置生效"></a> 最后重启防火墙使配置生效</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart iptables.service</span><br></pre></td></tr></table></figure><h2 id="设置防火墙开机启动"><a class="markdownIt-Anchor" href="#设置防火墙开机启动"></a> 设置防火墙开机启动</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable iptables.service</span><br></pre></td></tr></table></figure><h2 id="禁止iptables服务"><a class="markdownIt-Anchor" href="#禁止iptables服务"></a> 禁止iptables服务</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl disable iptables</span><br></pre></td></tr></table></figure><h2 id="暂停服务"><a class="markdownIt-Anchor" href="#暂停服务"></a> 暂停服务</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop iptables</span><br></pre></td></tr></table></figure><h2 id="解除禁止iptables"><a class="markdownIt-Anchor" href="#解除禁止iptables"></a> 解除禁止iptables</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable iptables</span><br></pre></td></tr></table></figure><h2 id="开启服务"><a class="markdownIt-Anchor" href="#开启服务"></a> 开启服务</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start iptables</span><br></pre></td></tr></table></figure><h2 id="清空已有的规则"><a class="markdownIt-Anchor" href="#清空已有的规则"></a> 清空已有的规则</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br></pre></td></tr></table></figure><h1 id="iptables的基本参数"><a class="markdownIt-Anchor" href="#iptables的基本参数"></a> iptables的基本参数</h1><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-P</td><td>设置默认策略:iptables -P INPUT (DROP</td></tr><tr><td>-F</td><td>清空规则链</td></tr><tr><td>-L</td><td>查看规则链</td></tr><tr><td>-t</td><td>表名（默认为filter）</td></tr><tr><td>-A</td><td>在规则链的末尾加入新规则</td></tr><tr><td>-I num</td><td>在规则链的头部加入新规则</td></tr><tr><td>-D num</td><td>删除某一条规则</td></tr><tr><td>-s ip</td><td>匹配来源地址IP/MASK，加叹号&quot;!&quot;表示除这个IP外</td></tr><tr><td>-d ip</td><td>匹配目标地址IP/MASK，加叹号&quot;!&quot;表示除这个IP外</td></tr><tr><td>-i 网卡名称</td><td>匹配从这块网卡流入的数据</td></tr><tr><td>-o 网卡名称</td><td>匹配从这块网卡流出的数据</td></tr><tr><td>-p</td><td>匹配协议,如tcp,udp,icmp</td></tr><tr><td>–dport num</td><td>匹配目标端口号</td></tr><tr><td>–sport num</td><td>匹配来源端口号</td></tr></tbody></table><h1 id="iptables命令中则常见的控制类型"><a class="markdownIt-Anchor" href="#iptables命令中则常见的控制类型"></a> iptables命令中则常见的控制类型</h1><table><thead><tr><th>动作参数</th><th>参数说明</th></tr></thead><tbody><tr><td>ACCEPT</td><td>对满足策略的数据包允许通过</td></tr><tr><td>DROP</td><td>丢弃数据包，且不返回任何信息</td></tr><tr><td>REJECT</td><td>丢弃数据包，但是会返回拒绝的信息</td></tr><tr><td>LOG</td><td>把通过的数据包写到日志中</td></tr></tbody></table><h1 id="规则链则依据处理数据包的位置不同而进行分类"><a class="markdownIt-Anchor" href="#规则链则依据处理数据包的位置不同而进行分类"></a> 规则链则依据处理数据包的位置不同而进行分类</h1><table><thead><tr><th>数据包链参数</th><th>参数说明</th></tr></thead><tbody><tr><td>INPUT</td><td>处理入站的数据包</td></tr><tr><td>OUTPUT</td><td>处理出站的数据包</td></tr><tr><td>FORWARD</td><td>处理转发的数据包</td></tr><tr><td>PREROUTING</td><td>在进行路由选择前处理数据包</td></tr><tr><td>POSTROUTING</td><td>在进行路由选择后处理数据包</td></tr></tbody></table><blockquote><ol><li>如果数据包的目的地址是本机，则系统将数据包送往Input链。如果通过规则检查，则该包被发给相应的本地进程处理；如果没有通过规则检查，系统就会将这个包丢掉。</li><li>如果数据包的目的地址不是本机，也就是说，这个包将被转发，则系统将数据包送往Forward链。如果通过规则检查，则该包被发给相应的本地进程处理;如果没有通过规则检查，系统就会将这个包丢掉。</li><li>如果数据包是由本地系统进程产生的，则系统将其送往Output链。如果通过规则检查，则该包被发给相应的本地进程处理；如果没有通过规则检查，系统就会将这个包丢掉。</li></ol></blockquote><blockquote><p>input只对要访问本机的包有效，forward只对不是访问本机，但是要通过这台机器转发的包有效</p></blockquote><blockquote><p>制定规则的时候有个原则就是 放行的要先放在前面, 禁止的要放在最后.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7.5利用OneinStack搭建环境</title>
      <link href="/2019/11/09/cao-zuo-xi-tong/centos7-5-li-yong-oneinstack-da-jian-huan-jing/"/>
      <url>/2019/11/09/cao-zuo-xi-tong/centos7-5-li-yong-oneinstack-da-jian-huan-jing/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="1-准备"><a class="markdownIt-Anchor" href="#1-准备"></a> 1、准备</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装之前先检查一下系统是否有默认安装的`apache`或者`php`</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rpm -qa|grep httpd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rpm -qa|grep php</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rpm -qa|grep mysql</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 把上面指令列出来的包删除</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rpm -e ****(包名)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装一些必备的包</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum -y install gcc gcc-c++ make screen wget net-tools curl python</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> screen -S bt</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译安装`hiredis`</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/redis/hiredis.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> hiredis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make &amp;&amp; make install</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir /usr/lib/hiredis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp libhiredis.so /usr/lib/hiredis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir /usr/include/hiredis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp hiredis.h /usr/include/hiredis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'/usr/local/lib'</span> &gt;&gt;/etc/ld.so.conf </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ldconfig</span></span><br></pre></td></tr></table></figure><h3 id="2-修改centos默认yum源为国内yum镜像源"><a class="markdownIt-Anchor" href="#2-修改centos默认yum源为国内yum镜像源"></a> 2、修改<code>CentOS</code>默认<code>yum</code>源为国内<code>yum</code>镜像源</h3><ol><li>备份<code>/etc/yum.repos.d/CentOS-Base.repo</code> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span></span><br></pre></td></tr></table></figure></li><li>下载<code>163</code>的<code>yum</code>源配置文件到上面那个文件夹内 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.<span class="built_in">help</span>/CentOS7-Base-163.repo</span></span><br></pre></td></tr></table></figure></li><li>运行<code>yum makecache</code>生成缓存 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum makecache</span></span><br></pre></td></tr></table></figure></li><li>更新系统 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum -y update</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="3-将已经挂载在-home-目录上的硬盘挂载到-data-目录上"><a class="markdownIt-Anchor" href="#3-将已经挂载在-home-目录上的硬盘挂载到-data-目录上"></a> 3. 将已经挂载在 <code>home</code> 目录上的硬盘挂载到 <code>data</code> 目录上</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> df -h                   <span class="comment">#（查看分区情况及数据盘名称）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir /data              <span class="comment">#（如果没有data目录就创建，否则此步跳过）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> umount /home            <span class="comment">#（卸载硬盘已挂载的home目录）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mount /dev/mapper/centos-home /data    <span class="comment">#（挂载到data目录）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/fstab           <span class="comment">#（编辑fstab文件修改或添加，使重启后可以自动挂载）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mount /dev/mapper/centos-home /data ext3 auto 0 0</span></span><br></pre></td></tr></table></figure><h3 id="4-交互式安装-oneinstack"><a class="markdownIt-Anchor" href="#4-交互式安装-oneinstack"></a> 4. 交互式安装 <code>OneinStack</code></h3><ul><li>安装 <code>OneinStack</code><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> wget http://mirrors.linuxeye.com/oneinstack-full.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar xzf oneinstack-full.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> oneinstack</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> screen -S oneinstack </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果网路出现中断，可以执行命令`screen -R oneinstack`重新连接安装窗口</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./install.sh          <span class="comment"># 安装</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./addons.sh           <span class="comment"># 添加附加组件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./vhost.sh            <span class="comment"># 添加虚拟主机</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./pureftpd_vhost.sh   <span class="comment"># 管理FTP账号</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./backup_setup.sh     <span class="comment"># 备份</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./upgrade.sh          <span class="comment"># 更新版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./uninstall.sh        <span class="comment"># 卸载</span></span></span><br></pre></td></tr></table></figure></li><li>完成<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Nginx install dir:              /usr/local/nginx</span><br><span class="line">Apache install dir:             /usr/local/apache</span><br><span class="line">Tomcat install dir:             /usr/local/tomcat</span><br><span class="line">Database install dir:           /usr/local/mysql</span><br><span class="line">Database data dir:              /data/mysql</span><br><span class="line">Database user:                  root</span><br><span class="line">Database password:              ********</span><br><span class="line">PHP install dir:                /usr/local/php</span><br><span class="line">Opcache Control Panel URL:      http://172.17.141.204/ocp.php</span><br><span class="line">Pure-FTPd install dir:          /usr/local/pureftpd</span><br><span class="line">Create FTP virtual script:      ./pureftpd_vhost.sh</span><br><span class="line">phpMyAdmin dir:                 /data/wwwroot/default/phpMyAdmin</span><br><span class="line">phpMyAdmin Control Panel URL:   http://172.17.141.204/phpMyAdmin</span><br><span class="line">redis install dir:              /usr/local/redis</span><br><span class="line">Index URL:                      http://172.17.141.204/</span><br></pre></td></tr></table></figure></li><li>管理服务<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> webmin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rpm -Uvh https://nchc.dl.sourceforge.net/project/webadmin/webmin/1.930/webmin-1.930-1.noarch.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Nginx/Tengine/OpenResty</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service nginx &#123;start|stop|status|restart|reload|configtest&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> MySQL/MariaDB/Percona:</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service mysqld &#123;start|stop|restart|reload|status&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> PostgreSQL</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service postgresql &#123;start|stop|restart|status&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> MongoDB</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service mongod &#123;start|stop|status|restart|reload&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> PHP</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service php-fpm &#123;start|stop|restart|reload|status&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> HHVM</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service supervisord &#123;start|stop|status|restart|reload&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Apache</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service httpd &#123;start|restart|stop&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Tomcat</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service tomcat &#123;start|stop|status|restart&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Pure-Ftpd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service pureftpd &#123;start|stop|restart|status&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service redis-server &#123;start|stop|status|restart&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Memcached</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service memcached &#123;start|stop|status|restart|reload&#125;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> OneinStack </tag>
            
            <tag> 虚拟主机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PicGo-图片图床上传工具</title>
      <link href="/2019/11/09/gong-ju-zi-liao/picgo-tu-pian-tu-chuang-shang-chuan-gong-ju/"/>
      <url>/2019/11/09/gong-ju-zi-liao/picgo-tu-pian-tu-chuang-shang-chuan-gong-ju/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="应用说明"><a class="markdownIt-Anchor" href="#应用说明"></a> 应用说明</h2><p><strong>PicGo 在上传图片之后自动会将图片链接复制到你的剪贴板里，可选 5 种复制的链接格式。</strong></p><p>PicGo 目前支持了</p><ul><li><s><code>微博图床</code> v1.0</s> <strong>微博图床从 2019 年 4 月开始进行防盗链，不建议继续使用</strong></li><li><code>七牛图床</code> v1.0</li><li><code>腾讯云 COS v4\v5版本</code> v1.1 &amp; v1.5.0</li><li><code>又拍云</code> v1.2.0</li><li><code>GitHub</code> v1.5.0</li><li><code>SM.MS</code> v1.5.1</li><li><code>阿里云 OSS</code> v1.6.0</li><li><code>Imgur</code> v1.6.0</li></ul><p><strong>本体不再增加默认的图床支持。你可以自行开发第三方图床插件。详见 <a href="https://picgo.github.io/PicGo-Core-Doc/" target="_blank" rel="noopener">PicGo-Core</a></strong>。</p><p>第三方插件以及使用了 PicGo 底层的应用可以在 <a href="https://github.com/PicGo/Awesome-PicGo" target="_blank" rel="noopener">Awesome-PicGo</a> 找到。欢迎贡献！</p><p>PicGo 支持 macOS、Windows 64位（&gt;= v1.3.1），Linux（&gt;= v1.6.0）。</p><p>支持快捷键<code>command+shift+p</code>（macOS）或者<code>control+shift+p</code>（Windows\Linux）用以支持快捷上传剪贴板里的图片（第一张）。<br>PicGo 支持自定义快捷键，使用方法见<a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html" target="_blank" rel="noopener">配置手册</a>。</p><p>开发进度可以查看 <a href="https://github.com/Molunerfinn/PicGo/projects" target="_blank" rel="noopener">Projects</a>，会同步更新开发进度。</p><p><strong>如果第一次使用，请参考应用使用<a href="https://picgo.github.io/PicGo-Doc/zh/guide/getting-started.html" target="_blank" rel="noopener">快速上手</a>。遇到问题了还可以看看 <a href="https://github.com/Molunerfinn/PicGo/blob/dev/FAQ.md" target="_blank" rel="noopener">FAQ</a> 以及被关闭的 <a href="https://github.com/Molunerfinn/PicGo/issues?q=is%3Aissue+is%3Aclosed" target="_blank" rel="noopener">issues</a>。</strong></p><h2 id="下载安装"><a class="markdownIt-Anchor" href="#下载安装"></a> 下载安装</h2><p>点击此处下载<a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener">应用</a>。</p><p>macOS 用户请下载最新版本的 <code>dmg</code> 文件，Windows 用户请下载最新版本的 <code>exe</code> 文件，Linux用户请下载 <code>AppImage</code> 文件。</p><p><strong>如果你是 Arch 类的 Linux 用户，可以直接通过 <code>aurman -S picgo-appimage</code> 来安装 PicGo。感谢 @houbaron 的贡献！</strong></p><p><strong>如果你是 macOS 用户，可以使用 <code>brew cask</code> 来安装 PicGo: <code>brew cask install picgo</code>。感谢 @womeimingzi11 的贡献！</strong></p><p><strong>如果你是 Windows 用户，还可以使用 <a href="https://scoop.sh/" target="_blank" rel="noopener">Scoop</a> 来安装 PicGo: <code>scoop bucket add helbing https://github.com/helbing/scoop-bucket</code> &amp; <code>scoop install picgo</code>。 感谢 @helbing 的贡献！</strong></p><h2 id="应用截图"><a class="markdownIt-Anchor" href="#应用截图"></a> 应用截图</h2><p><img alt data-src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/picgo-2.0.gif" class="lazyload"></p><p><img alt="picgo-menubar" data-src="https://user-images.githubusercontent.com/12621342/34242310-b5056510-e655-11e7-8568-60ffd4f71910.gif" class="lazyload"></p><h2 id="开发说明"><a class="markdownIt-Anchor" href="#开发说明"></a> 开发说明</h2><blockquote><p>目前仅针对 Mac、Windows。Linux 平台并未测试。</p></blockquote><p>如果你想要学习、开发、修改或自行构建 PicGo，可以依照下面的指示：</p><blockquote><p>如果想学习 Electron-vue 的开发，可以查看我写的系列教程——<a href="https://molunerfinn.com/tags/Electron-vue/" target="_blank" rel="noopener">Electron-vue 开发实战</a></p></blockquote><ol><li>你需要有 Node、Git环境，了解 npm 的相关知识。</li><li><code>git clone https://github.com/Molunerfinn/PicGo.git</code> 并进入项目</li><li><code>npm install</code> 下载依赖</li><li>Mac 需要有 Xcode 环境，Windows 需要有 VS 环境。</li></ol><h3 id="开发模式"><a class="markdownIt-Anchor" href="#开发模式"></a> 开发模式</h3><p>输入 <code>npm run dev</code> 进入开发模式，开发模式具有热重载特性。不过需要注意的是，开发模式不稳定，会有进程崩溃的情况。此时需要：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl+c <span class="comment"># 退出开发模式</span></span><br><span class="line">npm run dev <span class="comment"># 重新进入开发模式</span></span><br></pre></td></tr></table></figure><h3 id="生产模式"><a class="markdownIt-Anchor" href="#生产模式"></a> 生产模式</h3><p>如果你需要自行构建，可以 <code>npm run build</code> 开始进行构建。构建成功后，会在 <code>build</code> 目录里出现构建成功的相应安装文件。</p><p><strong>注意</strong>：如果你的网络环境不太好，可能会出现 <code>electron-builder</code> 下载 <code>electron</code> 二进制文件失败的情况。这个时候需要在 <code>npm run build</code> 之前指定一下 <code>electron</code> 的源为国内源：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> ELECTRON_MIRROR=<span class="string">"https://npm.taobao.org/mirrors/electron/"</span></span><br><span class="line"><span class="comment"># 在 Windows 上，则可以使用 set ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ （无需引号）</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>只需第一次构建的时候指定一下国内源即可。后续构建不需要特地指定。二进制文件下载在 <code>~/.electron/</code> 目录下。如果想要更新 <code>electron</code> 构建版本，可以删除 <code>~/.electron/</code> 目录，然后重新运行上一步，让 <code>electron-builder</code>去下载最新的 <code>electron</code> 二进制文件。</p><h2 id="其他相关"><a class="markdownIt-Anchor" href="#其他相关"></a> 其他相关</h2><ul><li><a href="https://github.com/Spades-S/vs-picgo" target="_blank" rel="noopener">vs-picgo</a>：PicGo 的 VS Code 版。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 七牛云 </tag>
            
            <tag> PicGo </tag>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VScode-七牛云上传插件</title>
      <link href="/2019/11/09/gong-ju-zi-liao/vscode-qi-niu-yun-shang-chuan-cha-jian/"/>
      <url>/2019/11/09/gong-ju-zi-liao/vscode-qi-niu-yun-shang-chuan-cha-jian/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>使用七牛云的js-sdk, 开发一个vscode的上传插件.<br>一个 VS Code 插件，编写 Markdown 时可以快捷上传本地图片获取七牛图床外链。<br>只有在编辑 Markdown 时插件才可使用。</p></blockquote><h2 id="使用"><a class="markdownIt-Anchor" href="#使用"></a> 使用</h2><ol><li>粘贴图片路径上传：SHIFT + P</li><li>直接选择图片上传：SHIFT + O.</li><li>截屏图片上传： SHIFT + V</li></ol><blockquote><p>按键需在英文编辑状态下有效，功能2 需要升级 vscode 到 v1.17+。</p></blockquote><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>Ctrl+P 输入命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ext install qiniu-upload-image-plus</span><br></pre></td></tr></table></figure><p><img alt="20191109155622.png" data-src="http://q0lg0jeb8.bkt.clouddn.com/assets/images/20191109155622.png" class="lazyload"></p><h3 id="用户设置"><a class="markdownIt-Anchor" href="#用户设置"></a> 用户设置</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 插件开关</span></span><br><span class="line">    <span class="attr">"qiniu.enable"</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个有效的七牛 AccessKey 签名授权</span></span><br><span class="line">    <span class="attr">"qiniu.access_key"</span>: <span class="string">"*****************************************"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个有效的七牛 SecretKey 签名授权</span></span><br><span class="line">    <span class="attr">"qiniu.secret_key"</span>: <span class="string">"*****************************************"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 七牛图片上传空间</span></span><br><span class="line">    <span class="attr">"qiniu.bucket"</span>: <span class="string">"ysblog"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 七牛图片上传路径，参数化命名，暂时支持 $&#123;fileName&#125;、$&#123;mdFileName&#125;、$&#123;date&#125;、$&#123;dateTime&#125;</span></span><br><span class="line">    <span class="comment">// 示例：</span></span><br><span class="line">    <span class="comment">//   $&#123;fileName&#125;-$&#123;date&#125; -&gt; picName-20160725.jpg</span></span><br><span class="line">    <span class="comment">//   $&#123;mdFileName&#125;-$&#123;dateTime&#125; -&gt; markdownName-20170412222810.jpg</span></span><br><span class="line">    <span class="attr">"qiniu.remotePath"</span>: <span class="string">"$&#123;fileName&#125;"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 七牛图床域名</span></span><br><span class="line">    <span class="attr">"qiniu.domain"</span>: <span class="string">"http://xxxxx.xxxx.com"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 截图图片本地保存路径（因为七牛的api限制，截图上传是先将黏贴板里的图片存储到本地，然后再根据这个路径上传图片</span></span><br><span class="line">    <span class="comment">// 如果介意，可以再图片存储路径添加自动删除脚本</span></span><br><span class="line">    <span class="attr">"qiniu.location"</span>: <span class="string">"./img"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="仓库地址"><a class="markdownIt-Anchor" href="#仓库地址"></a> <a href="https://github.com/gityangge/vscode-qiniu-upload-image-plus" target="_blank" rel="noopener">仓库地址</a></h4>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> VS Code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 七牛云 </tag>
            
            <tag> Markdown </tag>
            
            <tag> VS Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo七牛插件安装与使用</title>
      <link href="/2019/11/09/gong-ju-zi-liao/hexo-qi-niu-cha-jian-an-zhuang-yu-shi-yong/"/>
      <url>/2019/11/09/gong-ju-zi-liao/hexo-qi-niu-cha-jian-an-zhuang-yu-shi-yong/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>  本篇博客主要讲解七牛云插件安装与使用，博客中获取七牛云存储的图片主要有两种方式，一种是在七牛控制台中上传图片然后取图片外链地址，另外一种是用七牛云插件+标签语法将图片上传到七牛云并显示到我们所写的博客中，这里主要介绍第二种方式。</p><a id="more"></a><h2 id="安装七牛云插件"><a class="markdownIt-Anchor" href="#安装七牛云插件"></a> 安装七牛云插件</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-qiniu-sync --save</span><br></pre></td></tr></table></figure><h2 id="配置相关信息"><a class="markdownIt-Anchor" href="#配置相关信息"></a> 配置相关信息</h2><ul><li>配置站点文件_config.yml，配置入内容（注意：添加到配置文件时，把//去掉）  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#plugins:</span></span><br><span class="line"><span class="comment"># - hexo-qiniu-sync</span></span><br><span class="line"></span><br><span class="line"><span class="attr">qiniu:</span></span><br><span class="line"><span class="attr">offline:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">sync:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">bucket:</span> <span class="string">blogwenbo</span></span><br><span class="line"><span class="string">//这里将其注释掉，不注释，执行hexo</span> <span class="string">g报错</span></span><br><span class="line"><span class="comment"># secret_file: sec/qn.json or C:</span></span><br><span class="line"><span class="attr">access_key:</span> <span class="string">your</span> <span class="string">access_key</span></span><br><span class="line"><span class="attr">secret_key:</span> <span class="string">your</span> <span class="string">secret_key</span></span><br><span class="line"><span class="string">//</span> <span class="string">上传的资源子目录前缀.如设置，需与urlPrefix同步</span></span><br><span class="line"><span class="attr">dirPrefix:</span> <span class="string">static</span></span><br><span class="line"><span class="string">//外链前缀</span></span><br><span class="line"><span class="attr">urlPrefix:</span> <span class="string">http://p2zukkwm9.bkt.clouddn.com/static</span></span><br><span class="line"><span class="string">//使用默认配置即可</span></span><br><span class="line"><span class="attr">up_host:</span> <span class="string">http://upload.qiniu.com</span></span><br><span class="line"><span class="string">//本地目录</span></span><br><span class="line"><span class="attr">local_dir:</span> <span class="string">static</span></span><br><span class="line"><span class="string">//</span> <span class="string">是否更新已经上传过的文件(仅文件大小不同或在上次上传后进行更新的才会重新上传)</span></span><br><span class="line"><span class="attr">update_exist:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">image:</span> </span><br><span class="line">    <span class="attr">folder:</span> <span class="string">images</span></span><br><span class="line">    <span class="attr">extend:</span> </span><br><span class="line"><span class="attr">js:</span></span><br><span class="line">    <span class="attr">folder:</span> <span class="string">js</span></span><br><span class="line"><span class="attr">css:</span></span><br><span class="line">    <span class="attr">folder:</span> <span class="string">css</span></span><br></pre></td></tr></table></figure></li><li>生成七牛配置路径，执行下面命令任意一个  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">s</span></span><br><span class="line"><span class="string">或</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="string">//终端输出</span></span><br><span class="line"><span class="string">INFO</span>  <span class="string">-----------------------------------------------------------</span></span><br><span class="line"><span class="attr">INFO  qiniu state:</span> <span class="string">online</span></span><br><span class="line"><span class="attr">INFO  qiniu sync:</span>  <span class="literal">true</span></span><br><span class="line"><span class="attr">INFO  qiniu local dir:</span>  <span class="string">static</span></span><br><span class="line"><span class="attr">INFO  qiniu url:</span>   <span class="string">http://blogwenbo.com/static</span></span><br><span class="line"><span class="string">INFO</span>  <span class="string">-----------------------------------------------------------</span></span><br><span class="line"><span class="string">INFO</span>  <span class="string">Start</span> <span class="string">processing</span></span><br><span class="line"><span class="string">INFO</span>  <span class="string">Now</span> <span class="string">start</span> <span class="string">qiniu</span> <span class="string">sync.</span></span><br><span class="line"><span class="attr">INFO  Need upload file num:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></li><li>就会在static目录下生成images、css、js三个文件夹。这时我们把测试图片七牛云.png放在images文件夹下，然后按照如下标签语法书写：  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">&#123;%</span> <span class="string">qnimg</span> <span class="string">七牛云.png</span> <span class="string">title:七牛云</span> <span class="string">alt:七牛云</span> <span class="string">'class:'</span> <span class="string">extend:?imageView2/2/w/450</span> <span class="string">%&#125;</span></span><br></pre></td></tr></table></figure></li><li>同步静态资源到七牛云空间，主要有两种方式，一种是使用hexo命令，还有一种是使用七牛插件命令，可以参考GitHub文档：<a href="https://github.com/hexo-qiniu-sync" target="_blank" rel="noopener">hexo-qiniu-sync</a>  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">//1、启用本地服务器.即使用</span> <span class="string">hexo</span> <span class="string">server</span> <span class="string">命令（简写为</span> <span class="string">hexo</span> <span class="string">s）</span></span><br><span class="line"><span class="string">//当以本地服务器模式启动后，会自动监测</span> <span class="string">local_dir</span> <span class="string">目录下的文件变化，</span> <span class="string">会自动将新文件进行上传。</span></span><br><span class="line"><span class="string">如果文件进行了修改，但设置中没有启用</span> <span class="string">update_exist</span> <span class="string">配置，则不会更新到七牛空间。</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">s</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">server</span></span><br><span class="line"></span><br><span class="line"><span class="string">//2、使用命令行命令(sync</span> <span class="string">|</span> <span class="string">s</span> <span class="string">|</span> <span class="string">sync2</span> <span class="string">|</span> <span class="string">s2)</span></span><br><span class="line"><span class="string">//命令行命令会扫描</span> <span class="string">local_dir</span> <span class="string">目录下的文件，同步至七牛空间。</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">qiniu</span> <span class="string">sync</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">qiniu</span> <span class="string">s</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">qiniu</span> <span class="string">sync2</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">qiniu</span> <span class="string">s2</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 七牛云 </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo相关配置和使用</title>
      <link href="/2019/11/09/gong-ju-zi-liao/hexo-xiang-guan-pei-zhi-he-shi-yong/"/>
      <url>/2019/11/09/gong-ju-zi-liao/hexo-xiang-guan-pei-zhi-he-shi-yong/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>主页： <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">https://hexo.io/zh-cn/</a><br />主页中有非常详细的介绍，主页中有介绍内容我这里就不赘述了，这里主要说说主页中没有详细说明内容。</p></blockquote><p>hexo 可以理解为是基于node.js制作的一个博客工具，不是我们理解的一个开源的博客系统。其中的差别，有点意思。<br />hexo 正常来说，不需要部署到我们的服务器上，我们的服务器上保存的，其实是基于在hexo通过markdown编写的文章，然后hexo帮我们生成静态的html页面，然后，将生成的html上传到我们的服务器。简而言之：hexo是个静态页面生成、上传的工具。</p><h2 id="配置_configyml文件"><a class="markdownIt-Anchor" href="#配置_configyml文件"></a> 配置_config.yml文件</h2><ul><li>站点配置  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">WenBo丨星空灬</span>  <span class="string">//网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">To</span> <span class="string">strive,</span> <span class="string">to</span> <span class="string">seek,</span> <span class="string">to</span> <span class="string">find,</span> <span class="string">and</span> <span class="string">not</span> <span class="string">to</span> <span class="string">yield.</span>  <span class="string">//网站副标题</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">To</span> <span class="string">strive,</span> <span class="string">to</span> <span class="string">seek,</span> <span class="string">to</span> <span class="string">find,</span> <span class="string">and</span> <span class="string">not</span> <span class="string">to</span> <span class="string">yield.</span>  <span class="string">//网站描述</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">WenBo</span>  <span class="string">//您的名字</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span>  <span class="string">//网站使用的语言</span> <span class="string">简体中文</span> <span class="string">zh-Hans</span></span><br><span class="line"><span class="attr">timezone:</span>   <span class="string">//网站时区。Hexo</span> <span class="string">默认使用您电脑的时区</span></span><br></pre></td></tr></table></figure></li><li>URL配置  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://blogwenbo.com/</span>  <span class="string">//网址</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span>  <span class="string">//网站根目录</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>  <span class="string">//|</span> <span class="string">文章的</span> <span class="string">[永久链接](https://hexo.io/zh-cn/docs/permalinks.html)</span> <span class="string">格式</span> <span class="string">|</span> <span class="string">`:year/:month/:day/:title/`</span> <span class="string">|</span></span><br><span class="line"></span><br><span class="line"><span class="attr">permalink_defaults:</span>  <span class="string">//永久链接中各部分的默认值</span></span><br></pre></td></tr></table></figure></li><li>目录配置  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span>  <span class="string">//资源文件夹，这个文件夹用来存放内容。默认值：source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span>  <span class="string">//公共文件夹，这个文件夹用于存放生成的站点文件。默认值：public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span>  <span class="string">//标签文件夹</span> <span class="string">默认值：tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span>  <span class="string">//归档文件夹</span> <span class="string">默认值：archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span>  <span class="string">//分类文件夹</span>  <span class="string">默认值：categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span>  <span class="string">//Include</span> <span class="string">code</span> <span class="string">文件夹</span> <span class="string">默认值：downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span>  <span class="string">//国际化（i18n）文件夹</span> <span class="string">默认值：:lang</span></span><br><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span>  <span class="string">//跳过指定文件的渲染，您可使用</span> <span class="string">[glob</span> <span class="string">表达式](https://github.com/isaacs/node-glob)来匹配路径。</span></span><br></pre></td></tr></table></figure></li><li>Git部署配置  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">git</span> <span class="string">//填git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">git@github.com:wenmobo/wenmobo.github.io.git</span>  <span class="string">//SSH地址</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span>  <span class="string">//分支</span></span><br></pre></td></tr></table></figure></li><li><a href="http://xn--README-2x9px75i.md" target="_blank" rel="noopener">配置README.md</a>  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure></li><li>切换主题  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">例如：切换成NexT主题，在hexo根文件加下，编辑**_config.yml**文件</span><br><span class="line">theme: next</span><br><span class="line"></span><br><span class="line">//配置之后，执行以下命令清除一下缓存</span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure></li></ul><h2 id="hexo命令"><a class="markdownIt-Anchor" href="#hexo命令"></a> Hexo命令</h2><ul><li>初始化文件夹网站  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//Hexo 默认在目前的文件夹建立网站</span><br><span class="line">hexo init</span><br><span class="line"></span><br><span class="line">//指定文件夹</span><br><span class="line">hexo init [folder]</span><br></pre></td></tr></table></figure></li><li>新建一篇文章  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new "my blog"</span><br></pre></td></tr></table></figure></li><li>生成静态文件  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">//简写</span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">选项  描述</span><br><span class="line">-d, --deploy    文件生成后立即部署网站</span><br><span class="line">-w, --watch     监视文件变动</span><br></pre></td></tr></table></figure></li><li>发表草稿  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure></li><li>启动服务器。默认情况下，访问网址为： <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo server</span><br><span class="line">//简写</span><br><span class="line">hexo s</span><br><span class="line"></span><br><span class="line">选项  描述</span><br><span class="line">-p, --port      重设端口</span><br><span class="line">-s, --static    只使用静态文件</span><br><span class="line">-l, --log       启动日记记录，使用覆盖记录格式</span><br></pre></td></tr></table></figure></li><li>部署网站  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line">//简写</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></li><li>查看hexo版本  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo version</span><br><span class="line">//简写 </span><br><span class="line">hexo v</span><br></pre></td></tr></table></figure></li><li>新建页面  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//比如说新建标签页面，执行命令之后会在根目录source文件夹下创建tags文件夹</span><br><span class="line">hexo new page "tags"</span><br></pre></td></tr></table></figure></li><li>Hexo安装Git插件  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在阿里云中搭建Hexo博客</title>
      <link href="/2019/11/08/gong-ju-zi-liao/zai-a-li-yun-zhong-da-jian-hexo-bo-ke/"/>
      <url>/2019/11/08/gong-ju-zi-liao/zai-a-li-yun-zhong-da-jian-hexo-bo-ke/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="一-前言"><a class="markdownIt-Anchor" href="#一-前言"></a> 一、前言</h1><p>  由于不想部署在github上，因为Github的访问速度在国内比较慢，所以有了此文。<br />  部署之前先了解一下hexo利于git更新的流程，部署在Github上和部署在云服务器上没有特别大的本质区别。<br />  整个流程就是本地将 *.md 渲染成静态文件，然后Git推送到服务器的repository,服务器再通过 git-hooks 同步网站根目录。再利于nginx托管这些静态资源，就可以实现快速的访问。</p><h1 id="二-环境安装"><a class="markdownIt-Anchor" href="#二-环境安装"></a> 二、环境安装</h1><ul><li><h2 id="本地环境安装mac"><a class="markdownIt-Anchor" href="#本地环境安装mac"></a> 本地环境安装（MAC）</h2></li><li><p><code>brew</code> 安装</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span><br></pre></td></tr></table></figure></li><li><p><code>node.js</code> 安装</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew install nodejs</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li><li><p><code>git</code> 安装</p><blockquote><p>系统已经自带，不用单独安装。</p></blockquote></li><li><p><code>hexo</code> 安装</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli hexo-server -g</span><br></pre></td></tr></table></figure></li><li><p>安装 <code>vs code</code></p></li><li><p>使用git bash生成ssh</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C "gadflybsd@gmail.com" -f ~/.ssh/gadfly_pub_authorized_rsa</span><br></pre></td></tr></table></figure><p>在本地服务器中配置好了公钥，接下来我们需要把这个公钥交给服务器，相当于本地机器有了一把能访问服务器的“钥匙”，所以接下来需要配置服务器。</p></li><li><h2 id="服务器部分"><a class="markdownIt-Anchor" href="#服务器部分"></a> 服务器部分</h2><h3 id="新建项目"><a class="markdownIt-Anchor" href="#新建项目"></a> 新建项目</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir /data/repo/lcy.gadfly.pub.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init --bare /data/repo/lcy.gadfly.pub.git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Initialized empty Git repository <span class="keyword">in</span> /data/repo/lcy.gadfly.pub.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> /root/oneinstack/vhost.sh <span class="comment"># 创建lcy.gadfly.pub虚拟站点</span></span></span><br></pre></td></tr></table></figure><h3 id="添加用户"><a class="markdownIt-Anchor" href="#添加用户"></a> 添加用户</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> useradd GadflyLCY</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> passwd GadflyLCY</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> usermod -G git GadflyLCY  <span class="comment">#将用户添加到git用户组</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/group <span class="comment"># 查看用户组及用户是否成功配置</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown -R GadflyLCY:git /data/repo/lcy.gadfly.pub.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown -R GadflyLCY:git /data/wwwroot/lcy.gadfly.pub</span></span><br></pre></td></tr></table></figure><h3 id="创建本地git仓库"><a class="markdownIt-Anchor" href="#创建本地git仓库"></a> 创建本地<code>GIT</code>仓库</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir /data/repo</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /data/repo</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init --bare lcy.gadfly.pub.git</span></span><br></pre></td></tr></table></figure><h3 id="配置-git-hooks"><a class="markdownIt-Anchor" href="#配置-git-hooks"></a> 配置 GIT HOOKS</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /data/repo/lcy.gadfly.pub.git/hooks/post-receive</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">git --work-tree=/data/wwwroot/lcy.gadfly.pub --git-dir=/data/repo/lcy.gadfly.pub.git checkout -f</span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod +x /data/repo/lcy.gadfly.pub.git/hooks/post-receive</span></span><br></pre></td></tr></table></figure></li><li><h2 id="本地部分"><a class="markdownIt-Anchor" href="#本地部分"></a> 本地部分</h2><h3 id="安装-hexo"><a class="markdownIt-Anchor" href="#安装-hexo"></a> 安装 <code>Hexo</code></h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">npm install -g shelljs</span><br><span class="line">npm install -g readline-sync</span><br><span class="line">npm install -g lunar-calendar</span><br></pre></td></tr></table></figure><h3 id="初始化-hexo-博客"><a class="markdownIt-Anchor" href="#初始化-hexo-博客"></a> 初始化 <code>Hexo</code> 博客</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo init lcy.gadfly.pub</span><br><span class="line">cd lcy.gadfly.pub</span><br><span class="line">npm i hexo-permalink-pinyin --save</span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br><span class="line">npm install hexo-wordcount --save</span><br><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br><span class="line">npm install --save hexo-tag-aplayer</span><br><span class="line">npm install hexo-douban --save</span><br><span class="line">npm install hexo-tag-youku --save</span><br><span class="line">npm install --save hexo-filter-plantuml</span><br><span class="line">npm install --save hexo-tag-qrcode</span><br><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm un hexo-renderer-kramed --save</span><br><span class="line">npm un hexo-math --save</span><br><span class="line">npm i @upupming/hexo-renderer-markdown-it-plus --save</span><br><span class="line">npm install hexo-tag-echarts3 --save</span><br><span class="line">npm install --save hexo-blog-encrypt</span><br><span class="line">npm install --save hexo-lunar-calendar</span><br><span class="line">npm install hexo-tag-youku --save</span><br><span class="line">npm install --save hexo-tag-bilibili</span><br><span class="line">npm install --save hexo-filter-flowchart</span><br><span class="line">npm install --save hexo-filter-sequence</span><br><span class="line">npm install hexo-generator-search --save</span><br><span class="line">npm install --save hexo-pdf</span><br><span class="line">hexo new page about</span><br><span class="line">hexo new page tags</span><br><span class="line">hexo new page categories</span><br><span class="line">hexo new page link</span><br><span class="line">hexo new page music</span><br><span class="line">hexo new page gallery</span><br></pre></td></tr></table></figure><h3 id="创建密钥设置免密git连接"><a class="markdownIt-Anchor" href="#创建密钥设置免密git连接"></a> 创建密钥，设置免密git连接</h3>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"GadflyLcy@gmail.com"</span> -f ~/.ssh/GadflyLCY-GitHub</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-copy-id -i GadflyLCY-GitHub.pub GadflyLCY@gadfly.pub</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh -v GadflyLCY@gadfly.pub</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Hi GadflyLCY! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果不通，进行以下这两步操作。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-agent -s</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-add ~/.ssh/GadflyLCY-GitHub</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="配置-hexo"><a class="markdownIt-Anchor" href="#配置-hexo"></a> 配置 <code>Hexo</code></h1><h2 id="创建-createhexopostjs-文件"><a class="markdownIt-Anchor" href="#创建-createhexopostjs-文件"></a> 创建 <code>createHexoPost.js</code> 文件</h2><blockquote><p>选择新建博客的分类、拉取GIT仓库</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'shelljs/global'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> readlineSync = <span class="built_in">require</span>(<span class="string">'readline-sync'</span>);</span><br><span class="line">process.stdin.setEncoding(<span class="string">'utf8'</span>);</span><br><span class="line">process.stdout.write(<span class="string">"现在开始新建Hexo博客文章......\n"</span>);</span><br><span class="line">process.stdout.write(<span class="string">"系统中的博客分类如下：\n"</span>);</span><br><span class="line">process.stdout.write(<span class="string">"0：无分类\t1：小学数学\t2：小学语文\t3：小学英语\t4：杂谈随笔\t5：工具字典\t6：手工输入分类名称\t其他按键：退出\n"</span>);</span><br><span class="line"><span class="keyword">var</span> input = readlineSync.question(<span class="string">'请选择新建文章应该所属的分类（默认：0）：'</span>);</span><br><span class="line"><span class="keyword">if</span>([<span class="string">''</span>].indexOf(input) == <span class="number">0</span>) input = <span class="string">'0'</span>;</span><br><span class="line"><span class="keyword">var</span> category, cmdStr;</span><br><span class="line"><span class="keyword">switch</span>(input)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'0'</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'1'</span>:</span><br><span class="line">      category = <span class="string">'小学数学'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'2'</span>:</span><br><span class="line">      category = <span class="string">'小学语文'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'3'</span>:</span><br><span class="line">      category = <span class="string">'小学英语'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'4'</span>:</span><br><span class="line">      category = <span class="string">'杂谈随笔'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'5'</span>:</span><br><span class="line">      category = <span class="string">'工具字典'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'6'</span>:</span><br><span class="line">      category = readlineSync.question(<span class="string">"请输入您的分类名称："</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      bye(<span class="string">"再见，Bye！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> title = readlineSync.question(<span class="string">"请输入您的文章标题："</span>).toString().trim();</span><br><span class="line"><span class="keyword">if</span>([<span class="string">''</span>, <span class="string">'null'</span>].indexOf(title) == <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(category != <span class="literal">null</span> || [<span class="string">''</span>, <span class="string">'null'</span>].indexOf(input) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">console</span>.warn(<span class="string">"您选择的分类是【"</span> + category + <span class="string">"】"</span>);</span><br><span class="line">        cmdStr = <span class="string">'hexo new -p "'</span> + category + <span class="string">'/'</span> + title + <span class="string">'" -c "'</span> + category + <span class="string">'" "'</span> + title + <span class="string">'"'</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cmdStr = <span class="string">'hexo new -c "" "'</span>+ title + <span class="string">'"'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    bye(<span class="string">"再见，Bye！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> isPush = readlineSync.question(<span class="string">"是否拉取最新的GIT仓库数据（y/n，默认：y）："</span>).toString().trim();</span><br><span class="line"><span class="keyword">if</span>([<span class="string">''</span>, <span class="string">'y'</span>, <span class="string">'Y'</span>, <span class="string">'yes'</span>, <span class="string">'Yes'</span>, <span class="string">'YES'</span>].indexOf(isPush) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    exec(<span class="string">'git pull origin master'</span>, (err,stdout,stderr) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'get weather api error:'</span> + stderr);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newPost(cmdStr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    newPost(cmdStr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newPost</span>(<span class="params">cmdStr</span>)</span>&#123;</span><br><span class="line">    exec(cmdStr, (err,stdout,stderr) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'get weather api error:'</span> + stderr);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            bye(<span class="string">"《"</span> + title + <span class="string">"》已经创建成功，请开始尽情的写作吧！"</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bye</span>(<span class="params">message</span>)</span>&#123;</span><br><span class="line">    process.stdout.write(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">    process.exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建-generateanddeployjs-文件"><a class="markdownIt-Anchor" href="#创建-generateanddeployjs-文件"></a> 创建 <code>generateAndDeploy.js</code> 文件</h2><blockquote><p>完成Clean、生成静态文件、推送到GIT、发布到互联网</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'shelljs/global'</span>);</span><br><span class="line"><span class="keyword">var</span> readlineSync = <span class="built_in">require</span>(<span class="string">'readline-sync'</span>);</span><br><span class="line">process.stdin.setEncoding(<span class="string">'utf8'</span>);</span><br><span class="line"><span class="keyword">var</span> isPush = readlineSync.question(<span class="string">"是否推送至GIT仓库数据（y/n，默认：y）："</span>).toString().trim();</span><br><span class="line"><span class="keyword">var</span> isDeploy = readlineSync.question(<span class="string">"是否仅本地预览不发布到互联网（y/n，默认：n）："</span>).toString().trim();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"正在清理【Hexo】缓存文件 ..."</span>);</span><br><span class="line">exec(<span class="string">'hexo clean'</span>, (err,stdout,stderr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'get Hexo Clean API error:'</span> + stderr);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"正在生成【Hexo】静态文件 ..."</span>);</span><br><span class="line">        exec(<span class="string">'hexo generate'</span>, (err,stdout,stderr) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'get Hexo Generate API error:'</span> + stderr);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                hexoToGit(isPush, isDeploy)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hexoToGit</span>(<span class="params">isPush, isDeploy</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>([<span class="string">''</span>, <span class="string">'y'</span>, <span class="string">'Y'</span>, <span class="string">'yes'</span>, <span class="string">'Yes'</span>, <span class="string">'YES'</span>].indexOf(isPush) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'正在推送至Github.com代码仓库 ...'</span>);</span><br><span class="line">        exec(<span class="string">'git add .'</span>);</span><br><span class="line">        exec(<span class="string">'git commit -m "add new hexo post!"'</span>);</span><br><span class="line">        exec(<span class="string">'git push --all'</span>, (err,stdout,stderr) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'get GIT API error:'</span> + stderr);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                hexoDeploy(isDeploy);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        hexoDeploy(isDeploy);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hexoDeploy</span>(<span class="params">isDeploy</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>([<span class="string">''</span>, <span class="string">'n'</span>, <span class="string">'N'</span>, <span class="string">'no'</span>, <span class="string">'No'</span>, <span class="string">'NO'</span>].indexOf(isDeploy) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'正在发布【Hexo】到互联网 ...'</span>);</span><br><span class="line">        exec(<span class="string">'hexo deploy'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'正在启动【Hexo】本地预览服务器 ...'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'如果需要退出预览模式，请按 Ctrl + C 键退出！'</span>);</span><br><span class="line">        exec(<span class="string">'hexo server'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建-scriptseventlistenerjs-文件"><a class="markdownIt-Anchor" href="#创建-scriptseventlistenerjs-文件"></a> 创建 <code>scripts\eventListener.js</code> 文件</h2><blockquote><p>监听 <code>Hexo</code> 的 <code>new</code> 事件，创建文件后在 <code>Visual Studio Code</code> 中打开文件所新建的文件</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">'child_process'</span>).exec</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    hexo.on(<span class="string">'new'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123; </span><br><span class="line">        <span class="keyword">if</span>(os.platform() == <span class="string">'win32'</span>)&#123;</span><br><span class="line">            exec(<span class="string">'start "" "C:\\Program Files\\Visual Studio Code\\Visual_Studio_Code.exe" '</span> + data.path);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(os.platform() == <span class="string">'darwin'</span>)&#123;</span><br><span class="line">            exec(<span class="string">'open -a "/Applications/Visual Studio Code.app" '</span> + data.path); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"产生了一个错误&lt;(￣3￣)&gt; !，错误详情为："</span> + e.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在-packagejson-中修改配置"><a class="markdownIt-Anchor" href="#在-packagejson-中修改配置"></a> 在 <code>package.json</code> 中修改配置</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"新建博客"</span>: <span class="string">"node createHexoPost.js"</span>,</span><br><span class="line">    <span class="attr">"发布博客"</span>: <span class="string">"node generateAndDeploy.js"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="将博客目录整体git到githubcom上进行版本控制"><a class="markdownIt-Anchor" href="#将博客目录整体git到githubcom上进行版本控制"></a> 将博客目录整体<code>GIT</code>到<code>github.com</code>上进行版本控制</h2><ol><li><p>进入项目所在目录，右键，点击Git Bash Here进入终端</p></li><li><p>将目录初始化为一个 Git 项目</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git init</span></span><br></pre></td></tr></table></figure><p>执行完后会在目录中创建一个 .git 隐藏文件夹</p></li><li><p>将所有文件放进新的本地git仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br></pre></td></tr></table></figure><p>如果本地已经有.gitignore文件，会按照已有规则过滤不需要添加的文件。如果不想要添加所有文件，可以把符号换成具体的文件名</p></li><li><p>将添加的文件提交到仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"Initial commit"</span></span></span><br></pre></td></tr></table></figure></li><li><p>将本地仓库关联到远程仓库</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote add origin https://github.com/javacfox/Blog_Back_Up</span></span><br></pre></td></tr></table></figure></li><li><p>运行以下命令查看结果</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin master</span></span><br></pre></td></tr></table></figure></li><li><p>提交代码之前先执行一下同步</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin master</span></span><br></pre></td></tr></table></figure></li><li><p>如果报错，可以执行如下命令,慎用</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin master --allow-unrelated-histories</span></span><br></pre></td></tr></table></figure></li></ol><p>后面加上 --allow-unrelated-histories，把两段不相干的 分支进行强行合并，因为是提交到一个空白仓库，所以可以强制执行，然后在执行git push origin master</p>]]></content>
      
      
      <categories>
          
          <category> 工具资料 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Markdown </tag>
            
            <tag> 阿里云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2016/03/30/hello-world/"/>
      <url>/2016/03/30/hello-world/</url>
      
        <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="您好, 这里需要密码." /><label>您好, 这里需要密码.</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="9a42f2b36203abd2cd8fa0e68de4d96f3c6caa49ab4c2a906af4f263606fb231">30825675d43aa39e2c59e478bc7c48090b0b48811da57da12d57af7df317c43574c4e83679463b976a9b7f9a057459fbd52045de6ab33d887b23455bda4017e0a8ed14ec9b6148f4b4cb4c29a8daab085b60743406a3eaec16b0a12c0614c852aee66f6a9a5ed23ac825f29eaa2ec2bc4f113b4b90f2c69d917e4d64e51251d8997a0ad6b822da931e1bc1d593100a03e3b9604df4a21b799579fd79f94b01494b2a075d9ef64831476cce957d6a671684301f5cf3242becf81e0b4654aa8226221474834e3ac8749bafa914b08e78f33cb0148d7555989c2b9f2c06408decb987cb5815b3b8bd4bcfcdb92f0f1733cb8b8f4bd18cf746bae3f86a8104cd5b45b0c3dda9985b38c0f846d8b9b01c94483e3ddc85ca5d5f51117b3ca1f43c8fcd87cdaf40655a911f53ba8e17831fbc3ae42f806b9d921bb315519f2391e8b1e2c8ce051d2a77385f5e66c194ab3ea00bd8c0a8c076f86772308152a8199dd05c73531e6524f1d84ea5256967722f28fff4e054044aa8840422359c4759c1ce07bce36eb6b59d60c2d5d4e471a9034e600bdc517b5e98622b006c4cae18751d53ce5fda146249fbc0b3d72b7b889df26b401aa60d1b7a58bc2a23f38814f5e45ab9277185382c1d9cc30fda8f71b5dfa434fe9895db87e96773566797b901792281365c4f2b5ac0564f14ecb3d6299ed4574bf7a021a5ffb67d5384e97e876258c9d41c0bb9ad022ca9fa229fae9cd74ec465e17e6aa559550e1bfd64e88f4fc1d0f27dc894374b87426dfed3ff25d78c3d0c92cd47253912db0d148418b38df05915c203650c9a3cba6932abf914ed2661e673d8f57834cad3116566e32488f526ae32226df05d904e699730205b04b9642b2e151f6d266a958e330dfc91b4fedea71d713a166d3ca80efb757c93cdb5cfdd092dd0165168b510e9f35cc77c682612cb21ccab0ffa7c67869bae2f6bb0f9ea187460be3f510ba9fd4fadcd757bcbc25bf5444c36a09b15c51a587c8a96280e6be4fb7ea32707d1ad9acb57e70c60b8b5a5bd4a342fa05ba7ab515edc4479d8cdeb4057816c418940b0e966e509a396831c6ba3109bcc2f5f5294328d680e0f91916224ae9af5a99c9ec3258652d5fcce1f3ff3042b0a797236e9c1157fccfa952968069099071baf7ebce2d769c39e31e21bfee181179502f9bc9e2e8bc44e3384b79ce9722811dd7aa3e18e155f6619be768bc4ff051042c9dd42fcf3a01a16dd1e5d43b2e682723a72b97f03c5d8b5981006444394a6d1c7c32d8251c2861cfbaeaaaddf8105f62e1139f5a65fe5aea41dd2a8119e2aaa31af1922b65b3fe20c60cb839670512dcf553ff32740232430cdc3d71a25e40b706b604b0caabab9fde373a5671c4a378c3763ebc52266edf3504da91879d800d1f012bd3a418c4475d095d180b362dcce145cb6927641dd87606981efe570f3c24fd2fd79954ed59b19b779eafb1d8c2ef70f15a3e9a6d1946dcdc7dbaac8589820dfcd05c937fca31ef33fff85f60d1a8705ced35ea8d9a09f38b267367a9a6d0515257624fab5f146a81c3b6cde18cc62b500c720758d577a9dcd3c67c922f98c09d6eaa9444a3fed2f47cc966fa1960579a211eddb7c401c47de843496aec7a045db88e6c89169818f7d85650c2d9587231b22786714c39d89562807127648bd7d9ccfdcaa54c7092066ee438bb18616ae067452e4165680675cccf1105cb9555c21872f092aeb4e70e1b0ef9c252039b936cacbe04649bd204e7107a13c61147919ef9eb2fc8f3ac023bbc7fc0b92ffe82df858ebb5368658fa21779b27480f590468eb74a715c0bd428c5e2993d721bcac96ef073bea5921c5a7fe9ca4cb10dc6c63f5c6716548d9aa2c6df0b4d059c4efab734fabf39b95c57288202e790a88e3a7413eeb3f23d454e68cc0037dfe6fcae18f87edc2008971ad9621576fee620394851a32329f9d7ca3a27e072275d4bd76984325961e7dfc6428ce4189e02cbf5962a1018e1fdf6e6a243076c42f473baec2ba7fb41bf3aa76a209f3c0de2c98f2cd3e0d5ce84b69dd90e94d778919e3e048f50b587fde7475c253351651c94ca0559cf28ca501f52de641abbb230ac5bb09cea2fdc6a10dae8bb04a7a6faa6c1e85fe0f251d266d714175799a09d4b190e97020fad0c88d8b3276f4ed6e10ac3ade4541f71b07be519911ce4a9ed1770f4408147b5cd0a25a3d54688fe6f8698ab5ee73865f3ee5e3dc88677142934be723be7a24343859b5788c525e7e9e7f1b3bbfa2b8912c11d9ab55d557e8653223e3677e952feab7cc2458a396faaa5cdb55b7be6d4a9b9fb8ffb59b19db0c065c54ac6396ced737eaba450e3601c3a57ccc681a75af7eedd3a183b1faedcc4045f0a1dc035ba7f87c84f345525d2ed74d51af1fefde772c5700994a4fa63f5f497f9134f0314cbd6798d465262e97067cfa84e6f1e0e644d84f5e5d4634f02dcc52a6b66152c87fb96023cb0ff224c4c5f8a3fcb6bdab193c5f307ca3e65982ed80d60eba7be7674a81415f369843fc53d4470644fe05d4c9842c2f0e16dfc24170d33e3766b7309600e6b92a45999a7d614f53a571638343353239534360b20241b494b306185fb1e1cdaa05bd43a1a5bd3d12b0e0a51d9f1854a685be94af755fc0fc01b70b953e1fd1d25a394decfaa104a3987af1b851129efcaaa93570be5199a04e509dfba6a61bde9c9ee54a73e3e3d55d52ee1ea0c646b9eeae20ae9e81f356fd39719201443aff7b3ad7a477635cd3904fe46a35cd5a3db9ebb222a8130ce2660cb903a3cfa24bf33e858492dd18ec44b2ac47d6ec996ad9dc761d2786eeae4b78d8bbff54ce94952919ff27c84fa0d2b43bca90a1fe2e41a3935b60919eef897cb5a488859f5fd214272fd776d07db9a14f6b9d6a840483aa614fdf3b0e9a6b8878928cd8c74186ff1a96b0a5180eda75d1cded1434e1ee8723dce425c1dbba50f12d1fa98f82b7cb160a0661e910459b88de8831f614fd8015bb8a99f5da0b8b7f1b029d6eefca3cba6a9a54893ec96dde5a17f773991f52314cbe66e2ccbf5b4c9876c1eacba0154d12a22616b1e70437127bdeca78a6914cd73ff9770f5665c75b63e06a57b8b13561add107108b3798c4f310b0f55bb1ad5a92c0db45a9bc15ee5418a053ced7b6ac3d97f6c3872aa771548d451b49f9261d8ec9aac8b0e8e16fa20670bd300edf9f3b83cab61b81a9c01060df340c75c68491773341ae74e47c14e164eac6de5b580b7a9f507ca7a9f8c70e20c7ecc8441335994a5d186331baa02000ebe29e2956566e9911322b4c6ffecb5275a55b8b1de7</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 作为日记加密 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
